var ib=Object.defineProperty,sb=Object.defineProperties;var ob=Object.getOwnPropertyDescriptors;var od=Object.getOwnPropertySymbols;var tM=Object.prototype.hasOwnProperty,nM=Object.prototype.propertyIsEnumerable;var eM=(n,e,t)=>e in n?ib(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ct=(n,e)=>{for(var t in e||(e={}))tM.call(e,t)&&eM(n,t,e[t]);if(od)for(var t of od(e))nM.call(e,t)&&eM(n,t,e[t]);return n},Vn=(n,e)=>sb(n,ob(e));var Ur=(n,e)=>{var t={};for(var r in n)tM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&od)for(var r of od(n))e.indexOf(r)<0&&nM.call(n,r)&&(t[r]=n[r]);return t};var ab=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Be={exports:{}},wt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var rM=Object.getOwnPropertySymbols,lb=Object.prototype.hasOwnProperty,ub=Object.prototype.propertyIsEnumerable;function cb(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function fb(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Iy=fb()?Object.assign:function(n,e){for(var t,r=cb(n),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)lb.call(t,o)&&(r[o]=t[o]);if(rM){i=rM(t);for(var a=0;a<i.length;a++)ub.call(t,i[a])&&(r[i[a]]=t[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=Iy,Ul=60103,a1=60106;wt.Fragment=60107;wt.StrictMode=60108;wt.Profiler=60114;var l1=60109,u1=60110,c1=60112;wt.Suspense=60113;var f1=60115,d1=60116;if(typeof Symbol=="function"&&Symbol.for){var Hr=Symbol.for;Ul=Hr("react.element"),a1=Hr("react.portal"),wt.Fragment=Hr("react.fragment"),wt.StrictMode=Hr("react.strict_mode"),wt.Profiler=Hr("react.profiler"),l1=Hr("react.provider"),u1=Hr("react.context"),c1=Hr("react.forward_ref"),wt.Suspense=Hr("react.suspense"),f1=Hr("react.memo"),d1=Hr("react.lazy")}var iM=typeof Symbol=="function"&&Symbol.iterator;function db(n){return n===null||typeof n!="object"?null:(n=iM&&n[iM]||n["@@iterator"],typeof n=="function"?n:null)}function jc(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p1={};function Hl(n,e,t){this.props=n,this.context=e,this.refs=p1,this.updater=t||h1}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error(jc(85));this.updater.enqueueSetState(this,n,e,"setState")};Hl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function m1(){}m1.prototype=Hl.prototype;function Fy(n,e,t){this.props=n,this.context=e,this.refs=p1,this.updater=t||h1}var Ny=Fy.prototype=new m1;Ny.constructor=Fy;Dy(Ny,Hl.prototype);Ny.isPureReactComponent=!0;var Oy={current:null},g1=Object.prototype.hasOwnProperty,y1={key:!0,ref:!0,__self:!0,__source:!0};function v1(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)g1.call(e,r)&&!y1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),f=0;f<a;f++)u[f]=arguments[f+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ul,type:n,key:s,ref:o,props:i,_owner:Oy.current}}function hb(n,e){return{$$typeof:Ul,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ky(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ul}function pb(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var sM=/\/+/g;function Vm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?pb(""+n.key):e.toString(36)}function ch(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ul:case a1:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Vm(o,0):r,Array.isArray(i)?(t="",n!=null&&(t=n.replace(sM,"$&/")+"/"),ch(i,e,t,"",function(f){return f})):i!=null&&(ky(i)&&(i=hb(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sM,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+Vm(s,a);o+=ch(s,e,t,u,i)}else if(u=db(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+Vm(s,a++),o+=ch(s,e,t,u,i);else if(s==="object")throw e=""+n,Error(jc(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e));return o}function ad(n,e,t){if(n==null)return n;var r=[],i=0;return ch(n,r,"","",function(s){return e.call(t,s,i++)}),r}function mb(n){if(n._status===-1){var e=n._result;e=e(),n._status=0,n._result=e,e.then(function(t){n._status===0&&(t=t.default,n._status=1,n._result=t)},function(t){n._status===0&&(n._status=2,n._result=t)})}if(n._status===1)return n._result;throw n._result}var x1={current:null};function Yi(){var n=x1.current;if(n===null)throw Error(jc(321));return n}var gb={ReactCurrentDispatcher:x1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Oy,IsSomeRendererActing:{current:!1},assign:Dy};wt.Children={map:ad,forEach:function(n,e,t){ad(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ad(n,function(){e++}),e},toArray:function(n){return ad(n,function(e){return e})||[]},only:function(n){if(!ky(n))throw Error(jc(143));return n}};wt.Component=Hl;wt.PureComponent=Fy;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gb;wt.cloneElement=function(n,e,t){if(n==null)throw Error(jc(267,n));var r=Dy({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Oy.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)g1.call(e,u)&&!y1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var f=0;f<u;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Ul,type:n.type,key:i,ref:s,props:r,_owner:o}};wt.createContext=function(n,e){return e===void 0&&(e=null),n={$$typeof:u1,_calculateChangedBits:e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider={$$typeof:l1,_context:n},n.Consumer=n};wt.createElement=v1;wt.createFactory=function(n){var e=v1.bind(null,n);return e.type=n,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(n){return{$$typeof:c1,render:n}};wt.isValidElement=ky;wt.lazy=function(n){return{$$typeof:d1,_payload:{_status:-1,_result:n},_init:mb}};wt.memo=function(n,e){return{$$typeof:f1,type:n,compare:e===void 0?null:e}};wt.useCallback=function(n,e){return Yi().useCallback(n,e)};wt.useContext=function(n,e){return Yi().useContext(n,e)};wt.useDebugValue=function(){};wt.useEffect=function(n,e){return Yi().useEffect(n,e)};wt.useImperativeHandle=function(n,e,t){return Yi().useImperativeHandle(n,e,t)};wt.useLayoutEffect=function(n,e){return Yi().useLayoutEffect(n,e)};wt.useMemo=function(n,e){return Yi().useMemo(n,e)};wt.useReducer=function(n,e,t){return Yi().useReducer(n,e,t)};wt.useRef=function(n){return Yi().useRef(n)};wt.useState=function(n){return Yi().useState(n)};wt.version="17.0.2";Be.exports=wt;var iO=Be.exports,_1={exports:{}},Dr={},rl={exports:{}},M1={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var e,t,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var u=null,f=null,h=function(){if(u!==null)try{var J=n.unstable_now();u(!0,J),u=null}catch(Y){throw setTimeout(h,0),Y}};e=function(J){u!==null?setTimeout(e,0,J):(u=J,setTimeout(h,0))},t=function(J,Y){f=setTimeout(J,Y)},r=function(){clearTimeout(f)},n.unstable_shouldYield=function(){return!1},i=n.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var m=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof m!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,x=null,y=-1,_=5,M=0;n.unstable_shouldYield=function(){return n.unstable_now()>=M},i=function(){},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<J?Math.floor(1e3/J):5};var A=new MessageChannel,S=A.port2;A.port1.onmessage=function(){if(x!==null){var J=n.unstable_now();M=J+_;try{x(!0,J)?S.postMessage(null):(v=!1,x=null)}catch(Y){throw S.postMessage(null),Y}}else v=!1},e=function(J){x=J,v||(v=!0,S.postMessage(null))},t=function(J,Y){y=p(function(){J(n.unstable_now())},Y)},r=function(){d(y),y=-1}}function T(J,Y){var he=J.length;J.push(Y);e:for(;;){var Se=he-1>>>1,we=J[Se];if(we!==void 0&&0<L(we,Y))J[Se]=Y,J[he]=we,he=Se;else break e}}function C(J){return J=J[0],J===void 0?null:J}function B(J){var Y=J[0];if(Y!==void 0){var he=J.pop();if(he!==Y){J[0]=he;e:for(var Se=0,we=J.length;Se<we;){var te=2*(Se+1)-1,Ke=J[te],Ne=te+1,Fe=J[Ne];if(Ke!==void 0&&0>L(Ke,he))Fe!==void 0&&0>L(Fe,Ke)?(J[Se]=Fe,J[Ne]=he,Se=Ne):(J[Se]=Ke,J[te]=he,Se=te);else if(Fe!==void 0&&0>L(Fe,he))J[Se]=Fe,J[Ne]=he,Se=Ne;else break e}}return Y}return null}function L(J,Y){var he=J.sortIndex-Y.sortIndex;return he!==0?he:J.id-Y.id}var F=[],G=[],b=1,P=null,W=3,z=!1,K=!1,X=!1;function q(J){for(var Y=C(G);Y!==null;){if(Y.callback===null)B(G);else if(Y.startTime<=J)B(G),Y.sortIndex=Y.expirationTime,T(F,Y);else break;Y=C(G)}}function V(J){if(X=!1,q(J),!K)if(C(F)!==null)K=!0,e(re);else{var Y=C(G);Y!==null&&t(V,Y.startTime-J)}}function re(J,Y){K=!1,X&&(X=!1,r()),z=!0;var he=W;try{for(q(Y),P=C(F);P!==null&&(!(P.expirationTime>Y)||J&&!n.unstable_shouldYield());){var Se=P.callback;if(typeof Se=="function"){P.callback=null,W=P.priorityLevel;var we=Se(P.expirationTime<=Y);Y=n.unstable_now(),typeof we=="function"?P.callback=we:P===C(F)&&B(F),q(Y)}else B(F);P=C(F)}if(P!==null)var te=!0;else{var Ke=C(G);Ke!==null&&t(V,Ke.startTime-Y),te=!1}return te}finally{P=null,W=he,z=!1}}var le=i;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){K||z||(K=!0,e(re))},n.unstable_getCurrentPriorityLevel=function(){return W},n.unstable_getFirstCallbackNode=function(){return C(F)},n.unstable_next=function(J){switch(W){case 1:case 2:case 3:var Y=3;break;default:Y=W}var he=W;W=Y;try{return J()}finally{W=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=le,n.unstable_runWithPriority=function(J,Y){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=W;W=J;try{return Y()}finally{W=he}},n.unstable_scheduleCallback=function(J,Y,he){var Se=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Se+he:Se):he=Se,J){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=he+we,J={id:b++,callback:Y,priorityLevel:J,startTime:he,expirationTime:we,sortIndex:-1},he>Se?(J.sortIndex=he,T(G,J),C(F)===null&&J===C(G)&&(X?r():X=!0,t(V,he-Se))):(J.sortIndex=we,T(F,J),K||z||(K=!0,e(re))),J},n.unstable_wrapCallback=function(J){var Y=W;return function(){var he=W;W=Y;try{return J.apply(this,arguments)}finally{W=he}}}})(M1);rl.exports=M1;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Be.exports,Jt=Iy,Mn=rl.exports;function Me(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ip)throw Error(Me(227));var A1=new Set,xc={};function ia(n,e){pl(n,e),pl(n+"Capture",e)}function pl(n,e){for(xc[n]=e,n=0;n<e.length;n++)A1.add(e[n])}var ji=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),yb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oM=Object.prototype.hasOwnProperty,aM={},lM={};function vb(n){return oM.call(lM,n)?!0:oM.call(aM,n)?!1:yb.test(n)?lM[n]=!0:(aM[n]=!0,!1)}function xb(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _b(n,e,t,r){if(e===null||typeof e=="undefined"||xb(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xn(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ln[n]=new Xn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ln[e]=new Xn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ln[n]=new Xn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ln[n]=new Xn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ln[n]=new Xn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ln[n]=new Xn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ln[n]=new Xn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ln[n]=new Xn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ln[n]=new Xn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Gy=/[\-:]([a-z])/g;function Uy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Gy,Uy);Ln[e]=new Xn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Gy,Uy);Ln[e]=new Xn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Gy,Uy);Ln[e]=new Xn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ln[n]=new Xn(n,1,!1,n.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new Xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ln[n]=new Xn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Hy(n,e,t,r){var i=Ln.hasOwnProperty(e)?Ln[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(_b(e,t,i,r)&&(t=null),r||i===null?vb(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var sa=ip.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=60103,Po=60106,ws=60107,zy=60108,rc=60114,Vy=60109,Wy=60110,sp=60112,ic=60113,bh=60120,op=60115,Jy=60116,jy=60121,Ky=60128,w1=60129,Xy=60130,n0=60131;if(typeof Symbol=="function"&&Symbol.for){var vn=Symbol.for;Yu=vn("react.element"),Po=vn("react.portal"),ws=vn("react.fragment"),zy=vn("react.strict_mode"),rc=vn("react.profiler"),Vy=vn("react.provider"),Wy=vn("react.context"),sp=vn("react.forward_ref"),ic=vn("react.suspense"),bh=vn("react.suspense_list"),op=vn("react.memo"),Jy=vn("react.lazy"),jy=vn("react.block"),vn("react.scope"),Ky=vn("react.opaque.id"),w1=vn("react.debug_trace_mode"),Xy=vn("react.offscreen"),n0=vn("react.legacy_hidden")}var uM=typeof Symbol=="function"&&Symbol.iterator;function Tu(n){return n===null||typeof n!="object"?null:(n=uM&&n[uM]||n["@@iterator"],typeof n=="function"?n:null)}var Wm;function qu(n){if(Wm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wm=e&&e[1]||""}return`
`+Wm+n}var Jm=!1;function ld(n,e){if(!n||Jm)return"";Jm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{Jm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?qu(n):""}function Mb(n){switch(n.tag){case 5:return qu(n.type);case 16:return qu("Lazy");case 13:return qu("Suspense");case 19:return qu("SuspenseList");case 0:case 2:case 15:return n=ld(n.type,!1),n;case 11:return n=ld(n.type.render,!1),n;case 22:return n=ld(n.type._render,!1),n;case 1:return n=ld(n.type,!0),n;default:return""}}function il(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ws:return"Fragment";case Po:return"Portal";case rc:return"Profiler";case zy:return"StrictMode";case ic:return"Suspense";case bh:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Wy:return(n.displayName||"Context")+".Consumer";case Vy:return(n._context.displayName||"Context")+".Provider";case sp:var e=n.render;return e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case op:return il(n.type);case jy:return il(n._render);case Jy:e=n._payload,n=n._init;try{return il(n(e))}catch{}}return null}function zs(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function S1(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ab(n){var e=S1(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ud(n){n._valueTracker||(n._valueTracker=Ab(n))}function E1(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=S1(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Rh(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function r0(n,e){var t=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function cM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=zs(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T1(n,e){e=e.checked,e!=null&&Hy(n,"checked",e,!1)}function i0(n,e){T1(n,e);var t=zs(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?s0(n,e.type,t):e.hasOwnProperty("defaultValue")&&s0(n,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function s0(n,e,t){(e!=="number"||Rh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}function wb(n){var e="";return ip.Children.forEach(n,function(t){t!=null&&(e+=t)}),e}function o0(n,e){return n=Jt({children:void 0},e),(e=wb(e.children))&&(n.children=e),n}function sl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+zs(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function a0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function dM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Me(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Me(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zs(t)}}function C1(n,e){var t=zs(e.value),r=zs(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function hM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}var l0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function b1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function u0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?b1(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cd,R1=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!==l0.svg||"innerHTML"in n)n.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function _c(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var sc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(n){Sb.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),sc[e]=sc[n]})});function B1(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||sc.hasOwnProperty(n)&&sc[n]?(""+e).trim():e+"px"}function L1(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=B1(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Eb=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function c0(n,e){if(e){if(Eb[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function f0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Qy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var d0=null,ol=null,al=null;function pM(n){if(n=Xc(n)){if(typeof d0!="function")throw Error(Me(280));var e=n.stateNode;e&&(e=dp(e),d0(n.stateNode,n.type,e))}}function P1(n){ol?al?al.push(n):al=[n]:ol=n}function I1(){if(ol){var n=ol,e=al;if(al=ol=null,pM(n),e)for(n=0;n<e.length;n++)pM(e[n])}}function Yy(n,e){return n(e)}function D1(n,e,t,r,i){return n(e,t,r,i)}function qy(){}var F1=Yy,Io=!1,jm=!1;function Zy(){(ol!==null||al!==null)&&(qy(),I1())}function Tb(n,e,t){if(jm)return n(e,t);jm=!0;try{return F1(n,e,t)}finally{jm=!1,Zy()}}function Mc(n,e){var t=n.stateNode;if(t===null)return null;var r=dp(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Me(231,e,typeof t));return t}var h0=!1;if(ji)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){h0=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{h0=!1}function Cb(n,e,t,r,i,s,o,a,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var oc=!1,Bh=null,Lh=!1,p0=null,bb={onError:function(n){oc=!0,Bh=n}};function Rb(n,e,t,r,i,s,o,a,u){oc=!1,Bh=null,Cb.apply(bb,arguments)}function Bb(n,e,t,r,i,s,o,a,u){if(Rb.apply(this,arguments),oc){if(oc){var f=Bh;oc=!1,Bh=null}else throw Error(Me(198));Lh||(Lh=!0,p0=f)}}function oa(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&1026)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function N1(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function mM(n){if(oa(n)!==n)throw Error(Me(188))}function Lb(n){var e=n.alternate;if(!e){if(e=oa(n),e===null)throw Error(Me(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return mM(i),n;if(s===r)return mM(i),e;s=s.sibling}throw Error(Me(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Me(189))}}if(t.alternate!==r)throw Error(Me(190))}if(t.tag!==3)throw Error(Me(188));return t.stateNode.current===t?n:e}function O1(n){if(n=Lb(n),!n)return null;for(var e=n;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===n)break;for(;!e.sibling;){if(!e.return||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function gM(n,e){for(var t=n.alternate;e!==null;){if(e===n||e===t)return!0;e=e.return}return!1}var k1,$y,G1,U1,m0=!1,fi=[],Bs=null,Ls=null,Ps=null,Ac=new Map,wc=new Map,bu=[],yM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g0(n,e,t,r,i){return{blockedOn:n,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[r]}}function vM(n,e){switch(n){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function Ru(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n=g0(e,t,r,i,s),e!==null&&(e=Xc(e),e!==null&&$y(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Pb(n,e,t,r,i){switch(e){case"focusin":return Bs=Ru(Bs,n,e,t,r,i),!0;case"dragenter":return Ls=Ru(Ls,n,e,t,r,i),!0;case"mouseover":return Ps=Ru(Ps,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Ac.set(s,Ru(Ac.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wc.set(s,Ru(wc.get(s)||null,n,e,t,r,i)),!0}return!1}function Ib(n){var e=Do(n.target);if(e!==null){var t=oa(e);if(t!==null){if(e=t.tag,e===13){if(e=N1(t),e!==null){n.blockedOn=e,U1(n.lanePriority,function(){Mn.unstable_runWithPriority(n.priority,function(){G1(t)})});return}}else if(e===3&&t.stateNode.hydrate){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=rv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null)return e=Xc(t),e!==null&&$y(e),n.blockedOn=t,!1;e.shift()}return!0}function xM(n,e,t){fh(n)&&t.delete(e)}function Db(){for(m0=!1;0<fi.length;){var n=fi[0];if(n.blockedOn!==null){n=Xc(n.blockedOn),n!==null&&k1(n);break}for(var e=n.targetContainers;0<e.length;){var t=rv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null){n.blockedOn=t;break}e.shift()}n.blockedOn===null&&fi.shift()}Bs!==null&&fh(Bs)&&(Bs=null),Ls!==null&&fh(Ls)&&(Ls=null),Ps!==null&&fh(Ps)&&(Ps=null),Ac.forEach(xM),wc.forEach(xM)}function Bu(n,e){n.blockedOn===e&&(n.blockedOn=null,m0||(m0=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,Db)))}function H1(n){function e(i){return Bu(i,n)}if(0<fi.length){Bu(fi[0],n);for(var t=1;t<fi.length;t++){var r=fi[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Bs!==null&&Bu(Bs,n),Ls!==null&&Bu(Ls,n),Ps!==null&&Bu(Ps,n),Ac.forEach(e),wc.forEach(e),t=0;t<bu.length;t++)r=bu[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<bu.length&&(t=bu[0],t.blockedOn===null);)Ib(t),t.blockedOn===null&&bu.shift()}function fd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ka={animationend:fd("Animation","AnimationEnd"),animationiteration:fd("Animation","AnimationIteration"),animationstart:fd("Animation","AnimationStart"),transitionend:fd("Transition","TransitionEnd")},Km={},z1={};ji&&(z1=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function ap(n){if(Km[n])return Km[n];if(!Ka[n])return n;var e=Ka[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in z1)return Km[n]=e[t];return n}var V1=ap("animationend"),W1=ap("animationiteration"),J1=ap("animationstart"),j1=ap("transitionend"),K1=new Map,ev=new Map,Fb=["abort","abort",V1,"animationEnd",W1,"animationIteration",J1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",j1,"transitionEnd","waiting","waiting"];function tv(n,e){for(var t=0;t<n.length;t+=2){var r=n[t],i=n[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),ev.set(r,e),K1.set(r,i),ia(i,[r])}}var Nb=Mn.unstable_now;Nb();var Ot=8;function Wa(n){if((1&n)!==0)return Ot=15,1;if((2&n)!==0)return Ot=14,2;if((4&n)!==0)return Ot=13,4;var e=24&n;return e!==0?(Ot=12,e):(n&32)!==0?(Ot=11,32):(e=192&n,e!==0?(Ot=10,e):(n&256)!==0?(Ot=9,256):(e=3584&n,e!==0?(Ot=8,e):(n&4096)!==0?(Ot=7,4096):(e=4186112&n,e!==0?(Ot=6,e):(e=62914560&n,e!==0?(Ot=5,e):n&67108864?(Ot=4,67108864):(n&134217728)!==0?(Ot=3,134217728):(e=805306368&n,e!==0?(Ot=2,e):(1073741824&n)!==0?(Ot=1,1073741824):(Ot=8,n))))))}function Ob(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function kb(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Me(358,n))}}function Sc(n,e){var t=n.pendingLanes;if(t===0)return Ot=0;var r=0,i=0,s=n.expiredLanes,o=n.suspendedLanes,a=n.pingedLanes;if(s!==0)r=s,i=Ot=15;else if(s=t&134217727,s!==0){var u=s&~o;u!==0?(r=Wa(u),i=Ot):(a&=s,a!==0&&(r=Wa(a),i=Ot))}else s=t&~o,s!==0?(r=Wa(s),i=Ot):a!==0&&(r=Wa(a),i=Ot);if(r===0)return 0;if(r=31-Vs(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(Wa(e),i<=Ot)return e;Ot=i}if(e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Vs(e),i=1<<t,r|=n[t],e&=~i;return r}function X1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ph(n,e){switch(n){case 15:return 1;case 14:return 2;case 12:return n=Ja(24&~e),n===0?Ph(10,e):n;case 10:return n=Ja(192&~e),n===0?Ph(8,e):n;case 8:return n=Ja(3584&~e),n===0&&(n=Ja(4186112&~e),n===0&&(n=512)),n;case 2:return e=Ja(805306368&~e),e===0&&(e=268435456),e}throw Error(Me(358,n))}function Ja(n){return n&-n}function Xm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function lp(n,e,t){n.pendingLanes|=e;var r=e-1;n.suspendedLanes&=r,n.pingedLanes&=r,n=n.eventTimes,e=31-Vs(e),n[e]=t}var Vs=Math.clz32?Math.clz32:Hb,Gb=Math.log,Ub=Math.LN2;function Hb(n){return n===0?32:31-(Gb(n)/Ub|0)|0}var zb=Mn.unstable_UserBlockingPriority,Vb=Mn.unstable_runWithPriority,dh=!0;function Wb(n,e,t,r){Io||qy();var i=nv,s=Io;Io=!0;try{D1(i,n,e,t,r)}finally{(Io=s)||Zy()}}function Jb(n,e,t,r){Vb(zb,nv.bind(null,n,e,t,r))}function nv(n,e,t,r){if(dh){var i;if((i=(e&4)===0)&&0<fi.length&&-1<yM.indexOf(n))n=g0(null,n,e,t,r),fi.push(n);else{var s=rv(n,e,t,r);if(s===null)i&&vM(n,r);else{if(i){if(-1<yM.indexOf(n)){n=g0(s,n,e,t,r),fi.push(n);return}if(Pb(s,n,e,t,r))return;vM(n,r)}aS(n,e,r,null,t)}}}}function rv(n,e,t,r){var i=Qy(r);if(i=Do(i),i!==null){var s=oa(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=N1(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return aS(n,e,r,i,t),null}var Ss=null,iv=null,hh=null;function Q1(){if(hh)return hh;var n,e=iv,t=e.length,r,i="value"in Ss?Ss.value:Ss.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return hh=i.slice(n,1<r?1-r:void 0)}function ph(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function dd(){return!0}function _M(){return!1}function gr(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dd:_M,this.isPropagationStopped=_M,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd}),e}var zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=gr(zl),Kc=Jt({},zl,{view:0,detail:0}),jb=gr(Kc),Qm,Ym,Lu,up=Jt({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lu&&(Lu&&n.type==="mousemove"?(Qm=n.screenX-Lu.screenX,Ym=n.screenY-Lu.screenY):Ym=Qm=0,Lu=n),Qm)},movementY:function(n){return"movementY"in n?n.movementY:Ym}}),MM=gr(up),Kb=Jt({},up,{dataTransfer:0}),Xb=gr(Kb),Qb=Jt({},Kc,{relatedTarget:0}),qm=gr(Qb),Yb=Jt({},zl,{animationName:0,elapsedTime:0,pseudoElement:0}),qb=gr(Yb),Zb=Jt({},zl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$b=gr(Zb),eR=Jt({},zl,{data:0}),AM=gr(eR),tR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=rR[n])?!!e[n]:!1}function ov(){return iR}var sR=Jt({},Kc,{key:function(n){if(n.key){var e=tR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ph(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(n){return n.type==="keypress"?ph(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ph(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oR=gr(sR),aR=Jt({},up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wM=gr(aR),lR=Jt({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),uR=gr(lR),cR=Jt({},zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fR=gr(cR),dR=Jt({},up,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hR=gr(dR),pR=[9,13,27,32],av=ji&&"CompositionEvent"in window,ac=null;ji&&"documentMode"in document&&(ac=document.documentMode);var mR=ji&&"TextEvent"in window&&!ac,Y1=ji&&(!av||ac&&8<ac&&11>=ac),SM=String.fromCharCode(32),EM=!1;function q1(n,e){switch(n){case"keyup":return pR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z1(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xa=!1;function gR(n,e){switch(n){case"compositionend":return Z1(e);case"keypress":return e.which!==32?null:(EM=!0,SM);case"textInput":return n=e.data,n===SM&&EM?null:n;default:return null}}function yR(n,e){if(Xa)return n==="compositionend"||!av&&q1(n,e)?(n=Q1(),hh=iv=Ss=null,Xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y1&&e.locale!=="ko"?null:e.data;default:return null}}var vR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!vR[n.type]:e==="textarea"}function $1(n,e,t,r){P1(r),e=Ih(e,"onChange"),0<e.length&&(t=new sv("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var lc=null,Ec=null;function xR(n){iS(n,0)}function cp(n){var e=Ya(n);if(E1(e))return n}function _R(n,e){if(n==="change")return e}var eS=!1;if(ji){var Zm;if(ji){var $m="oninput"in document;if(!$m){var CM=document.createElement("div");CM.setAttribute("oninput","return;"),$m=typeof CM.oninput=="function"}Zm=$m}else Zm=!1;eS=Zm&&(!document.documentMode||9<document.documentMode)}function bM(){lc&&(lc.detachEvent("onpropertychange",tS),Ec=lc=null)}function tS(n){if(n.propertyName==="value"&&cp(Ec)){var e=[];if($1(e,Ec,n,Qy(n)),n=xR,Io)n(e);else{Io=!0;try{Yy(n,e)}finally{Io=!1,Zy()}}}}function MR(n,e,t){n==="focusin"?(bM(),lc=e,Ec=t,lc.attachEvent("onpropertychange",tS)):n==="focusout"&&bM()}function AR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cp(Ec)}function wR(n,e){if(n==="click")return cp(e)}function SR(n,e){if(n==="input"||n==="change")return cp(e)}function ER(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var br=typeof Object.is=="function"?Object.is:ER,TR=Object.prototype.hasOwnProperty;function Tc(n,e){if(br(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!TR.call(e,t[r])||!br(n[t[r]],e[t[r]]))return!1;return!0}function RM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function BM(n,e){var t=RM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=RM(t)}}function nS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?nS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function LM(){for(var n=window,e=Rh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Rh(n.document)}return e}function y0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var CR=ji&&"documentMode"in document&&11>=document.documentMode,Qa=null,v0=null,uc=null,x0=!1;function PM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;x0||Qa==null||Qa!==Rh(r)||(r=Qa,"selectionStart"in r&&y0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uc&&Tc(uc,r)||(uc=r,r=Ih(v0,"onSelect"),0<r.length&&(e=new sv("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Qa)))}tv("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);tv("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);tv(Fb,2);for(var IM="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),eg=0;eg<IM.length;eg++)ev.set(IM[eg],0);pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function DM(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Bb(r,e,void 0,n),n.currentTarget=null}function iS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,f=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;DM(i,a,f),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,f=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;DM(i,a,f),s=u}}}if(Lh)throw n=p0,Lh=!1,p0=null,n}function Ut(n,e){var t=uS(e),r=n+"__bubble";t.has(r)||(oS(e,n,2,!1),t.add(r))}var FM="_reactListening"+Math.random().toString(36).slice(2);function sS(n){n[FM]||(n[FM]=!0,A1.forEach(function(e){rS.has(e)||NM(e,!1,n,null),NM(e,!0,n,null)}))}function NM(n,e,t,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=t;if(n==="selectionchange"&&t.nodeType!==9&&(s=t.ownerDocument),r!==null&&!e&&rS.has(n)){if(n!=="scroll")return;i|=2,s=r}var o=uS(s),a=n+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),oS(s,n,i,e),o.add(a))}function oS(n,e,t,r){var i=ev.get(e);switch(i===void 0?2:i){case 0:i=Wb;break;case 1:i=Jb;break;default:i=nv}t=i.bind(null,e,t,n),i=void 0,!h0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function aS(n,e,t,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Do(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Tb(function(){var f=s,h=Qy(t),p=[];e:{var d=K1.get(n);if(d!==void 0){var m=sv,v=n;switch(n){case"keypress":if(ph(t)===0)break e;case"keydown":case"keyup":m=oR;break;case"focusin":v="focus",m=qm;break;case"focusout":v="blur",m=qm;break;case"beforeblur":case"afterblur":m=qm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=MM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uR;break;case V1:case W1:case J1:m=qb;break;case j1:m=fR;break;case"scroll":m=jb;break;case"wheel":m=hR;break;case"copy":case"cut":case"paste":m=$b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=wM}var x=(e&4)!==0,y=!x&&n==="scroll",_=x?d!==null?d+"Capture":null:d;x=[];for(var M=f,A;M!==null;){A=M;var S=A.stateNode;if(A.tag===5&&S!==null&&(A=S,_!==null&&(S=Mc(M,_),S!=null&&x.push(Cc(M,S,A)))),y)break;M=M.return}0<x.length&&(d=new m(d,v,null,t,h),p.push({event:d,listeners:x}))}}if((e&7)===0){e:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&(e&16)===0&&(v=t.relatedTarget||t.fromElement)&&(Do(v)||v[Vl]))break e;if((m||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=f,v=v?Do(v):null,v!==null&&(y=oa(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=f),m!==v)){if(x=MM,S="onMouseLeave",_="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(x=wM,S="onPointerLeave",_="onPointerEnter",M="pointer"),y=m==null?d:Ya(m),A=v==null?d:Ya(v),d=new x(S,M+"leave",m,t,h),d.target=y,d.relatedTarget=A,S=null,Do(h)===f&&(x=new x(_,M+"enter",v,t,h),x.target=A,x.relatedTarget=y,S=x),y=S,m&&v)t:{for(x=m,_=v,M=0,A=x;A;A=Ea(A))M++;for(A=0,S=_;S;S=Ea(S))A++;for(;0<M-A;)x=Ea(x),M--;for(;0<A-M;)_=Ea(_),A--;for(;M--;){if(x===_||_!==null&&x===_.alternate)break t;x=Ea(x),_=Ea(_)}x=null}else x=null;m!==null&&OM(p,d,m,x,!1),v!==null&&y!==null&&OM(p,y,v,x,!0)}}e:{if(d=f?Ya(f):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var T=_R;else if(TM(d))if(eS)T=SR;else{T=AR;var C=MR}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=wR);if(T&&(T=T(n,f))){$1(p,T,t,h);break e}C&&C(n,d,f),n==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&s0(d,"number",d.value)}switch(C=f?Ya(f):window,n){case"focusin":(TM(C)||C.contentEditable==="true")&&(Qa=C,v0=f,uc=null);break;case"focusout":uc=v0=Qa=null;break;case"mousedown":x0=!0;break;case"contextmenu":case"mouseup":case"dragend":x0=!1,PM(p,t,h);break;case"selectionchange":if(CR)break;case"keydown":case"keyup":PM(p,t,h)}var B;if(av)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Xa?q1(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(Y1&&t.locale!=="ko"&&(Xa||L!=="onCompositionStart"?L==="onCompositionEnd"&&Xa&&(B=Q1()):(Ss=h,iv="value"in Ss?Ss.value:Ss.textContent,Xa=!0)),C=Ih(f,L),0<C.length&&(L=new AM(L,n,null,t,h),p.push({event:L,listeners:C}),B?L.data=B:(B=Z1(t),B!==null&&(L.data=B)))),(B=mR?gR(n,t):yR(n,t))&&(f=Ih(f,"onBeforeInput"),0<f.length&&(h=new AM("onBeforeInput","beforeinput",null,t,h),p.push({event:h,listeners:f}),h.data=B))}iS(p,e)})}function Cc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ih(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mc(n,t),s!=null&&r.unshift(Cc(n,s,i)),s=Mc(n,e),s!=null&&r.push(Cc(n,s,i))),n=n.return}return r}function Ea(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function OM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,f=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&f!==null&&(a=f,i?(u=Mc(t,s),u!=null&&o.unshift(Cc(t,u,a))):i||(u=Mc(t,s),u!=null&&o.push(Cc(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}function Dh(){}var tg=null,ng=null;function lS(n,e){switch(n){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function _0(n,e){return n==="textarea"||n==="option"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kM=typeof setTimeout=="function"?setTimeout:void 0,bR=typeof clearTimeout=="function"?clearTimeout:void 0;function lv(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function ll(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break}return n}function GM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rg=0;function RR(n){return{$$typeof:Ky,toString:n,valueOf:n}}var fp=Math.random().toString(36).slice(2),Es="__reactFiber$"+fp,Fh="__reactProps$"+fp,Vl="__reactContainer$"+fp,UM="__reactEvents$"+fp;function Do(n){var e=n[Es];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Vl]||t[Es]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=GM(n);n!==null;){if(t=n[Es])return t;n=GM(n)}return e}n=t,t=n.parentNode}return null}function Xc(n){return n=n[Es]||n[Vl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ya(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Me(33))}function dp(n){return n[Fh]||null}function uS(n){var e=n[UM];return e===void 0&&(e=n[UM]=new Set),e}var M0=[],qa=-1;function no(n){return{current:n}}function zt(n){0>qa||(n.current=M0[qa],M0[qa]=null,qa--)}function en(n,e){qa++,M0[qa]=n.current,n.current=e}var Ws={},Un=no(Ws),rr=no(!1),jo=Ws;function ml(n,e){var t=n.type.contextTypes;if(!t)return Ws;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ir(n){return n=n.childContextTypes,n!=null}function Nh(){zt(rr),zt(Un)}function HM(n,e,t){if(Un.current!==Ws)throw Error(Me(168));en(Un,e),en(rr,t)}function cS(n,e,t){var r=n.stateNode;if(n=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(Me(108,il(e)||"Unknown",i));return Jt({},t,r)}function mh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ws,jo=Un.current,en(Un,n),en(rr,rr.current),!0}function zM(n,e,t){var r=n.stateNode;if(!r)throw Error(Me(169));t?(n=cS(n,e,jo),r.__reactInternalMemoizedMergedChildContext=n,zt(rr),zt(Un),en(Un,n)):zt(rr),en(rr,t)}var uv=null,Ho=null,BR=Mn.unstable_runWithPriority,cv=Mn.unstable_scheduleCallback,A0=Mn.unstable_cancelCallback,LR=Mn.unstable_shouldYield,VM=Mn.unstable_requestPaint,w0=Mn.unstable_now,PR=Mn.unstable_getCurrentPriorityLevel,hp=Mn.unstable_ImmediatePriority,fS=Mn.unstable_UserBlockingPriority,dS=Mn.unstable_NormalPriority,hS=Mn.unstable_LowPriority,pS=Mn.unstable_IdlePriority,ig={},IR=VM!==void 0?VM:function(){},Ui=null,gh=null,sg=!1,WM=w0(),kn=1e4>WM?w0:function(){return w0()-WM};function gl(){switch(PR()){case hp:return 99;case fS:return 98;case dS:return 97;case hS:return 96;case pS:return 95;default:throw Error(Me(332))}}function mS(n){switch(n){case 99:return hp;case 98:return fS;case 97:return dS;case 96:return hS;case 95:return pS;default:throw Error(Me(332))}}function Ko(n,e){return n=mS(n),BR(n,e)}function bc(n,e,t){return n=mS(n),cv(n,e,t)}function Si(){if(gh!==null){var n=gh;gh=null,A0(n)}gS()}function gS(){if(!sg&&Ui!==null){sg=!0;var n=0;try{var e=Ui;Ko(99,function(){for(;n<e.length;n++){var t=e[n];do t=t(!0);while(t!==null)}}),Ui=null}catch(t){throw Ui!==null&&(Ui=Ui.slice(n+1)),cv(hp,Si),t}finally{sg=!1}}}var DR=sa.ReactCurrentBatchConfig;function Kr(n,e){if(n&&n.defaultProps){e=Jt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Oh=no(null),kh=null,Za=null,Gh=null;function fv(){Gh=Za=kh=null}function dv(n){var e=Oh.current;zt(Oh),n.type._context._currentValue=e}function yS(n,e){for(;n!==null;){var t=n.alternate;if((n.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else n.childLanes|=e,t!==null&&(t.childLanes|=e);n=n.return}}function ul(n,e){kh=n,Gh=Za=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(Yr=!0),n.firstContext=null)}function Pr(n,e){if(Gh!==n&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Gh=n,e=1073741823),e={context:n,observedBits:e,next:null},Za===null){if(kh===null)throw Error(Me(308));Za=e,kh.dependencies={lanes:0,firstContext:e,responders:null}}else Za=Za.next=e;return n._currentValue}var Ms=!1;function hv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function vS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Is(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ds(n,e){if(n=n.updateQueue,n!==null){n=n.shared;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}}function JM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Rc(n,e,t,r){var i=n.updateQueue;Ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,f=u.next;u.next=null,o===null?s=f:o.next=f,o=u;var h=n.alternate;if(h!==null){h=h.updateQueue;var p=h.lastBaseUpdate;p!==o&&(p===null?h.firstBaseUpdate=f:p.next=f,h.lastBaseUpdate=u)}}if(s!==null){p=i.baseState,o=0,h=f=u=null;do{a=s.lane;var d=s.eventTime;if((r&a)===a){h!==null&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=n,v=s;switch(a=e,d=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){p=m.call(d,p,a);break e}p=m;break e;case 3:m.flags=m.flags&-4097|64;case 0:if(m=v.payload,a=typeof m=="function"?m.call(d,p,a):m,a==null)break e;p=Jt({},p,a);break e;case 2:Ms=!0}}s.callback!==null&&(n.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else d={eventTime:d,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(f=h=d,u=p):h=h.next=d,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,Yc|=o,n.lanes=o,n.memoizedState=p}}function jM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Me(191,i));i.call(r)}}}var xS=new ip.Component().refs;function Uh(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Jt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var pp={isMounted:function(n){return(n=n._reactInternals)?oa(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=hr(),i=Fs(n),s=Is(r,i);s.payload=e,t!=null&&(s.callback=t),Ds(n,s),Ns(n,i,r)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=hr(),i=Fs(n),s=Is(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),Ds(n,s),Ns(n,i,r)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=hr(),r=Fs(n),i=Is(t,r);i.tag=2,e!=null&&(i.callback=e),Ds(n,i),Ns(n,r,t)}};function KM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tc(t,r)||!Tc(i,s):!0}function _S(n,e,t){var r=!1,i=Ws,s=e.contextType;return typeof s=="object"&&s!==null?s=Pr(s):(i=ir(e)?jo:Un.current,r=e.contextTypes,s=(r=r!=null)?ml(n,i):Ws),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pp,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function XM(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&pp.enqueueReplaceState(e,e.state,null)}function S0(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=xS,hv(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pr(s):(s=ir(e)?jo:Un.current,i.context=ml(n,s)),Rc(n,t,i,r),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Uh(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pp.enqueueReplaceState(i,i.state,null),Rc(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4)}var hd=Array.isArray;function Pu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Me(309));var r=t.stateNode}if(!r)throw Error(Me(147,n));var i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===xS&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof n!="string")throw Error(Me(284));if(!t._owner)throw Error(Me(290,n))}return n}function pd(n,e){if(n.type!=="textarea")throw Error(Me(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function MS(n){function e(y,_){if(n){var M=y.lastEffect;M!==null?(M.nextEffect=_,y.lastEffect=_):y.firstEffect=y.lastEffect=_,_.nextEffect=null,_.flags=8}}function t(y,_){if(!n)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=js(y,_),y.index=0,y.sibling=null,y}function s(y,_,M){return y.index=M,n?(M=y.alternate,M!==null?(M=M.index,M<_?(y.flags=2,_):M):(y.flags=2,_)):_}function o(y){return n&&y.alternate===null&&(y.flags=2),y}function a(y,_,M,A){return _===null||_.tag!==6?(_=cg(M,y.mode,A),_.return=y,_):(_=i(_,M),_.return=y,_)}function u(y,_,M,A){return _!==null&&_.elementType===M.type?(A=i(_,M.props),A.ref=Pu(y,_,M),A.return=y,A):(A=_h(M.type,M.key,M.props,null,y.mode,A),A.ref=Pu(y,_,M),A.return=y,A)}function f(y,_,M,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==M.containerInfo||_.stateNode.implementation!==M.implementation?(_=fg(M,y.mode,A),_.return=y,_):(_=i(_,M.children||[]),_.return=y,_)}function h(y,_,M,A,S){return _===null||_.tag!==7?(_=hl(M,y.mode,A,S),_.return=y,_):(_=i(_,M),_.return=y,_)}function p(y,_,M){if(typeof _=="string"||typeof _=="number")return _=cg(""+_,y.mode,M),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yu:return M=_h(_.type,_.key,_.props,null,y.mode,M),M.ref=Pu(y,null,_),M.return=y,M;case Po:return _=fg(_,y.mode,M),_.return=y,_}if(hd(_)||Tu(_))return _=hl(_,y.mode,M,null),_.return=y,_;pd(y,_)}return null}function d(y,_,M,A){var S=_!==null?_.key:null;if(typeof M=="string"||typeof M=="number")return S!==null?null:a(y,_,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Yu:return M.key===S?M.type===ws?h(y,_,M.props.children,A,S):u(y,_,M,A):null;case Po:return M.key===S?f(y,_,M,A):null}if(hd(M)||Tu(M))return S!==null?null:h(y,_,M,A,null);pd(y,M)}return null}function m(y,_,M,A,S){if(typeof A=="string"||typeof A=="number")return y=y.get(M)||null,a(_,y,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Yu:return y=y.get(A.key===null?M:A.key)||null,A.type===ws?h(_,y,A.props.children,S,A.key):u(_,y,A,S);case Po:return y=y.get(A.key===null?M:A.key)||null,f(_,y,A,S)}if(hd(A)||Tu(A))return y=y.get(M)||null,h(_,y,A,S,null);pd(_,A)}return null}function v(y,_,M,A){for(var S=null,T=null,C=_,B=_=0,L=null;C!==null&&B<M.length;B++){C.index>B?(L=C,C=null):L=C.sibling;var F=d(y,C,M[B],A);if(F===null){C===null&&(C=L);break}n&&C&&F.alternate===null&&e(y,C),_=s(F,_,B),T===null?S=F:T.sibling=F,T=F,C=L}if(B===M.length)return t(y,C),S;if(C===null){for(;B<M.length;B++)C=p(y,M[B],A),C!==null&&(_=s(C,_,B),T===null?S=C:T.sibling=C,T=C);return S}for(C=r(y,C);B<M.length;B++)L=m(C,y,B,M[B],A),L!==null&&(n&&L.alternate!==null&&C.delete(L.key===null?B:L.key),_=s(L,_,B),T===null?S=L:T.sibling=L,T=L);return n&&C.forEach(function(G){return e(y,G)}),S}function x(y,_,M,A){var S=Tu(M);if(typeof S!="function")throw Error(Me(150));if(M=S.call(M),M==null)throw Error(Me(151));for(var T=S=null,C=_,B=_=0,L=null,F=M.next();C!==null&&!F.done;B++,F=M.next()){C.index>B?(L=C,C=null):L=C.sibling;var G=d(y,C,F.value,A);if(G===null){C===null&&(C=L);break}n&&C&&G.alternate===null&&e(y,C),_=s(G,_,B),T===null?S=G:T.sibling=G,T=G,C=L}if(F.done)return t(y,C),S;if(C===null){for(;!F.done;B++,F=M.next())F=p(y,F.value,A),F!==null&&(_=s(F,_,B),T===null?S=F:T.sibling=F,T=F);return S}for(C=r(y,C);!F.done;B++,F=M.next())F=m(C,y,B,F.value,A),F!==null&&(n&&F.alternate!==null&&C.delete(F.key===null?B:F.key),_=s(F,_,B),T===null?S=F:T.sibling=F,T=F);return n&&C.forEach(function(b){return e(y,b)}),S}return function(y,_,M,A){var S=typeof M=="object"&&M!==null&&M.type===ws&&M.key===null;S&&(M=M.props.children);var T=typeof M=="object"&&M!==null;if(T)switch(M.$$typeof){case Yu:e:{for(T=M.key,S=_;S!==null;){if(S.key===T){switch(S.tag){case 7:if(M.type===ws){t(y,S.sibling),_=i(S,M.props.children),_.return=y,y=_;break e}break;default:if(S.elementType===M.type){t(y,S.sibling),_=i(S,M.props),_.ref=Pu(y,S,M),_.return=y,y=_;break e}}t(y,S);break}else e(y,S);S=S.sibling}M.type===ws?(_=hl(M.props.children,y.mode,A,M.key),_.return=y,y=_):(A=_h(M.type,M.key,M.props,null,y.mode,A),A.ref=Pu(y,_,M),A.return=y,y=A)}return o(y);case Po:e:{for(S=M.key;_!==null;){if(_.key===S)if(_.tag===4&&_.stateNode.containerInfo===M.containerInfo&&_.stateNode.implementation===M.implementation){t(y,_.sibling),_=i(_,M.children||[]),_.return=y,y=_;break e}else{t(y,_);break}else e(y,_);_=_.sibling}_=fg(M,y.mode,A),_.return=y,y=_}return o(y)}if(typeof M=="string"||typeof M=="number")return M=""+M,_!==null&&_.tag===6?(t(y,_.sibling),_=i(_,M),_.return=y,y=_):(t(y,_),_=cg(M,y.mode,A),_.return=y,y=_),o(y);if(hd(M))return v(y,_,M,A);if(Tu(M))return x(y,_,M,A);if(T&&pd(y,M),typeof M=="undefined"&&!S)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Me(152,il(y.type)||"Component"))}return t(y,_)}}var Hh=MS(!0),AS=MS(!1),Qc={},mi=no(Qc),Bc=no(Qc),Lc=no(Qc);function Fo(n){if(n===Qc)throw Error(Me(174));return n}function E0(n,e){switch(en(Lc,e),en(Bc,n),en(mi,Qc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:u0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=u0(e,n)}zt(mi),en(mi,e)}function yl(){zt(mi),zt(Bc),zt(Lc)}function QM(n){Fo(Lc.current);var e=Fo(mi.current),t=u0(e,n.type);e!==t&&(en(Bc,n),en(mi,t))}function pv(n){Bc.current===n&&(zt(mi),zt(Bc))}var $t=no(0);function zh(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vi=null,Ts=null,gi=!1;function wS(n,e){var t=Rr(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=n,t.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t}function YM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function T0(n){if(gi){var e=Ts;if(e){var t=e;if(!YM(n,e)){if(e=ll(t.nextSibling),!e||!YM(n,e)){n.flags=n.flags&-1025|2,gi=!1,Vi=n;return}wS(Vi,t)}Vi=n,Ts=ll(e.firstChild)}else n.flags=n.flags&-1025|2,gi=!1,Vi=n}}function qM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Vi=n}function md(n){if(n!==Vi)return!1;if(!gi)return qM(n),gi=!0,!1;var e=n.type;if(n.tag!==5||e!=="head"&&e!=="body"&&!_0(e,n.memoizedProps))for(e=Ts;e;)wS(n,e),e=ll(e.nextSibling);if(qM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Me(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ts=ll(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ts=null}}else Ts=Vi?ll(n.stateNode.nextSibling):null;return!0}function og(){Ts=Vi=null,gi=!1}var cl=[];function mv(){for(var n=0;n<cl.length;n++)cl[n]._workInProgressVersionPrimary=null;cl.length=0}var cc=sa.ReactCurrentDispatcher,Lr=sa.ReactCurrentBatchConfig,Pc=0,on=null,Nn=null,Cn=null,Vh=!1,fc=!1;function $n(){throw Error(Me(321))}function gv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!br(n[t],e[t]))return!1;return!0}function yv(n,e,t,r,i,s){if(Pc=s,on=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cc.current=n===null||n.memoizedState===null?NR:OR,n=t(r,i),fc){s=0;do{if(fc=!1,!(25>s))throw Error(Me(301));s+=1,Cn=Nn=null,e.updateQueue=null,cc.current=kR,n=t(r,i)}while(fc)}if(cc.current=Kh,e=Nn!==null&&Nn.next!==null,Pc=0,Cn=Nn=on=null,Vh=!1,e)throw Error(Me(300));return n}function No(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?on.memoizedState=Cn=n:Cn=Cn.next=n,Cn}function aa(){if(Nn===null){var n=on.alternate;n=n!==null?n.memoizedState:null}else n=Nn.next;var e=Cn===null?on.memoizedState:Cn.next;if(e!==null)Cn=e,Nn=n;else{if(n===null)throw Error(Me(310));Nn=n,n={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Cn===null?on.memoizedState=Cn=n:Cn=Cn.next=n}return Cn}function di(n,e){return typeof e=="function"?e(n):e}function Iu(n){var e=aa(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var r=Nn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=o=s=null,u=i;do{var f=u.lane;if((Pc&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===n?u.eagerState:n(r,u.action);else{var h={lane:f,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};a===null?(o=a=h,s=r):a=a.next=h,on.lanes|=f,Yc|=f}u=u.next}while(u!==null&&u!==i);a===null?s=r:a.next=o,br(r,e.memoizedState)||(Yr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function Du(n){var e=aa(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);br(s,e.memoizedState)||(Yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function ZM(n,e,t){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?n=i===r:(n=n.mutableReadLanes,(n=(Pc&n)===n)&&(e._workInProgressVersionPrimary=r,cl.push(e))),n)return t(e._source);throw cl.push(e),Error(Me(350))}function SS(n,e,t,r){var i=Jn;if(i===null)throw Error(Me(349));var s=e._getVersion,o=s(e._source),a=cc.current,u=a.useState(function(){return ZM(i,e,t)}),f=u[1],h=u[0];u=Cn;var p=n.memoizedState,d=p.refs,m=d.getSnapshot,v=p.source;p=p.subscribe;var x=on;return n.memoizedState={refs:d,source:e,subscribe:r},a.useEffect(function(){d.getSnapshot=t,d.setSnapshot=f;var y=s(e._source);if(!br(o,y)){y=t(e._source),br(h,y)||(f(y),y=Fs(x),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var _=i.entanglements,M=y;0<M;){var A=31-Vs(M),S=1<<A;_[A]|=y,M&=~S}}},[t,e,r]),a.useEffect(function(){return r(e._source,function(){var y=d.getSnapshot,_=d.setSnapshot;try{_(y(e._source));var M=Fs(x);i.mutableReadLanes|=M&i.pendingLanes}catch(A){_(function(){throw A})}})},[e,r]),br(m,t)&&br(v,e)&&br(p,r)||(n={pending:null,dispatch:null,lastRenderedReducer:di,lastRenderedState:h},n.dispatch=f=_v.bind(null,on,n),u.queue=n,u.baseQueue=null,h=ZM(i,e,t),u.memoizedState=u.baseState=h),h}function ES(n,e,t){var r=aa();return SS(r,n,e,t)}function Fu(n){var e=No();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n=e.queue={pending:null,dispatch:null,lastRenderedReducer:di,lastRenderedState:n},n=n.dispatch=_v.bind(null,on,n),[e.memoizedState,n]}function Wh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=on.updateQueue,e===null?(e={lastEffect:null},on.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function $M(n){var e=No();return n={current:n},e.memoizedState=n}function Jh(){return aa().memoizedState}function C0(n,e,t,r){var i=No();on.flags|=n,i.memoizedState=Wh(1|e,t,void 0,r===void 0?null:r)}function vv(n,e,t,r){var i=aa();r=r===void 0?null:r;var s=void 0;if(Nn!==null){var o=Nn.memoizedState;if(s=o.destroy,r!==null&&gv(r,o.deps)){Wh(e,t,s,r);return}}on.flags|=n,i.memoizedState=Wh(1|e,t,s,r)}function eA(n,e){return C0(516,4,n,e)}function jh(n,e){return vv(516,4,n,e)}function TS(n,e){return vv(4,2,n,e)}function CS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function bS(n,e,t){return t=t!=null?t.concat([n]):null,vv(4,2,CS.bind(null,e,n),t)}function xv(){}function RS(n,e){var t=aa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&gv(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function BS(n,e){var t=aa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&gv(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function FR(n,e){var t=gl();Ko(98>t?98:t,function(){n(!0)}),Ko(97<t?97:t,function(){var r=Lr.transition;Lr.transition=1;try{n(!1),e()}finally{Lr.transition=r}})}function _v(n,e,t){var r=hr(),i=Fs(n),s={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=n.alternate,n===on||o!==null&&o===on)fc=Vh=!0;else{if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,t);if(s.eagerReducer=o,s.eagerState=u,br(u,a))return}catch{}finally{}Ns(n,i,r)}}var Kh={readContext:Pr,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useOpaqueIdentifier:$n,unstable_isNewReconciler:!1},NR={readContext:Pr,useCallback:function(n,e){return No().memoizedState=[n,e===void 0?null:e],n},useContext:Pr,useEffect:eA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,C0(4,2,CS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return C0(4,2,n,e)},useMemo:function(n,e){var t=No();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=No();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n=r.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},n=n.dispatch=_v.bind(null,on,n),[r.memoizedState,n]},useRef:$M,useState:Fu,useDebugValue:xv,useDeferredValue:function(n){var e=Fu(n),t=e[0],r=e[1];return eA(function(){var i=Lr.transition;Lr.transition=1;try{r(n)}finally{Lr.transition=i}},[n]),t},useTransition:function(){var n=Fu(!1),e=n[0];return n=FR.bind(null,n[1]),$M(n),[n,e]},useMutableSource:function(n,e,t){var r=No();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:n,subscribe:t},SS(r,n,e,t)},useOpaqueIdentifier:function(){if(gi){var n=!1,e=RR(function(){throw n||(n=!0,t("r:"+(rg++).toString(36))),Error(Me(355))}),t=Fu(e)[1];return(on.mode&2)===0&&(on.flags|=516,Wh(5,function(){t("r:"+(rg++).toString(36))},void 0,null)),e}return e="r:"+(rg++).toString(36),Fu(e),e},unstable_isNewReconciler:!1},OR={readContext:Pr,useCallback:RS,useContext:Pr,useEffect:jh,useImperativeHandle:bS,useLayoutEffect:TS,useMemo:BS,useReducer:Iu,useRef:Jh,useState:function(){return Iu(di)},useDebugValue:xv,useDeferredValue:function(n){var e=Iu(di),t=e[0],r=e[1];return jh(function(){var i=Lr.transition;Lr.transition=1;try{r(n)}finally{Lr.transition=i}},[n]),t},useTransition:function(){var n=Iu(di)[0];return[Jh().current,n]},useMutableSource:ES,useOpaqueIdentifier:function(){return Iu(di)[0]},unstable_isNewReconciler:!1},kR={readContext:Pr,useCallback:RS,useContext:Pr,useEffect:jh,useImperativeHandle:bS,useLayoutEffect:TS,useMemo:BS,useReducer:Du,useRef:Jh,useState:function(){return Du(di)},useDebugValue:xv,useDeferredValue:function(n){var e=Du(di),t=e[0],r=e[1];return jh(function(){var i=Lr.transition;Lr.transition=1;try{r(n)}finally{Lr.transition=i}},[n]),t},useTransition:function(){var n=Du(di)[0];return[Jh().current,n]},useMutableSource:ES,useOpaqueIdentifier:function(){return Du(di)[0]},unstable_isNewReconciler:!1},GR=sa.ReactCurrentOwner,Yr=!1;function er(n,e,t,r){e.child=n===null?AS(e,null,t,r):Hh(e,n.child,t,r)}function tA(n,e,t,r,i){t=t.render;var s=e.ref;return ul(e,i),r=yv(n,e,t,r,s,i),n!==null&&!Yr?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,Wi(n,e,i)):(e.flags|=1,er(n,e,r,i),e.child)}function nA(n,e,t,r,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!Tv(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,LS(n,e,o,r,i,s)):(n=_h(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}return o=n.child,(i&s)===0&&(i=o.memoizedProps,t=t.compare,t=t!==null?t:Tc,t(i,r)&&n.ref===e.ref)?Wi(n,e,s):(e.flags|=1,n=js(o,r),n.ref=e.ref,n.return=e,e.child=n)}function LS(n,e,t,r,i,s){if(n!==null&&Tc(n.memoizedProps,r)&&n.ref===e.ref)if(Yr=!1,(s&i)!==0)(n.flags&16384)!==0&&(Yr=!0);else return e.lanes=n.lanes,Wi(n,e,s);return b0(n,e,t,r,s)}function ag(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},yd(e,t);else if((t&1073741824)!==0)e.memoizedState={baseLanes:0},yd(e,s!==null?s.baseLanes:t);else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n},yd(e,n),null;else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,yd(e,r);return er(n,e,i,t),e.child}function PS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=128)}function b0(n,e,t,r,i){var s=ir(t)?jo:Un.current;return s=ml(e,s),ul(e,i),t=yv(n,e,t,r,s,i),n!==null&&!Yr?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,Wi(n,e,i)):(e.flags|=1,er(n,e,t,i),e.child)}function rA(n,e,t,r,i){if(ir(t)){var s=!0;mh(e)}else s=!1;if(ul(e,i),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),_S(e,t,r),S0(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Pr(f):(f=ir(t)?jo:Un.current,f=ml(e,f));var h=t.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==f)&&XM(e,o,r,f),Ms=!1;var d=e.memoizedState;o.state=d,Rc(e,r,o,i),u=e.memoizedState,a!==r||d!==u||rr.current||Ms?(typeof h=="function"&&(Uh(e,t,h,r),u=e.memoizedState),(a=Ms||KM(e,t,a,r,d,u,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,vS(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:Kr(e.type,a),o.props=f,p=e.pendingProps,d=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Pr(u):(u=ir(t)?jo:Un.current,u=ml(e,u));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||d!==u)&&XM(e,o,r,u),Ms=!1,d=e.memoizedState,o.state=d,Rc(e,r,o,i);var v=e.memoizedState;a!==p||d!==v||rr.current||Ms?(typeof m=="function"&&(Uh(e,t,m,r),v=e.memoizedState),(f=Ms||KM(e,t,f,r,d,v,u))?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),r=!1)}return R0(n,e,t,r,s,i)}function R0(n,e,t,r,i,s){PS(n,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&zM(e,t,!1),Wi(n,e,s);r=e.stateNode,GR.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Hh(e,n.child,null,s),e.child=Hh(e,null,a,s)):er(n,e,a,s),e.memoizedState=r.state,i&&zM(e,t,!0),e.child}function iA(n){var e=n.stateNode;e.pendingContext?HM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&HM(n,e.context,!1),E0(n,e.containerInfo)}var gd={dehydrated:null,retryLane:0};function sA(n,e,t){var r=e.pendingProps,i=$t.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):n!==null&&n.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),en($t,i&1),n===null?(r.fallback!==void 0&&T0(e),n=r.children,i=r.fallback,s?(n=oA(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=gd,n):typeof r.unstable_expectedLoadTime=="number"?(n=oA(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=gd,e.lanes=33554432,n):(t=Cv({mode:"visible",children:n},e.mode,t,null),t.return=e,e.child=t)):n.memoizedState!==null?s?(r=lA(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=gd,r):(t=aA(n,e,r.children,t),e.memoizedState=null,t):s?(r=lA(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=gd,r):(t=aA(n,e,r.children,t),e.memoizedState=null,t)}function oA(n,e,t,r){var i=n.mode,s=n.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=Cv(e,i,0,null),t=hl(t,i,r,null),s.return=n,t.return=n,s.sibling=t,n.child=s,t}function aA(n,e,t,r){var i=n.child;return n=i.sibling,t=js(i,{mode:"visible",children:t}),(e.mode&2)===0&&(t.lanes=r),t.return=e,t.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,e.firstEffect=e.lastEffect=n),e.child=t}function lA(n,e,t,r,i){var s=e.mode,o=n.child;n=o.sibling;var a={mode:"hidden",children:t};return(s&2)===0&&e.child!==o?(t=e.child,t.childLanes=0,t.pendingProps=a,o=t.lastEffect,o!==null?(e.firstEffect=t.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):t=js(o,a),n!==null?r=js(n,r):(r=hl(r,s,i,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function uA(n,e){n.lanes|=e;var t=n.alternate;t!==null&&(t.lanes|=e),yS(n.return,e)}function lg(n,e,t,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i,o.lastEffect=s)}function cA(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(er(n,e,r.children,t),r=$t.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(n!==null&&(n.flags&64)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uA(n,t);else if(n.tag===19)uA(n,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(en($t,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&zh(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),lg(e,!1,i,t,s,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&zh(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}lg(e,!0,t,null,s,e.lastEffect);break;case"together":lg(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Wi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Yc|=e.lanes,(t&e.childLanes)!==0){if(n!==null&&e.child!==n.child)throw Error(Me(153));if(e.child!==null){for(n=e.child,t=js(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=js(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var IS,B0,DS,FS;IS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};B0=function(){};DS=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Fo(mi.current);var s=null;switch(t){case"input":i=r0(n,i),r=r0(n,r),s=[];break;case"option":i=o0(n,i),r=o0(n,r),s=[];break;case"select":i=Jt({},i,{value:void 0}),r=Jt({},r,{value:void 0}),s=[];break;case"textarea":i=a0(n,i),r=a0(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Dh)}c0(t,r);var o;t=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(xc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var u=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==a&&(u!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(f,t)),t=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(xc.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Ut("scroll",n),s||a===u||(s=[])):typeof u=="object"&&u!==null&&u.$$typeof===Ky?u.toString():(s=s||[]).push(f,u))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};FS=function(n,e,t,r){t!==r&&(e.flags|=4)};function Nu(n,e){if(!gi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function UR(n,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ir(e.type)&&Nh(),null;case 3:return yl(),zt(rr),zt(Un),mv(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(md(e)?e.flags|=4:r.hydrate||(e.flags|=256)),B0(e),null;case 5:pv(e);var i=Fo(Lc.current);if(t=e.type,n!==null&&e.stateNode!=null)DS(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(Me(166));return null}if(n=Fo(mi.current),md(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Es]=e,r[Fh]=s,t){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(n=0;n<Zu.length;n++)Ut(Zu[n],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":cM(r,s),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ut("invalid",r);break;case"textarea":dM(r,s),Ut("invalid",r)}c0(t,s),n=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(n=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(n=["children",""+i]):xc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ut("scroll",r));switch(t){case"input":ud(r),fM(r,s,!0);break;case"textarea":ud(r),hM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Dh)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,n===l0.html&&(n=b1(t)),n===l0.html?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Es]=e,n[Fh]=r,IS(n,e,!1,!1),e.stateNode=n,o=f0(t,r),t){case"dialog":Ut("cancel",n),Ut("close",n),i=r;break;case"iframe":case"object":case"embed":Ut("load",n),i=r;break;case"video":case"audio":for(i=0;i<Zu.length;i++)Ut(Zu[i],n);i=r;break;case"source":Ut("error",n),i=r;break;case"img":case"image":case"link":Ut("error",n),Ut("load",n),i=r;break;case"details":Ut("toggle",n),i=r;break;case"input":cM(n,r),i=r0(n,r),Ut("invalid",n);break;case"option":i=o0(n,r);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Jt({},r,{value:void 0}),Ut("invalid",n);break;case"textarea":dM(n,r),i=a0(n,r),Ut("invalid",n);break;default:i=r}c0(t,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?L1(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&R1(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&_c(n,u):typeof u=="number"&&_c(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ut("scroll",n):u!=null&&Hy(n,s,u,o))}switch(t){case"input":ud(n),fM(n,r,!1);break;case"textarea":ud(n),hM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+zs(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?sl(n,!!r.multiple,s,!1):r.defaultValue!=null&&sl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Dh)}lS(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(n&&e.stateNode!=null)FS(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Me(166));t=Fo(Lc.current),Fo(mi.current),md(e)?(r=e.stateNode,t=e.memoizedProps,r[Es]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Es]=e,e.stateNode=r)}return null;case 13:return zt($t),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=t,e):(r=r!==null,t=!1,n===null?e.memoizedProps.fallback!==void 0&&md(e):t=n.memoizedState!==null,r&&!t&&(e.mode&2)!==0&&(n===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||($t.current&1)!==0?Rn===0&&(Rn=3):((Rn===0||Rn===3)&&(Rn=4),Jn===null||(Yc&134217727)===0&&(Jl&134217727)===0||fl(Jn,Gn))),(r||t)&&(e.flags|=4),null);case 4:return yl(),B0(e),n===null&&sS(e.stateNode.containerInfo),null;case 10:return dv(e),null;case 17:return ir(e.type)&&Nh(),null;case 19:if(zt($t),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)Nu(r,!1);else{if(Rn!==0||n!==null&&(n.flags&64)!==0)for(n=e.child;n!==null;){if(o=zh(n),o!==null){for(e.flags|=64,Nu(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return en($t,$t.current&1|2),e.child}n=n.sibling}r.tail!==null&&kn()>N0&&(e.flags|=64,s=!0,Nu(r,!1),e.lanes=33554432)}else{if(!s)if(n=zh(o),n!==null){if(e.flags|=64,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Nu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!gi)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*kn()-r.renderingStartTime>N0&&t!==1073741824&&(e.flags|=64,s=!0,Nu(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=kn(),t.sibling=null,e=$t.current,en($t,s?e&1|2:e&1),t):null;case 23:case 24:return Ev(),n!==null&&n.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Me(156,e.tag))}function HR(n){switch(n.tag){case 1:ir(n.type)&&Nh();var e=n.flags;return e&4096?(n.flags=e&-4097|64,n):null;case 3:if(yl(),zt(rr),zt(Un),mv(),e=n.flags,(e&64)!==0)throw Error(Me(285));return n.flags=e&-4097|64,n;case 5:return pv(n),null;case 13:return zt($t),e=n.flags,e&4096?(n.flags=e&-4097|64,n):null;case 19:return zt($t),null;case 4:return yl(),null;case 10:return dv(n),null;case 23:case 24:return Ev(),null;default:return null}}function Mv(n,e){try{var t="",r=e;do t+=Mb(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i}}function L0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var zR=typeof WeakMap=="function"?WeakMap:Map;function NS(n,e,t){t=Is(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Qh||(Qh=!0,O0=r),L0(n,e)},t}function OS(n,e,t){t=Is(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return L0(n,e),r(i)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(hi===null?hi=new Set([this]):hi.add(this),L0(n,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}var VR=typeof WeakSet=="function"?WeakSet:Set;function fA(n){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Os(n,t)}else e.current=null}function WR(n,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&n!==null){var t=n.memoizedProps,r=n.memoizedState;n=e.stateNode,e=n.getSnapshotBeforeUpdate(e.elementType===e.type?t:Kr(e.type,t),r),n.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&lv(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Me(163))}function JR(n,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{if((n.tag&3)===3){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{var i=n;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(jS(t,n),$R(t,n)),n=r}while(n!==e)}return;case 1:n=t.stateNode,t.flags&4&&(e===null?n.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:Kr(t.type,e.memoizedProps),n.componentDidUpdate(r,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&jM(t,e,n);return;case 3:if(e=t.updateQueue,e!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jM(t,e,n)}return;case 5:n=t.stateNode,e===null&&t.flags&4&&lS(t.type,t.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&H1(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Me(163))}function dA(n,e){for(var t=n;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=B1("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function hA(n,e){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(uv,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var t=n=n.next;do{var r=t,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)jS(e,t);else{r=e;try{i()}catch(s){Os(r,s)}}t=t.next}while(t!==n)}break;case 1:if(fA(e),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){Os(e,s)}break;case 5:fA(e);break;case 4:kS(n,e)}}function pA(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function mA(n){return n.tag===5||n.tag===3||n.tag===4}function gA(n){e:{for(var e=n.return;e!==null;){if(mA(e))break e;e=e.return}throw Error(Me(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(Me(161))}t.flags&16&&(_c(e,""),t.flags&=-17);e:t:for(t=n;;){for(;t.sibling===null;){if(t.return===null||mA(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?P0(n,t,e):I0(n,t,e)}function P0(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Dh));else if(r!==4&&(n=n.child,n!==null))for(P0(n,e,t),n=n.sibling;n!==null;)P0(n,e,t),n=n.sibling}function I0(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(I0(n,e,t),n=n.sibling;n!==null;)I0(n,e,t),n=n.sibling}function kS(n,e){for(var t=e,r=!1,i,s;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(Me(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var o=n,a=t,u=a;;)if(hA(o,u),u.child!==null&&u.tag!==4)u.child.return=u,u=u.child;else{if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}s?(o=i,a=t.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,s=!0,t.child.return=t,t=t.child;continue}}else if(hA(n,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function ug(n,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)===3&&(n=r.destroy,r.destroy=void 0,n!==void 0&&n()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var i=n!==null?n.memoizedProps:r;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(t[Fh]=r,n==="input"&&r.type==="radio"&&r.name!=null&&T1(t,r),f0(n,i),e=f0(n,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?L1(t,a):o==="dangerouslySetInnerHTML"?R1(t,a):o==="children"?_c(t,a):Hy(t,o,a,e)}switch(n){case"input":i0(t,r);break;case"textarea":C1(t,r);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?sl(t,!!r.multiple,s,!1):n!==!!r.multiple&&(r.defaultValue!=null?sl(t,!!r.multiple,r.defaultValue,!0):sl(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Me(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,H1(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Sv=kn(),dA(e.child,!0)),yA(e);return;case 19:yA(e);return;case 17:return;case 23:case 24:dA(e,e.memoizedState!==null);return}throw Error(Me(163))}function yA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new VR),e.forEach(function(r){var i=nB.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function jR(n,e){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var KR=Math.ceil,Xh=sa.ReactCurrentDispatcher,Av=sa.ReactCurrentOwner,it=0,Jn=null,mn=null,Gn=0,Xo=0,D0=no(0),Rn=0,mp=null,Wl=0,Yc=0,Jl=0,wv=0,F0=null,Sv=0,N0=1/0;function jl(){N0=kn()+500}var ke=null,Qh=!1,O0=null,hi=null,Js=!1,dc=null,$u=90,k0=[],G0=[],Ji=null,hc=0,U0=null,yh=-1,Hi=0,vh=0,pc=null,xh=!1;function hr(){return(it&48)!==0?kn():yh!==-1?yh:yh=kn()}function Fs(n){if(n=n.mode,(n&2)===0)return 1;if((n&4)===0)return gl()===99?1:2;if(Hi===0&&(Hi=Wl),DR.transition!==0){vh!==0&&(vh=F0!==null?F0.pendingLanes:0),n=Hi;var e=4186112&~vh;return e&=-e,e===0&&(n=4186112&~n,e=n&-n,e===0&&(e=8192)),e}return n=gl(),(it&4)!==0&&n===98?n=Ph(12,Hi):(n=Ob(n),n=Ph(n,Hi)),n}function Ns(n,e,t){if(50<hc)throw hc=0,U0=null,Error(Me(185));if(n=gp(n,e),n===null)return null;lp(n,e,t),n===Jn&&(Jl|=e,Rn===4&&fl(n,Gn));var r=gl();e===1?(it&8)!==0&&(it&48)===0?H0(n):(Ir(n,t),it===0&&(jl(),Si())):((it&4)===0||r!==98&&r!==99||(Ji===null?Ji=new Set([n]):Ji.add(n)),Ir(n,t)),F0=n}function gp(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function Ir(n,e){for(var t=n.callbackNode,r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-Vs(o),u=1<<a,f=s[a];if(f===-1){if((u&r)===0||(u&i)!==0){f=e,Wa(u);var h=Ot;s[a]=10<=h?f+250:6<=h?f+5e3:-1}}else f<=e&&(n.expiredLanes|=u);o&=~u}if(r=Sc(n,n===Jn?Gn:0),e=Ot,r===0)t!==null&&(t!==ig&&A0(t),n.callbackNode=null,n.callbackPriority=0);else{if(t!==null){if(n.callbackPriority===e)return;t!==ig&&A0(t)}e===15?(t=H0.bind(null,n),Ui===null?(Ui=[t],gh=cv(hp,gS)):Ui.push(t),t=ig):e===14?t=bc(99,H0.bind(null,n)):(t=kb(e),t=bc(t,GS.bind(null,n))),n.callbackPriority=e,n.callbackNode=t}}function GS(n){if(yh=-1,vh=Hi=0,(it&48)!==0)throw Error(Me(327));var e=n.callbackNode;if(ro()&&n.callbackNode!==e)return null;var t=Sc(n,n===Jn?Gn:0);if(t===0)return null;var r=t,i=it;it|=16;var s=VS();(Jn!==n||Gn!==r)&&(jl(),dl(n,r));do try{YR();break}catch(a){zS(n,a)}while(1);if(fv(),Xh.current=s,it=i,mn!==null?r=0:(Jn=null,Gn=0,r=Rn),(Wl&Jl)!==0)dl(n,0);else if(r!==0){if(r===2&&(it|=64,n.hydrate&&(n.hydrate=!1,lv(n.containerInfo)),t=X1(n),t!==0&&(r=ec(n,t))),r===1)throw e=mp,dl(n,0),fl(n,t),Ir(n,kn()),e;switch(n.finishedWork=n.current.alternate,n.finishedLanes=t,r){case 0:case 1:throw Error(Me(345));case 2:To(n);break;case 3:if(fl(n,t),(t&62914560)===t&&(r=Sv+500-kn(),10<r)){if(Sc(n,0)!==0)break;if(i=n.suspendedLanes,(i&t)!==t){hr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=kM(To.bind(null,n),r);break}To(n);break;case 4:if(fl(n,t),(t&4186112)===t)break;for(r=n.eventTimes,i=-1;0<t;){var o=31-Vs(t);s=1<<o,o=r[o],o>i&&(i=o),t&=~s}if(t=i,t=kn()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*KR(t/1960))-t,10<t){n.timeoutHandle=kM(To.bind(null,n),t);break}To(n);break;case 5:To(n);break;default:throw Error(Me(329))}}return Ir(n,kn()),n.callbackNode===e?GS.bind(null,n):null}function fl(n,e){for(e&=~wv,e&=~Jl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vs(e),r=1<<t;n[t]=-1,e&=~r}}function H0(n){if((it&48)!==0)throw Error(Me(327));if(ro(),n===Jn&&(n.expiredLanes&Gn)!==0){var e=Gn,t=ec(n,e);(Wl&Jl)!==0&&(e=Sc(n,e),t=ec(n,e))}else e=Sc(n,0),t=ec(n,e);if(n.tag!==0&&t===2&&(it|=64,n.hydrate&&(n.hydrate=!1,lv(n.containerInfo)),e=X1(n),e!==0&&(t=ec(n,e))),t===1)throw t=mp,dl(n,0),fl(n,e),Ir(n,kn()),t;return n.finishedWork=n.current.alternate,n.finishedLanes=e,To(n),Ir(n,kn()),null}function XR(){if(Ji!==null){var n=Ji;Ji=null,n.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Ir(e,kn())})}Si()}function US(n,e){var t=it;it|=1;try{return n(e)}finally{it=t,it===0&&(jl(),Si())}}function HS(n,e){var t=it;it&=-2,it|=8;try{return n(e)}finally{it=t,it===0&&(jl(),Si())}}function yd(n,e){en(D0,Xo),Xo|=e,Wl|=e}function Ev(){Xo=D0.current,zt(D0)}function dl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bR(t)),mn!==null)for(t=mn.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nh();break;case 3:yl(),zt(rr),zt(Un),mv();break;case 5:pv(r);break;case 4:yl();break;case 13:zt($t);break;case 19:zt($t);break;case 10:dv(r);break;case 23:case 24:Ev()}t=t.return}Jn=n,mn=js(n.current,null),Gn=Xo=Wl=e,Rn=0,mp=null,wv=Jl=Yc=0}function zS(n,e){do{var t=mn;try{if(fv(),cc.current=Kh,Vh){for(var r=on.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vh=!1}if(Pc=0,Cn=Nn=on=null,fc=!1,Av.current=null,t===null||t.return===null){Rn=1,mp=e,mn=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Gn,a.flags|=2048,a.firstEffect=a.lastEffect=null,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u;if((a.mode&2)===0){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var p=($t.current&1)!==0,d=o;do{var m;if(m=d.tag===13){var v=d.memoizedState;if(v!==null)m=v.dehydrated!==null;else{var x=d.memoizedProps;m=x.fallback===void 0?!1:x.unstable_avoidThisFallback!==!0?!0:!p}}if(m){var y=d.updateQueue;if(y===null){var _=new Set;_.add(f),d.updateQueue=_}else y.add(f);if((d.mode&2)===0){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var M=Is(-1,1);M.tag=2,Ds(a,M)}a.lanes|=1;break e}u=void 0,a=e;var A=s.pingCache;if(A===null?(A=s.pingCache=new zR,u=new Set,A.set(f,u)):(u=A.get(f),u===void 0&&(u=new Set,A.set(f,u))),!u.has(a)){u.add(a);var S=tB.bind(null,s,f,a);f.then(S,S)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);u=Error((il(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Rn!==5&&(Rn=2),u=Mv(u,a),d=o;do{switch(d.tag){case 3:s=u,d.flags|=4096,e&=-e,d.lanes|=e;var T=NS(d,s,e);JM(d,T);break e;case 1:s=u;var C=d.type,B=d.stateNode;if((d.flags&64)===0&&(typeof C.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(hi===null||!hi.has(B)))){d.flags|=4096,e&=-e,d.lanes|=e;var L=OS(d,s,e);JM(d,L);break e}}d=d.return}while(d!==null)}JS(t)}catch(F){e=F,mn===t&&t!==null&&(mn=t=t.return);continue}break}while(1)}function VS(){var n=Xh.current;return Xh.current=Kh,n===null?Kh:n}function ec(n,e){var t=it;it|=16;var r=VS();Jn===n&&Gn===e||dl(n,e);do try{QR();break}catch(i){zS(n,i)}while(1);if(fv(),it=t,Xh.current=r,mn!==null)throw Error(Me(261));return Jn=null,Gn=0,Rn}function QR(){for(;mn!==null;)WS(mn)}function YR(){for(;mn!==null&&!LR();)WS(mn)}function WS(n){var e=KS(n.alternate,n,Xo);n.memoizedProps=n.pendingProps,e===null?JS(n):mn=e,Av.current=null}function JS(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&2048)===0){if(t=UR(t,e,Xo),t!==null){mn=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(Xo&1073741824)!==0||(t.mode&4)===0){for(var r=0,i=t.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=r}n!==null&&(n.flags&2048)===0&&(n.firstEffect===null&&(n.firstEffect=e.firstEffect),e.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(t=HR(e),t!==null){t.flags&=2047,mn=t;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}if(e=e.sibling,e!==null){mn=e;return}mn=e=n}while(e!==null);Rn===0&&(Rn=5)}function To(n){var e=gl();return Ko(99,qR.bind(null,n,e)),null}function qR(n,e){do ro();while(dc!==null);if((it&48)!==0)throw Error(Me(327));var t=n.finishedWork;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Me(177));n.callbackNode=null;var r=t.lanes|t.childLanes,i=r,s=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;for(var o=n.eventTimes,a=n.expirationTimes;0<s;){var u=31-Vs(s),f=1<<u;i[u]=0,o[u]=-1,a[u]=-1,s&=~f}if(Ji!==null&&(r&24)===0&&Ji.has(n)&&Ji.delete(n),n===Jn&&(mn=Jn=null,Gn=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(i=it,it|=32,Av.current=null,tg=dh,o=LM(),y0(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(f=a.getSelection&&a.getSelection())&&f.rangeCount!==0){a=f.anchorNode,s=f.anchorOffset,u=f.focusNode,f=f.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var h=0,p=-1,d=-1,m=0,v=0,x=o,y=null;t:for(;;){for(var _;x!==a||s!==0&&x.nodeType!==3||(p=h+s),x!==u||f!==0&&x.nodeType!==3||(d=h+f),x.nodeType===3&&(h+=x.nodeValue.length),(_=x.firstChild)!==null;)y=x,x=_;for(;;){if(x===o)break t;if(y===a&&++m===s&&(p=h),y===u&&++v===f&&(d=h),(_=x.nextSibling)!==null)break;x=y,y=x.parentNode}x=_}a=p===-1||d===-1?null:{start:p,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;ng={focusedElem:o,selectionRange:a},dh=!1,pc=null,xh=!1,ke=r;do try{ZR()}catch(F){if(ke===null)throw Error(Me(330));Os(ke,F),ke=ke.nextEffect}while(ke!==null);pc=null,ke=r;do try{for(o=n;ke!==null;){var M=ke.flags;if(M&16&&_c(ke.stateNode,""),M&128){var A=ke.alternate;if(A!==null){var S=A.ref;S!==null&&(typeof S=="function"?S(null):S.current=null)}}switch(M&1038){case 2:gA(ke),ke.flags&=-3;break;case 6:gA(ke),ke.flags&=-3,ug(ke.alternate,ke);break;case 1024:ke.flags&=-1025;break;case 1028:ke.flags&=-1025,ug(ke.alternate,ke);break;case 4:ug(ke.alternate,ke);break;case 8:a=ke,kS(o,a);var T=a.alternate;pA(a),T!==null&&pA(T)}ke=ke.nextEffect}}catch(F){if(ke===null)throw Error(Me(330));Os(ke,F),ke=ke.nextEffect}while(ke!==null);if(S=ng,A=LM(),M=S.focusedElem,o=S.selectionRange,A!==M&&M&&M.ownerDocument&&nS(M.ownerDocument.documentElement,M)){for(o!==null&&y0(M)&&(A=o.start,S=o.end,S===void 0&&(S=A),"selectionStart"in M?(M.selectionStart=A,M.selectionEnd=Math.min(S,M.value.length)):(S=(A=M.ownerDocument||document)&&A.defaultView||window,S.getSelection&&(S=S.getSelection(),a=M.textContent.length,T=Math.min(o.start,a),o=o.end===void 0?T:Math.min(o.end,a),!S.extend&&T>o&&(a=o,o=T,T=a),a=BM(M,T),s=BM(M,o),a&&s&&(S.rangeCount!==1||S.anchorNode!==a.node||S.anchorOffset!==a.offset||S.focusNode!==s.node||S.focusOffset!==s.offset)&&(A=A.createRange(),A.setStart(a.node,a.offset),S.removeAllRanges(),T>o?(S.addRange(A),S.extend(s.node,s.offset)):(A.setEnd(s.node,s.offset),S.addRange(A)))))),A=[],S=M;S=S.parentNode;)S.nodeType===1&&A.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<A.length;M++)S=A[M],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}dh=!!tg,ng=tg=null,n.current=t,ke=r;do try{for(M=n;ke!==null;){var C=ke.flags;if(C&36&&JR(M,ke.alternate,ke),C&128){A=void 0;var B=ke.ref;if(B!==null){var L=ke.stateNode;switch(ke.tag){case 5:A=L;break;default:A=L}typeof B=="function"?B(A):B.current=A}}ke=ke.nextEffect}}catch(F){if(ke===null)throw Error(Me(330));Os(ke,F),ke=ke.nextEffect}while(ke!==null);ke=null,IR(),it=i}else n.current=t;if(Js)Js=!1,dc=n,$u=e;else for(ke=r;ke!==null;)e=ke.nextEffect,ke.nextEffect=null,ke.flags&8&&(C=ke,C.sibling=null,C.stateNode=null),ke=e;if(r=n.pendingLanes,r===0&&(hi=null),r===1?n===U0?hc++:(hc=0,U0=n):hc=0,t=t.stateNode,Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(uv,t,void 0,(t.current.flags&64)===64)}catch{}if(Ir(n,kn()),Qh)throw Qh=!1,n=O0,O0=null,n;return(it&8)!==0||Si(),null}function ZR(){for(;ke!==null;){var n=ke.alternate;xh||pc===null||((ke.flags&8)!==0?gM(ke,pc)&&(xh=!0):ke.tag===13&&jR(n,ke)&&gM(ke,pc)&&(xh=!0));var e=ke.flags;(e&256)!==0&&WR(n,ke),(e&512)===0||Js||(Js=!0,bc(97,function(){return ro(),null})),ke=ke.nextEffect}}function ro(){if($u!==90){var n=97<$u?97:$u;return $u=90,Ko(n,eB)}return!1}function $R(n,e){k0.push(e,n),Js||(Js=!0,bc(97,function(){return ro(),null}))}function jS(n,e){G0.push(e,n),Js||(Js=!0,bc(97,function(){return ro(),null}))}function eB(){if(dc===null)return!1;var n=dc;if(dc=null,(it&48)!==0)throw Error(Me(331));var e=it;it|=32;var t=G0;G0=[];for(var r=0;r<t.length;r+=2){var i=t[r],s=t[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(u){if(s===null)throw Error(Me(330));Os(s,u)}}for(t=k0,k0=[],r=0;r<t.length;r+=2){i=t[r],s=t[r+1];try{var a=i.create;i.destroy=a()}catch(u){if(s===null)throw Error(Me(330));Os(s,u)}}for(a=n.current.firstEffect;a!==null;)n=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=n;return it=e,Si(),!0}function vA(n,e,t){e=Mv(t,e),e=NS(n,e,1),Ds(n,e),e=hr(),n=gp(n,1),n!==null&&(lp(n,1,e),Ir(n,e))}function Os(n,e){if(n.tag===3)vA(n,n,e);else for(var t=n.return;t!==null;){if(t.tag===3){vA(t,n,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r))){n=Mv(e,n);var i=OS(t,n,1);if(Ds(t,i),i=hr(),t=gp(t,1),t!==null)lp(t,1,i),Ir(t,i);else if(typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r)))try{r.componentDidCatch(e,n)}catch{}break}}t=t.return}}function tB(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=hr(),n.pingedLanes|=n.suspendedLanes&t,Jn===n&&(Gn&t)===t&&(Rn===4||Rn===3&&(Gn&62914560)===Gn&&500>kn()-Sv?dl(n,0):wv|=t),Ir(n,e)}function nB(n,e){var t=n.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=n.mode,(e&2)===0?e=1:(e&4)===0?e=gl()===99?1:2:(Hi===0&&(Hi=Wl),e=Ja(62914560&~Hi),e===0&&(e=4194304))),t=hr(),n=gp(n,e),n!==null&&(lp(n,e,t),Ir(n,t))}var KS;KS=function(n,e,t){var r=e.lanes;if(n!==null)if(n.memoizedProps!==e.pendingProps||rr.current)Yr=!0;else if((t&r)!==0)Yr=(n.flags&16384)!==0;else{switch(Yr=!1,e.tag){case 3:iA(e),og();break;case 5:QM(e);break;case 1:ir(e.type)&&mh(e);break;case 4:E0(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;en(Oh,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!==0?sA(n,e,t):(en($t,$t.current&1),e=Wi(n,e,t),e!==null?e.sibling:null);en($t,$t.current&1);break;case 19:if(r=(t&e.childLanes)!==0,(n.flags&64)!==0){if(r)return cA(n,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),en($t,$t.current),r)break;return null;case 23:case 24:return e.lanes=0,ag(n,e,t)}return Wi(n,e,t)}else Yr=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,i=ml(e,Un.current),ul(e,t),i=yv(null,e,r,n,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,ir(r)){var s=!0;mh(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hv(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&Uh(e,r,o,n),i.updater=pp,e.stateNode=i,i._reactInternals=e,S0(e,r,n,t),e=R0(null,e,r,!0,s,t)}else e.tag=0,er(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=iB(i),n=Kr(i,n),s){case 0:e=b0(null,e,i,n,t);break e;case 1:e=rA(null,e,i,n,t);break e;case 11:e=tA(null,e,i,n,t);break e;case 14:e=nA(null,e,i,Kr(i.type,n),r,t);break e}throw Error(Me(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),b0(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),rA(n,e,r,i,t);case 3:if(iA(e),r=e.updateQueue,n===null||r===null)throw Error(Me(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,vS(n,e),Rc(e,r,null,t),r=e.memoizedState.element,r===i)og(),e=Wi(n,e,t);else{if(i=e.stateNode,(s=i.hydrate)&&(Ts=ll(e.stateNode.containerInfo.firstChild),Vi=e,s=gi=!0),s){if(n=i.mutableSourceEagerHydrationData,n!=null)for(i=0;i<n.length;i+=2)s=n[i],s._workInProgressVersionPrimary=n[i+1],cl.push(s);for(t=AS(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else er(n,e,r,t),og();e=e.child}return e;case 5:return QM(e),n===null&&T0(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,_0(r,i)?o=null:s!==null&&_0(r,s)&&(e.flags|=16),PS(n,e),er(n,e,o,t),e.child;case 6:return n===null&&T0(e),null;case 13:return sA(n,e,t);case 4:return E0(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Hh(e,null,r,t):er(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),tA(n,e,r,i,t);case 7:return er(n,e,e.pendingProps,t),e.child;case 8:return er(n,e,e.pendingProps.children,t),e.child;case 12:return er(n,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(en(Oh,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=br(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!rr.current){e=Wi(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var u=a.dependencies;if(u!==null){o=a.child;for(var f=u.firstContext;f!==null;){if(f.context===r&&(f.observedBits&s)!==0){a.tag===1&&(f=Is(-1,t&-t),f.tag=2,Ds(a,f)),a.lanes|=t,f=a.alternate,f!==null&&(f.lanes|=t),yS(a.return,t),u.lanes|=t;break}f=f.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}er(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,ul(e,t),i=Pr(i,s.unstable_observedBits),r=r(i),e.flags|=1,er(n,e,r,t),e.child;case 14:return i=e.type,s=Kr(i,e.pendingProps),s=Kr(i.type,s),nA(n,e,i,s,r,t);case 15:return LS(n,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kr(r,i),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,ir(r)?(n=!0,mh(e)):n=!1,ul(e,t),_S(e,r,i),S0(e,r,i,t),R0(null,e,r,!0,n,t);case 19:return cA(n,e,t);case 23:return ag(n,e,t);case 24:return ag(n,e,t)}throw Error(Me(156,e.tag))};function rB(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(n,e,t,r){return new rB(n,e,t,r)}function Tv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iB(n){if(typeof n=="function")return Tv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sp)return 11;if(n===op)return 14}return 2}function js(n,e){var t=n.alternate;return t===null?(t=Rr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function _h(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Tv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ws:return hl(t.children,i,s,e);case w1:o=8,i|=16;break;case zy:o=8,i|=1;break;case rc:return n=Rr(12,t,e,i|8),n.elementType=rc,n.type=rc,n.lanes=s,n;case ic:return n=Rr(13,t,e,i),n.type=ic,n.elementType=ic,n.lanes=s,n;case bh:return n=Rr(19,t,e,i),n.elementType=bh,n.lanes=s,n;case Xy:return Cv(t,i,s,e);case n0:return n=Rr(24,t,e,i),n.elementType=n0,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Vy:o=10;break e;case Wy:o=9;break e;case sp:o=11;break e;case op:o=14;break e;case Jy:o=16,r=null;break e;case jy:o=22;break e}throw Error(Me(130,n==null?n:typeof n,""))}return e=Rr(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function hl(n,e,t,r){return n=Rr(7,n,r,e),n.lanes=t,n}function Cv(n,e,t,r){return n=Rr(23,n,r,e),n.elementType=Xy,n.lanes=t,n}function cg(n,e,t){return n=Rr(6,n,null,e),n.lanes=t,n}function fg(n,e,t){return e=Rr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sB(n,e,t){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.mutableSourceEagerHydrationData=null}function oB(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Po,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Yh(n,e,t,r){var i=e.current,s=hr(),o=Fs(i);e:if(t){t=t._reactInternals;t:{if(oa(t)!==t||t.tag!==1)throw Error(Me(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(ir(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(Me(171))}if(t.tag===1){var u=t.type;if(ir(u)){t=cS(t,u,a);break e}}t=a}else t=Ws;return e.context===null?e.context=t:e.pendingContext=t,e=Is(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),Ds(i,e),Ns(i,o,s),o}function dg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function bv(n,e){xA(n,e),(n=n.alternate)&&xA(n,e)}function aB(){return null}function Rv(n,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new sB(n,e,t!=null&&t.hydrate===!0),e=Rr(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,hv(e),n[Vl]=t.current,sS(n.nodeType===8?n.parentNode:n),r)for(n=0;n<r.length;n++){e=r[n];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}Rv.prototype.render=function(n){Yh(n,this._internalRoot,null,null)};Rv.prototype.unmount=function(){var n=this._internalRoot,e=n.containerInfo;Yh(null,n,null,function(){e[Vl]=null})};function qc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lB(n,e){if(e||(e=n?n.nodeType===9?n.documentElement:n.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=n.lastChild;)n.removeChild(t);return new Rv(n,0,e?{hydrate:!0}:void 0)}function yp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var f=dg(o);a.call(f)}}Yh(e,o,n,i)}else{if(s=t._reactRootContainer=lB(t,r),o=s._internalRoot,typeof i=="function"){var u=i;i=function(){var f=dg(o);u.call(f)}}HS(function(){Yh(e,o,n,i)})}return dg(o)}k1=function(n){if(n.tag===13){var e=hr();Ns(n,4,e),bv(n,4)}};$y=function(n){if(n.tag===13){var e=hr();Ns(n,67108864,e),bv(n,67108864)}};G1=function(n){if(n.tag===13){var e=hr(),t=Fs(n);Ns(n,t,e),bv(n,t)}};U1=function(n,e){return e()};d0=function(n,e,t){switch(e){case"input":if(i0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=dp(r);if(!i)throw Error(Me(90));E1(r),i0(r,i)}}}break;case"textarea":C1(n,t);break;case"select":e=t.value,e!=null&&sl(n,!!t.multiple,e,!1)}};Yy=US;D1=function(n,e,t,r,i){var s=it;it|=4;try{return Ko(98,n.bind(null,e,t,r,i))}finally{it=s,it===0&&(jl(),Si())}};qy=function(){(it&49)===0&&(XR(),ro())};F1=function(n,e){var t=it;it|=2;try{return n(e)}finally{it=t,it===0&&(jl(),Si())}};function XS(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(e))throw Error(Me(200));return oB(n,e,null,t)}var uB={Events:[Xc,Ya,dp,P1,I1,ro,{current:!1}]},Ou={findFiberByHostInstance:Do,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cB={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=O1(n),n===null?null:n.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||aB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{uv=vd.inject(cB),Ho=vd}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uB;Dr.createPortal=XS;Dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Me(188)):Error(Me(268,Object.keys(n)));return n=O1(e),n=n===null?null:n.stateNode,n};Dr.flushSync=function(n,e){var t=it;if((t&48)!==0)return n(e);it|=1;try{if(n)return Ko(99,n.bind(null,e))}finally{it=t,Si()}};Dr.hydrate=function(n,e,t){if(!qc(e))throw Error(Me(200));return yp(null,n,e,!0,t)};Dr.render=function(n,e,t){if(!qc(e))throw Error(Me(200));return yp(null,n,e,!1,t)};Dr.unmountComponentAtNode=function(n){if(!qc(n))throw Error(Me(40));return n._reactRootContainer?(HS(function(){yp(null,null,n,!1,function(){n._reactRootContainer=null,n[Vl]=null})}),!0):!1};Dr.unstable_batchedUpdates=US;Dr.unstable_createPortal=function(n,e){return XS(n,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Dr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!qc(t))throw Error(Me(200));if(n==null||n._reactInternals===void 0)throw Error(Me(38));return yp(n,e,t,!1,r)};Dr.version="17.0.2";function QS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QS)}catch(n){console.error(n)}}QS(),_1.exports=Dr;var sO=_1.exports;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vp="139",Co={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YS=0,z0=1,qS=2,fB=3,dB=0,Bv=1,Lv=2,$a=3,Ks=0,sr=1,Xs=2,Pv=1,hB=2,bn=0,zo=1,V0=2,W0=3,J0=4,Iv=5,zi=100,ZS=101,$S=102,j0=103,K0=104,qh=200,eE=201,tE=202,nE=203,Dv=204,Fv=205,Nv=206,rE=207,Ov=208,iE=209,sE=210,oE=0,aE=1,lE=2,Zh=3,uE=4,cE=5,fE=6,dE=7,Zc=0,hE=1,pE=2,qr=0,mE=1,gE=2,yE=3,kv=4,vE=5,xp=300,Ki=301,Qs=302,vl=303,Ic=304,Kl=306,xi=1e3,On=1001,xl=1002,Kt=1003,Dc=1004,pB=1004,Fc=1005,mB=1005,Dt=1006,_p=1007,gB=1007,qi=1008,yB=1008,Ys=1009,xE=1010,_E=1011,_l=1012,ME=1013,mc=1014,tr=1015,Br=1016,AE=1017,wE=1018,ks=1020,SE=1021,EE=1022,dr=1023,Gv=1024,TE=1025,Gs=1026,qs=1027,Uv=1028,CE=1029,bE=1030,RE=1031,BE=1033,Mh=33776,Ah=33777,wh=33778,Sh=33779,X0=35840,Q0=35841,Y0=35842,q0=35843,LE=36196,Z0=37492,$0=37496,ey=37808,ty=37809,ny=37810,ry=37811,iy=37812,sy=37813,oy=37814,ay=37815,ly=37816,uy=37817,cy=37818,fy=37819,dy=37820,hy=37821,py=36492,PE=2200,IE=2201,DE=2202,Ml=2300,Qo=2301,Eh=2302,Oo=2400,ko=2401,Nc=2402,Mp=2500,Hv=2501,FE=0,NE=1,zv=2,or=3e3,bt=3001,OE=3200,kE=3201,io=0,GE=1,vB="",ui="srgb",Cs="srgb-linear",xB=0,Th=7680,_B=7681,MB=7682,AB=7683,wB=34055,SB=34056,EB=5386,TB=512,CB=513,bB=514,RB=515,BB=516,LB=517,PB=518,UE=519,Al=35044,wl=35048,IB=35040,DB=35045,FB=35049,NB=35041,OB=35046,kB=35050,GB=35042,UB="100",my="300 es",$h=1035;class Zi{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Tn=[];for(let n=0;n<256;n++)Tn[n]=(n<16?"0":"")+n.toString(16);let _A=1234567;const Vo=Math.PI/180,Oc=180/Math.PI;function pr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Tn[n&255]+Tn[n>>8&255]+Tn[n>>16&255]+Tn[n>>24&255]+"-"+Tn[e&255]+Tn[e>>8&255]+"-"+Tn[e>>16&15|64]+Tn[e>>24&255]+"-"+Tn[t&63|128]+Tn[t>>8&255]+"-"+Tn[t>>16&255]+Tn[t>>24&255]+Tn[r&255]+Tn[r>>8&255]+Tn[r>>16&255]+Tn[r>>24&255]).toLowerCase()}function rn(n,e,t){return Math.max(e,Math.min(t,n))}function Vv(n,e){return(n%e+e)%e}function HB(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zB(n,e,t){return n!==e?(t-n)/(e-n):0}function gc(n,e,t){return(1-t)*n+t*e}function VB(n,e,t,r){return gc(n,e,1-Math.exp(-t*r))}function WB(n,e=1){return e-Math.abs(Vv(n,e*2)-e)}function JB(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function jB(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function KB(n,e){return n+Math.floor(Math.random()*(e-n+1))}function XB(n,e){return n+Math.random()*(e-n)}function QB(n){return n*(.5-Math.random())}function YB(n){n!==void 0&&(_A=n);let e=_A+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function qB(n){return n*Vo}function ZB(n){return n*Oc}function gy(n){return(n&n-1)===0&&n!==0}function HE(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ep(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $B(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),u=o(t/2),f=s((e+r)/2),h=o((e+r)/2),p=s((e-r)/2),d=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*h,u*p,u*d,a*f);break;case"YZY":n.set(u*d,a*h,u*p,a*f);break;case"ZXZ":n.set(u*p,u*d,a*h,a*f);break;case"XZX":n.set(a*h,u*v,u*m,a*f);break;case"YXY":n.set(u*m,a*h,u*v,a*f);break;case"ZYZ":n.set(u*v,u*m,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function eL(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tL(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var tp=Object.freeze({__proto__:null,DEG2RAD:Vo,RAD2DEG:Oc,generateUUID:pr,clamp:rn,euclideanModulo:Vv,mapLinear:HB,inverseLerp:zB,lerp:gc,damp:VB,pingpong:WB,smoothstep:JB,smootherstep:jB,randInt:KB,randFloat:XB,randFloatSpread:QB,seededRandom:YB,degToRad:qB,radToDeg:ZB,isPowerOfTwo:gy,ceilPowerOfTwo:HE,floorPowerOfTwo:ep,setQuaternionFromProperEuler:$B,normalize:tL,denormalize:eL});class de{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}de.prototype.isVector2=!0;class gn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,u,f){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=u,h[6]=r,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],u=r[6],f=r[1],h=r[4],p=r[7],d=r[2],m=r[5],v=r[8],x=i[0],y=i[3],_=i[6],M=i[1],A=i[4],S=i[7],T=i[2],C=i[5],B=i[8];return s[0]=o*x+a*M+u*T,s[3]=o*y+a*A+u*C,s[6]=o*_+a*S+u*B,s[1]=f*x+h*M+p*T,s[4]=f*y+h*A+p*C,s[7]=f*_+h*S+p*B,s[2]=d*x+m*M+v*T,s[5]=d*y+m*A+v*C,s[8]=d*_+m*S+v*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-r*s*h+r*a*u+i*s*f-i*o*u}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8],p=h*o-a*f,d=a*u-h*s,m=f*s-o*u,v=t*p+r*d+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=p*x,e[1]=(i*f-h*r)*x,e[2]=(a*r-i*o)*x,e[3]=d*x,e[4]=(h*t-i*u)*x,e[5]=(i*s-a*t)*x,e[6]=m*x,e[7]=(r*u-f*t)*x,e[8]=(o*t-r*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const u=Math.cos(s),f=Math.sin(s);return this.set(r*u,r*f,-r*(u*o+f*a)+o+e,-i*f,i*u,-i*(-f*o+u*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],u=i[1],f=i[4],h=i[7];return i[0]=t*s+r*u,i[3]=t*o+r*f,i[6]=t*a+r*h,i[1]=-r*s+t*u,i[4]=-r*o+t*f,i[7]=-r*a+t*h,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}gn.prototype.isMatrix3=!0;function zE(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const nL={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function el(n,e){return new nL[n](e)}function kc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Wo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ch(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const hg={[ui]:{[Cs]:Wo},[Cs]:{[ui]:Ch}},Cr={legacyMode:!0,get workingColorSpace(){return Cs},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(hg[e]&&hg[e][t]!==void 0){const r=hg[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},VE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pn={r:0,g:0,b:0},zr={h:0,s:0,l:0},xd={h:0,s:0,l:0};function pg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function _d(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ae{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ui){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Cr.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Cs){return this.r=e,this.g=t,this.b=r,Cr.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Cs){if(e=Vv(e,1),t=rn(t,0,1),r=rn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=pg(o,s,e+1/3),this.g=pg(o,s,e),this.b=pg(o,s,e-1/3)}return Cr.toWorkingColorSpace(this,i),this}setStyle(e,t=ui){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Cr.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Cr.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const u=parseFloat(s[1])/360,f=parseInt(s[2],10)/100,h=parseInt(s[3],10)/100;return r(s[4]),this.setHSL(u,f,h,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Cr.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Cr.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ui){const r=VE[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wo(e.r),this.g=Wo(e.g),this.b=Wo(e.b),this}copyLinearToSRGB(e){return this.r=Ch(e.r),this.g=Ch(e.g),this.b=Ch(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ui){return Cr.fromWorkingColorSpace(_d(this,pn),e),rn(pn.r*255,0,255)<<16^rn(pn.g*255,0,255)<<8^rn(pn.b*255,0,255)<<0}getHexString(e=ui){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Cs){Cr.fromWorkingColorSpace(_d(this,pn),t);const r=pn.r,i=pn.g,s=pn.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let u,f;const h=(a+o)/2;if(a===o)u=0,f=0;else{const p=o-a;switch(f=h<=.5?p/(o+a):p/(2-o-a),o){case r:u=(i-s)/p+(i<s?6:0);break;case i:u=(s-r)/p+2;break;case s:u=(r-i)/p+4;break}u/=6}return e.h=u,e.s=f,e.l=h,e}getRGB(e,t=Cs){return Cr.fromWorkingColorSpace(_d(this,pn),t),e.r=pn.r,e.g=pn.g,e.b=pn.b,e}getStyle(e=ui){return Cr.fromWorkingColorSpace(_d(this,pn),e),e!==ui?`color(${e} ${pn.r} ${pn.g} ${pn.b})`:`rgb(${pn.r*255|0},${pn.g*255|0},${pn.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(zr),zr.h+=e,zr.s+=t,zr.l+=r,this.setHSL(zr.h,zr.s,zr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(zr),e.getHSL(xd);const r=gc(zr.h,xd.h,t),i=gc(zr.s,xd.s,t),s=gc(zr.l,xd.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ae.NAMES=VE;Ae.prototype.isColor=!0;Ae.prototype.r=1;Ae.prototype.g=1;Ae.prototype.b=1;let Ta;class so{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ta===void 0&&(Ta=kc("canvas")),Ta.width=e.width,Ta.height=e.height;const r=Ta.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ta}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=kc("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Wo(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Wo(t[r]/255)*255):t[r]=Wo(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Go{constructor(e=null){this.uuid=pr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(mg(i[o].image)):s.push(mg(i[o]))}else s=mg(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function mg(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?so.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Go.prototype.isSource=!0;let rL=0;class Yt extends Zi{constructor(e=Yt.DEFAULT_IMAGE,t=Yt.DEFAULT_MAPPING,r=On,i=On,s=Dt,o=qi,a=dr,u=Ys,f=1,h=or){super();Object.defineProperty(this,"id",{value:rL++}),this.uuid=pr(),this.name="",this.source=new Go(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=u,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xi:e.x=e.x-Math.floor(e.x);break;case On:e.x=e.x<0?0:1;break;case xl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xi:e.y=e.y-Math.floor(e.y);break;case On:e.y=e.y<0?0:1;break;case xl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Yt.DEFAULT_IMAGE=null;Yt.DEFAULT_MAPPING=xp;Yt.prototype.isTexture=!0;class Rt{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const u=e.elements,f=u[0],h=u[4],p=u[8],d=u[1],m=u[5],v=u[9],x=u[2],y=u[6],_=u[10];if(Math.abs(h-d)<.01&&Math.abs(p-x)<.01&&Math.abs(v-y)<.01){if(Math.abs(h+d)<.1&&Math.abs(p+x)<.1&&Math.abs(v+y)<.1&&Math.abs(f+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(f+1)/2,S=(m+1)/2,T=(_+1)/2,C=(h+d)/4,B=(p+x)/4,L=(v+y)/4;return A>S&&A>T?A<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(A),i=C/r,s=B/r):S>T?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=C/i,s=L/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=B/s,i=L/s),this.set(r,i,s,t),this}let M=Math.sqrt((y-v)*(y-v)+(p-x)*(p-x)+(d-h)*(d-h));return Math.abs(M)<.001&&(M=1),this.x=(y-v)/M,this.y=(p-x)/M,this.z=(d-h)/M,this.w=Math.acos((f+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Rt.prototype.isVector4=!0;class _n extends Zi{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Rt(0,0,e,t),this.scissorTest=!1,this.viewport=new Rt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Yt(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Dt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}_n.prototype.isWebGLRenderTarget=!0;class Xl extends Yt{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kt,this.minFilter=Kt,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Xl.prototype.isDataArrayTexture=!0;class WE extends _n{constructor(e,t,r){super(e,t);this.depth=r,this.texture=new Xl(null,e,t,r),this.texture.isRenderTargetTexture=!0}}WE.prototype.isWebGLArrayRenderTarget=!0;class $c extends Yt{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kt,this.minFilter=Kt,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}$c.prototype.isData3DTexture=!0;class JE extends _n{constructor(e,t,r){super(e,t);this.depth=r,this.texture=new $c(null,e,t,r),this.texture.isRenderTargetTexture=!0}}JE.prototype.isWebGL3DRenderTarget=!0;class jE extends _n{constructor(e,t,r,i={}){super(e,t,i);const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}jE.prototype.isWebGLMultipleRenderTargets=!0;class an{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,o,a){let u=r[i+0],f=r[i+1],h=r[i+2],p=r[i+3];const d=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=u,e[t+1]=f,e[t+2]=h,e[t+3]=p;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(p!==x||u!==d||f!==m||h!==v){let y=1-a;const _=u*d+f*m+h*v+p*x,M=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const T=Math.sqrt(A),C=Math.atan2(T,_*M);y=Math.sin(y*C)/T,a=Math.sin(a*C)/T}const S=a*M;if(u=u*y+d*S,f=f*y+m*S,h=h*y+v*S,p=p*y+x*S,y===1-a){const T=1/Math.sqrt(u*u+f*f+h*h+p*p);u*=T,f*=T,h*=T,p*=T}}e[t]=u,e[t+1]=f,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],u=r[i+1],f=r[i+2],h=r[i+3],p=s[o],d=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*p+u*m-f*d,e[t+1]=u*v+h*d+f*p-a*m,e[t+2]=f*v+h*m+a*d-u*p,e[t+3]=h*v-a*p-u*d-f*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,u=Math.sin,f=a(r/2),h=a(i/2),p=a(s/2),d=u(r/2),m=u(i/2),v=u(s/2);switch(o){case"XYZ":this._x=d*h*p+f*m*v,this._y=f*m*p-d*h*v,this._z=f*h*v+d*m*p,this._w=f*h*p-d*m*v;break;case"YXZ":this._x=d*h*p+f*m*v,this._y=f*m*p-d*h*v,this._z=f*h*v-d*m*p,this._w=f*h*p+d*m*v;break;case"ZXY":this._x=d*h*p-f*m*v,this._y=f*m*p+d*h*v,this._z=f*h*v+d*m*p,this._w=f*h*p-d*m*v;break;case"ZYX":this._x=d*h*p-f*m*v,this._y=f*m*p+d*h*v,this._z=f*h*v-d*m*p,this._w=f*h*p+d*m*v;break;case"YZX":this._x=d*h*p+f*m*v,this._y=f*m*p+d*h*v,this._z=f*h*v-d*m*p,this._w=f*h*p-d*m*v;break;case"XZY":this._x=d*h*p-f*m*v,this._y=f*m*p-d*h*v,this._z=f*h*v+d*m*p,this._w=f*h*p+d*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],u=t[9],f=t[2],h=t[6],p=t[10],d=r+a+p;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(h-u)*m,this._y=(s-f)*m,this._z=(o-i)*m}else if(r>a&&r>p){const m=2*Math.sqrt(1+r-a-p);this._w=(h-u)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+f)/m}else if(a>p){const m=2*Math.sqrt(1+a-r-p);this._w=(s-f)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(u+h)/m}else{const m=2*Math.sqrt(1+p-r-a);this._w=(o-i)/m,this._x=(s+f)/m,this._y=(u+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,u=t._y,f=t._z,h=t._w;return this._x=r*h+o*a+i*f-s*u,this._y=i*h+o*u+s*a-r*f,this._z=s*h+o*f+r*u-i*a,this._w=o*h-r*a-i*u-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const u=1-a*a;if(u<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),h=Math.atan2(f,a),p=Math.sin((1-t)*h)/f,d=Math.sin(t*h)/f;return this._w=o*p+this._w*d,this._x=r*p+this._x*d,this._y=i*p+this._y*d,this._z=s*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}an.prototype.isQuaternion=!0;class I{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(MA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(MA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,u=e.w,f=u*t+o*i-a*r,h=u*r+a*t-s*i,p=u*i+s*r-o*t,d=-s*t-o*r-a*i;return this.x=f*u+d*-s+h*-a-p*-o,this.y=h*u+d*-o+p*-s-f*-a,this.z=p*u+d*-a+f*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,u=t.z;return this.x=i*u-s*a,this.y=s*o-r*u,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return gg.copy(this).projectOnVector(e),this.sub(gg)}reflect(e){return this.sub(gg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(rn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}I.prototype.isVector3=!0;const gg=new I,MA=new an;class lr{constructor(e=new I(1/0,1/0,1/0),t=new I(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,f=e.length;u<f;u+=3){const h=e[u],p=e[u+1],d=e[u+2];h<t&&(t=h),p<r&&(r=p),d<i&&(i=d),h>s&&(s=h),p>o&&(o=p),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,f=e.count;u<f;u++){const h=e.getX(u),p=e.getY(u),d=e.getZ(u);h<t&&(t=h),p<r&&(r=p),d<i&&(i=d),h>s&&(s=h),p>o&&(o=p),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)vo.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(vo)}else r.boundingBox===null&&r.computeBoundingBox(),yg.copy(r.boundingBox),yg.applyMatrix4(e.matrixWorld),this.union(yg);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ku),Md.subVectors(this.max,ku),Ca.subVectors(e.a,ku),ba.subVectors(e.b,ku),Ra.subVectors(e.c,ku),ds.subVectors(ba,Ca),hs.subVectors(Ra,ba),xo.subVectors(Ca,Ra);let t=[0,-ds.z,ds.y,0,-hs.z,hs.y,0,-xo.z,xo.y,ds.z,0,-ds.x,hs.z,0,-hs.x,xo.z,0,-xo.x,-ds.y,ds.x,0,-hs.y,hs.x,0,-xo.y,xo.x,0];return!vg(t,Ca,ba,Ra,Md)||(t=[1,0,0,0,1,0,0,0,1],!vg(t,Ca,ba,Ra,Md))?!1:(Ad.crossVectors(ds,hs),t=[Ad.x,Ad.y,Ad.z],vg(t,Ca,ba,Ra,Md))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return vo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ii[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ii[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ii[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ii[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ii[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ii[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ii[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ii[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ii),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}lr.prototype.isBox3=!0;const Ii=[new I,new I,new I,new I,new I,new I,new I,new I],vo=new I,yg=new lr,Ca=new I,ba=new I,Ra=new I,ds=new I,hs=new I,xo=new I,ku=new I,Md=new I,Ad=new I,_o=new I;function vg(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){_o.fromArray(n,s);const a=i.x*Math.abs(_o.x)+i.y*Math.abs(_o.y)+i.z*Math.abs(_o.z),u=e.dot(_o),f=t.dot(_o),h=r.dot(_o);if(Math.max(-Math.max(u,f,h),Math.min(u,f,h))>a)return!1}return!0}const iL=new lr,AA=new I,wd=new I,xg=new I;class $i{constructor(e=new I,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):iL.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){xg.subVectors(e,this.center);const t=xg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(xg.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?wd.set(0,0,1).multiplyScalar(e.radius):wd.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(AA.copy(e.center).add(wd)),this.expandByPoint(AA.copy(e.center).sub(wd)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Di=new I,_g=new I,Sd=new I,ps=new I,Mg=new I,Ed=new I,Ag=new I;class oo{constructor(e=new I,t=new I(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Di)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Di.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Di.copy(this.direction).multiplyScalar(t).add(this.origin),Di.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){_g.copy(e).add(t).multiplyScalar(.5),Sd.copy(t).sub(e).normalize(),ps.copy(this.origin).sub(_g);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Sd),a=ps.dot(this.direction),u=-ps.dot(Sd),f=ps.lengthSq(),h=Math.abs(1-o*o);let p,d,m,v;if(h>0)if(p=o*u-a,d=o*a-u,v=s*h,p>=0)if(d>=-v)if(d<=v){const x=1/h;p*=x,d*=x,m=p*(p+o*d+2*a)+d*(o*p+d+2*u)+f}else d=s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*u)+f;else d=-s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*u)+f;else d<=-v?(p=Math.max(0,-(-o*s+a)),d=p>0?-s:Math.min(Math.max(-s,-u),s),m=-p*p+d*(d+2*u)+f):d<=v?(p=0,d=Math.min(Math.max(-s,-u),s),m=d*(d+2*u)+f):(p=Math.max(0,-(o*s+a)),d=p>0?s:Math.min(Math.max(-s,-u),s),m=-p*p+d*(d+2*u)+f);else d=o>0?-s:s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*u)+f;return r&&r.copy(this.direction).multiplyScalar(p).add(this.origin),i&&i.copy(Sd).multiplyScalar(d).add(_g),m}intersectSphere(e,t){Di.subVectors(e.center,this.origin);const r=Di.dot(this.direction),i=Di.dot(Di)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,u=r+o;return a<0&&u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,u;const f=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,d=this.origin;return f>=0?(r=(e.min.x-d.x)*f,i=(e.max.x-d.x)*f):(r=(e.max.x-d.x)*f,i=(e.min.x-d.x)*f),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),p>=0?(a=(e.min.z-d.z)*p,u=(e.max.z-d.z)*p):(a=(e.max.z-d.z)*p,u=(e.min.z-d.z)*p),r>u||a>i)||((a>r||r!==r)&&(r=a),(u<i||i!==i)&&(i=u),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Di)!==null}intersectTriangle(e,t,r,i,s){Mg.subVectors(t,e),Ed.subVectors(r,e),Ag.crossVectors(Mg,Ed);let o=this.direction.dot(Ag),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ps.subVectors(this.origin,e);const u=a*this.direction.dot(Ed.crossVectors(ps,Ed));if(u<0)return null;const f=a*this.direction.dot(Mg.cross(ps));if(f<0||u+f>o)return null;const h=-a*ps.dot(Ag);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ge{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,u,f,h,p,d,m,v,x,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=u,_[2]=f,_[6]=h,_[10]=p,_[14]=d,_[3]=m,_[7]=v,_[11]=x,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ge().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Ba.setFromMatrixColumn(e,0).length(),s=1/Ba.setFromMatrixColumn(e,1).length(),o=1/Ba.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),u=Math.cos(i),f=Math.sin(i),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const d=o*h,m=o*p,v=a*h,x=a*p;t[0]=u*h,t[4]=-u*p,t[8]=f,t[1]=m+v*f,t[5]=d-x*f,t[9]=-a*u,t[2]=x-d*f,t[6]=v+m*f,t[10]=o*u}else if(e.order==="YXZ"){const d=u*h,m=u*p,v=f*h,x=f*p;t[0]=d+x*a,t[4]=v*a-m,t[8]=o*f,t[1]=o*p,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=x+d*a,t[10]=o*u}else if(e.order==="ZXY"){const d=u*h,m=u*p,v=f*h,x=f*p;t[0]=d-x*a,t[4]=-o*p,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=x-d*a,t[2]=-o*f,t[6]=a,t[10]=o*u}else if(e.order==="ZYX"){const d=o*h,m=o*p,v=a*h,x=a*p;t[0]=u*h,t[4]=v*f-m,t[8]=d*f+x,t[1]=u*p,t[5]=x*f+d,t[9]=m*f-v,t[2]=-f,t[6]=a*u,t[10]=o*u}else if(e.order==="YZX"){const d=o*u,m=o*f,v=a*u,x=a*f;t[0]=u*h,t[4]=x-d*p,t[8]=v*p+m,t[1]=p,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=m*p+v,t[10]=d-x*p}else if(e.order==="XZY"){const d=o*u,m=o*f,v=a*u,x=a*f;t[0]=u*h,t[4]=-p,t[8]=f*h,t[1]=d*p+x,t[5]=o*h,t[9]=m*p-v,t[2]=v*p-m,t[6]=a*h,t[10]=x*p+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sL,e,oL)}lookAt(e,t,r){const i=this.elements;return cr.subVectors(e,t),cr.lengthSq()===0&&(cr.z=1),cr.normalize(),ms.crossVectors(r,cr),ms.lengthSq()===0&&(Math.abs(r.z)===1?cr.x+=1e-4:cr.z+=1e-4,cr.normalize(),ms.crossVectors(r,cr)),ms.normalize(),Td.crossVectors(cr,ms),i[0]=ms.x,i[4]=Td.x,i[8]=cr.x,i[1]=ms.y,i[5]=Td.y,i[9]=cr.y,i[2]=ms.z,i[6]=Td.z,i[10]=cr.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],u=r[8],f=r[12],h=r[1],p=r[5],d=r[9],m=r[13],v=r[2],x=r[6],y=r[10],_=r[14],M=r[3],A=r[7],S=r[11],T=r[15],C=i[0],B=i[4],L=i[8],F=i[12],G=i[1],b=i[5],P=i[9],W=i[13],z=i[2],K=i[6],X=i[10],q=i[14],V=i[3],re=i[7],le=i[11],J=i[15];return s[0]=o*C+a*G+u*z+f*V,s[4]=o*B+a*b+u*K+f*re,s[8]=o*L+a*P+u*X+f*le,s[12]=o*F+a*W+u*q+f*J,s[1]=h*C+p*G+d*z+m*V,s[5]=h*B+p*b+d*K+m*re,s[9]=h*L+p*P+d*X+m*le,s[13]=h*F+p*W+d*q+m*J,s[2]=v*C+x*G+y*z+_*V,s[6]=v*B+x*b+y*K+_*re,s[10]=v*L+x*P+y*X+_*le,s[14]=v*F+x*W+y*q+_*J,s[3]=M*C+A*G+S*z+T*V,s[7]=M*B+A*b+S*K+T*re,s[11]=M*L+A*P+S*X+T*le,s[15]=M*F+A*W+S*q+T*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],u=e[9],f=e[13],h=e[2],p=e[6],d=e[10],m=e[14],v=e[3],x=e[7],y=e[11],_=e[15];return v*(+s*u*p-i*f*p-s*a*d+r*f*d+i*a*m-r*u*m)+x*(+t*u*m-t*f*d+s*o*d-i*o*m+i*f*h-s*u*h)+y*(+t*f*p-t*a*m-s*o*p+r*o*m+s*a*h-r*f*h)+_*(-i*a*h-t*u*p+t*a*d+i*o*p-r*o*d+r*u*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8],p=e[9],d=e[10],m=e[11],v=e[12],x=e[13],y=e[14],_=e[15],M=p*y*f-x*d*f+x*u*m-a*y*m-p*u*_+a*d*_,A=v*d*f-h*y*f-v*u*m+o*y*m+h*u*_-o*d*_,S=h*x*f-v*p*f+v*a*m-o*x*m-h*a*_+o*p*_,T=v*p*u-h*x*u-v*a*d+o*x*d+h*a*y-o*p*y,C=t*M+r*A+i*S+s*T;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/C;return e[0]=M*B,e[1]=(x*d*s-p*y*s-x*i*m+r*y*m+p*i*_-r*d*_)*B,e[2]=(a*y*s-x*u*s+x*i*f-r*y*f-a*i*_+r*u*_)*B,e[3]=(p*u*s-a*d*s-p*i*f+r*d*f+a*i*m-r*u*m)*B,e[4]=A*B,e[5]=(h*y*s-v*d*s+v*i*m-t*y*m-h*i*_+t*d*_)*B,e[6]=(v*u*s-o*y*s-v*i*f+t*y*f+o*i*_-t*u*_)*B,e[7]=(o*d*s-h*u*s+h*i*f-t*d*f-o*i*m+t*u*m)*B,e[8]=S*B,e[9]=(v*p*s-h*x*s-v*r*m+t*x*m+h*r*_-t*p*_)*B,e[10]=(o*x*s-v*a*s+v*r*f-t*x*f-o*r*_+t*a*_)*B,e[11]=(h*a*s-o*p*s-h*r*f+t*p*f+o*r*m-t*a*m)*B,e[12]=T*B,e[13]=(h*x*i-v*p*i+v*r*d-t*x*d-h*r*y+t*p*y)*B,e[14]=(v*a*i-o*x*i-v*r*u+t*x*u+o*r*y-t*a*y)*B,e[15]=(o*p*i-h*a*i+h*r*u-t*p*u-o*r*d+t*a*d)*B,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,u=e.z,f=s*o,h=s*a;return this.set(f*o+r,f*a-i*u,f*u+i*a,0,f*a+i*u,h*a+r,h*u-i*o,0,f*u-i*a,h*u+i*o,s*u*u+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,u=t._w,f=s+s,h=o+o,p=a+a,d=s*f,m=s*h,v=s*p,x=o*h,y=o*p,_=a*p,M=u*f,A=u*h,S=u*p,T=r.x,C=r.y,B=r.z;return i[0]=(1-(x+_))*T,i[1]=(m+S)*T,i[2]=(v-A)*T,i[3]=0,i[4]=(m-S)*C,i[5]=(1-(d+_))*C,i[6]=(y+M)*C,i[7]=0,i[8]=(v+A)*B,i[9]=(y-M)*B,i[10]=(1-(d+x))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Ba.set(i[0],i[1],i[2]).length();const o=Ba.set(i[4],i[5],i[6]).length(),a=Ba.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Vr.copy(this);const f=1/s,h=1/o,p=1/a;return Vr.elements[0]*=f,Vr.elements[1]*=f,Vr.elements[2]*=f,Vr.elements[4]*=h,Vr.elements[5]*=h,Vr.elements[6]*=h,Vr.elements[8]*=p,Vr.elements[9]*=p,Vr.elements[10]*=p,t.setFromRotationMatrix(Vr),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,u=2*s/(t-e),f=2*s/(r-i),h=(t+e)/(t-e),p=(r+i)/(r-i),d=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=u,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=f,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,u=1/(t-e),f=1/(r-i),h=1/(o-s),p=(t+e)*u,d=(r+i)*f,m=(o+s)*h;return a[0]=2*u,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Ge.prototype.isMatrix4=!0;const Ba=new I,Vr=new Ge,sL=new I(0,0,0),oL=new I(1,1,1),ms=new I,Td=new I,cr=new I,wA=new Ge,SA=new an;class ao{constructor(e=0,t=0,r=0,i=ao.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],u=i[1],f=i[5],h=i[9],p=i[2],d=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,f),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(rn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,m),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-rn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(rn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return wA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wA,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return SA.setFromEuler(this),this.setFromQuaternion(SA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ao.prototype.isEuler=!0;ao.DefaultOrder="XYZ";ao.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Jo{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let aL=0;const EA=new I,La=new an,Fi=new Ge,Cd=new I,Gu=new I,lL=new I,uL=new an,TA=new I(1,0,0),CA=new I(0,1,0),bA=new I(0,0,1),cL={type:"added"},RA={type:"removed"};class mt extends Zi{constructor(){super();Object.defineProperty(this,"id",{value:aL++}),this.uuid=pr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mt.DefaultUp.clone();const e=new I,t=new ao,r=new an,i=new I(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ge},normalMatrix:{value:new gn}}),this.matrix=new Ge,this.matrixWorld=new Ge,this.matrixAutoUpdate=mt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return La.setFromAxisAngle(e,t),this.quaternion.multiply(La),this}rotateOnWorldAxis(e,t){return La.setFromAxisAngle(e,t),this.quaternion.premultiply(La),this}rotateX(e){return this.rotateOnAxis(TA,e)}rotateY(e){return this.rotateOnAxis(CA,e)}rotateZ(e){return this.rotateOnAxis(bA,e)}translateOnAxis(e,t){return EA.copy(e).applyQuaternion(this.quaternion),this.position.add(EA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(TA,e)}translateY(e){return this.translateOnAxis(CA,e)}translateZ(e){return this.translateOnAxis(bA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Fi.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Cd.copy(e):Cd.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Gu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fi.lookAt(Gu,Cd,this.up):Fi.lookAt(Cd,Gu,this.up),this.quaternion.setFromRotationMatrix(Fi),i&&(Fi.extractRotation(i.matrixWorld),La.setFromRotationMatrix(Fi),this.quaternion.premultiply(La.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cL)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(RA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(RA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fi.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gu,e,lL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gu,uL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){const p=u[f];s(e.shapes,p)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,f=this.material.length;u<f;u++)a.push(s(e.materials,this.material[u]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];i.animations.push(s(e.animations,u))}}if(t){const a=o(e.geometries),u=o(e.materials),f=o(e.textures),h=o(e.images),p=o(e.shapes),d=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),d.length>0&&(r.skeletons=d),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const u=[];for(const f in a){const h=a[f];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}mt.DefaultUp=new I(0,1,0);mt.DefaultMatrixAutoUpdate=!0;mt.prototype.isObject3D=!0;const Wr=new I,Ni=new I,wg=new I,Oi=new I,Pa=new I,Ia=new I,BA=new I,Sg=new I,Eg=new I,Tg=new I;class sn{constructor(e=new I,t=new I,r=new I){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Wr.subVectors(e,t),i.cross(Wr);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Wr.subVectors(i,t),Ni.subVectors(r,t),wg.subVectors(e,t);const o=Wr.dot(Wr),a=Wr.dot(Ni),u=Wr.dot(wg),f=Ni.dot(Ni),h=Ni.dot(wg),p=o*f-a*a;if(p===0)return s.set(-2,-1,-1);const d=1/p,m=(f*u-a*h)*d,v=(o*h-a*u)*d;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Oi),Oi.x>=0&&Oi.y>=0&&Oi.x+Oi.y<=1}static getUV(e,t,r,i,s,o,a,u){return this.getBarycoord(e,t,r,i,Oi),u.set(0,0),u.addScaledVector(s,Oi.x),u.addScaledVector(o,Oi.y),u.addScaledVector(a,Oi.z),u}static isFrontFacing(e,t,r,i){return Wr.subVectors(r,t),Ni.subVectors(e,t),Wr.cross(Ni).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wr.subVectors(this.c,this.b),Ni.subVectors(this.a,this.b),Wr.cross(Ni).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return sn.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return sn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Pa.subVectors(i,r),Ia.subVectors(s,r),Sg.subVectors(e,r);const u=Pa.dot(Sg),f=Ia.dot(Sg);if(u<=0&&f<=0)return t.copy(r);Eg.subVectors(e,i);const h=Pa.dot(Eg),p=Ia.dot(Eg);if(h>=0&&p<=h)return t.copy(i);const d=u*p-h*f;if(d<=0&&u>=0&&h<=0)return o=u/(u-h),t.copy(r).addScaledVector(Pa,o);Tg.subVectors(e,s);const m=Pa.dot(Tg),v=Ia.dot(Tg);if(v>=0&&m<=v)return t.copy(s);const x=m*f-u*v;if(x<=0&&f>=0&&v<=0)return a=f/(f-v),t.copy(r).addScaledVector(Ia,a);const y=h*v-m*p;if(y<=0&&p-h>=0&&m-v>=0)return BA.subVectors(s,i),a=(p-h)/(p-h+(m-v)),t.copy(i).addScaledVector(BA,a);const _=1/(y+x+d);return o=x*_,a=d*_,t.copy(r).addScaledVector(Pa,o).addScaledVector(Ia,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let fL=0;class Wt extends Zi{constructor(){super();Object.defineProperty(this,"id",{value:fL++}),this.uuid=pr(),this.name="",this.type="Material",this.fog=!0,this.blending=zo,this.side=Ks,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Dv,this.blendDst=Fv,this.blendEquation=zi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Zh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=UE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Th,this.stencilZFail=Th,this.stencilZPass=Th,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Pv;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==zo&&(r.blending=this.blending),this.side!==Ks&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const u=s[a];delete u.metadata,o.push(u)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Wt.prototype.isMaterial=!0;Wt.fromType=function(){return null};class nr extends Wt{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}nr.prototype.isMeshBasicMaterial=!0;const fn=new I,bd=new de;class pt{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=Al,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Ae),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new de),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new I),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Rt),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)bd.fromBufferAttribute(this,t),bd.applyMatrix3(e),this.setXY(t,bd.x,bd.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)fn.fromBufferAttribute(this,t),fn.applyMatrix3(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)fn.fromBufferAttribute(this,t),fn.applyMatrix4(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fn.fromBufferAttribute(this,t),fn.applyNormalMatrix(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fn.fromBufferAttribute(this,t),fn.transformDirection(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Al&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}pt.prototype.isBufferAttribute=!0;class KE extends pt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class XE extends pt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class QE extends pt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class YE extends pt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Ap extends pt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class qE extends pt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class wp extends pt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class ZE extends pt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}ZE.prototype.isFloat16BufferAttribute=!0;class ze extends pt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class $E extends pt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let dL=0;const Tr=new Ge,Cg=new mt,Da=new I,fr=new lr,Uu=new lr,xn=new I;class Ye extends Zi{constructor(){super();Object.defineProperty(this,"id",{value:dL++}),this.uuid=pr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zE(e)?wp:Ap)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new gn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Tr.makeRotationFromQuaternion(e),this.applyMatrix4(Tr),this}rotateX(e){return Tr.makeRotationX(e),this.applyMatrix4(Tr),this}rotateY(e){return Tr.makeRotationY(e),this.applyMatrix4(Tr),this}rotateZ(e){return Tr.makeRotationZ(e),this.applyMatrix4(Tr),this}translate(e,t,r){return Tr.makeTranslation(e,t,r),this.applyMatrix4(Tr),this}scale(e,t,r){return Tr.makeScale(e,t,r),this.applyMatrix4(Tr),this}lookAt(e){return Cg.lookAt(e),Cg.updateMatrix(),this.applyMatrix4(Cg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Da).negate(),this.translate(Da.x,Da.y,Da.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ze(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new I(-1/0,-1/0,-1/0),new I(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];fr.setFromBufferAttribute(s),this.morphTargetsRelative?(xn.addVectors(this.boundingBox.min,fr.min),this.boundingBox.expandByPoint(xn),xn.addVectors(this.boundingBox.max,fr.max),this.boundingBox.expandByPoint(xn)):(this.boundingBox.expandByPoint(fr.min),this.boundingBox.expandByPoint(fr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new I,1/0);return}if(e){const r=this.boundingSphere.center;if(fr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Uu.setFromBufferAttribute(a),this.morphTargetsRelative?(xn.addVectors(fr.min,Uu.min),fr.expandByPoint(xn),xn.addVectors(fr.max,Uu.max),fr.expandByPoint(xn)):(fr.expandByPoint(Uu.min),fr.expandByPoint(Uu.max))}fr.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],u=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)xn.fromBufferAttribute(a,f),u&&(Da.fromBufferAttribute(e,f),xn.add(Da)),i=Math.max(i,r.distanceToSquared(xn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pt(new Float32Array(4*a),4));const u=this.getAttribute("tangent").array,f=[],h=[];for(let G=0;G<a;G++)f[G]=new I,h[G]=new I;const p=new I,d=new I,m=new I,v=new de,x=new de,y=new de,_=new I,M=new I;function A(G,b,P){p.fromArray(i,G*3),d.fromArray(i,b*3),m.fromArray(i,P*3),v.fromArray(o,G*2),x.fromArray(o,b*2),y.fromArray(o,P*2),d.sub(p),m.sub(p),x.sub(v),y.sub(v);const W=1/(x.x*y.y-y.x*x.y);!isFinite(W)||(_.copy(d).multiplyScalar(y.y).addScaledVector(m,-x.y).multiplyScalar(W),M.copy(m).multiplyScalar(x.x).addScaledVector(d,-y.x).multiplyScalar(W),f[G].add(_),f[b].add(_),f[P].add(_),h[G].add(M),h[b].add(M),h[P].add(M))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let G=0,b=S.length;G<b;++G){const P=S[G],W=P.start,z=P.count;for(let K=W,X=W+z;K<X;K+=3)A(r[K+0],r[K+1],r[K+2])}const T=new I,C=new I,B=new I,L=new I;function F(G){B.fromArray(s,G*3),L.copy(B);const b=f[G];T.copy(b),T.sub(B.multiplyScalar(B.dot(b))).normalize(),C.crossVectors(L,b);const W=C.dot(h[G])<0?-1:1;u[G*4]=T.x,u[G*4+1]=T.y,u[G*4+2]=T.z,u[G*4+3]=W}for(let G=0,b=S.length;G<b;++G){const P=S[G],W=P.start,z=P.count;for(let K=W,X=W+z;K<X;K+=3)F(r[K+0]),F(r[K+1]),F(r[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new pt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,m=r.count;d<m;d++)r.setXYZ(d,0,0,0);const i=new I,s=new I,o=new I,a=new I,u=new I,f=new I,h=new I,p=new I;if(e)for(let d=0,m=e.count;d<m;d+=3){const v=e.getX(d+0),x=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,y),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),a.fromBufferAttribute(r,v),u.fromBufferAttribute(r,x),f.fromBufferAttribute(r,y),a.add(h),u.add(h),f.add(h),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(x,u.x,u.y,u.z),r.setXYZ(y,f.x,f.y,f.z)}else for(let d=0,m=t.count;d<m;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),r.setXYZ(d+0,h.x,h.y,h.z),r.setXYZ(d+1,h.x,h.y,h.z),r.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const o=r[i].array,a=e.attributes[i],u=a.array,f=a.itemSize*t,h=Math.min(u.length,o.length-f);for(let p=0,d=f;p<h;p++,d++)o[d]=u[p]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xn.fromBufferAttribute(e,t),xn.normalize(),e.setXYZ(t,xn.x,xn.y,xn.z)}toNonIndexed(){function e(a,u){const f=a.array,h=a.itemSize,p=a.normalized,d=new f.constructor(u.length*h);let m=0,v=0;for(let x=0,y=u.length;x<y;x++){a.isInterleavedBufferAttribute?m=u[x]*a.data.stride+a.offset:m=u[x]*h;for(let _=0;_<h;_++)d[v++]=f[m++]}return new pt(d,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ye,r=this.index.array,i=this.attributes;for(const a in i){const u=i[a],f=e(u,r);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const u=[],f=s[a];for(let h=0,p=f.length;h<p;h++){const d=f[h],m=e(d,r);u.push(m)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,u=o.length;a<u;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const u in r){const f=r[u];e.data.attributes[u]=f.toJSON(e.data)}const i={};let s=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],h=[];for(let p=0,d=f.length;p<d;p++){const m=f[p];h.push(m.toJSON(e.data))}h.length>0&&(i[u]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const f in i){const h=i[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],p=s[f];for(let d=0,m=p.length;d<m;d++)h.push(p[d].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const p=o[f];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ye.prototype.isBufferGeometry=!0;const LA=new Ge,Fa=new oo,bg=new $i,gs=new I,ys=new I,vs=new I,Rg=new I,Bg=new I,Lg=new I,Rd=new I,Bd=new I,Ld=new I,Pd=new de,Id=new de,Dd=new de,Pg=new I,Fd=new I;class Qt extends mt{constructor(e=new Ye,t=new nr){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),bg.copy(r.boundingSphere),bg.applyMatrix4(s),e.ray.intersectsSphere(bg)===!1)||(LA.copy(s).invert(),Fa.copy(e.ray).applyMatrix4(LA),r.boundingBox!==null&&Fa.intersectsBox(r.boundingBox)===!1))return;let o;if(r.isBufferGeometry){const a=r.index,u=r.attributes.position,f=r.morphAttributes.position,h=r.morphTargetsRelative,p=r.attributes.uv,d=r.attributes.uv2,m=r.groups,v=r.drawRange;if(a!==null)if(Array.isArray(i))for(let x=0,y=m.length;x<y;x++){const _=m[x],M=i[_.materialIndex],A=Math.max(_.start,v.start),S=Math.min(a.count,Math.min(_.start+_.count,v.start+v.count));for(let T=A,C=S;T<C;T+=3){const B=a.getX(T),L=a.getX(T+1),F=a.getX(T+2);o=Nd(this,M,e,Fa,u,f,h,p,d,B,L,F),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const x=Math.max(0,v.start),y=Math.min(a.count,v.start+v.count);for(let _=x,M=y;_<M;_+=3){const A=a.getX(_),S=a.getX(_+1),T=a.getX(_+2);o=Nd(this,i,e,Fa,u,f,h,p,d,A,S,T),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}else if(u!==void 0)if(Array.isArray(i))for(let x=0,y=m.length;x<y;x++){const _=m[x],M=i[_.materialIndex],A=Math.max(_.start,v.start),S=Math.min(u.count,Math.min(_.start+_.count,v.start+v.count));for(let T=A,C=S;T<C;T+=3){const B=T,L=T+1,F=T+2;o=Nd(this,M,e,Fa,u,f,h,p,d,B,L,F),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const x=Math.max(0,v.start),y=Math.min(u.count,v.start+v.count);for(let _=x,M=y;_<M;_+=3){const A=_,S=_+1,T=_+2;o=Nd(this,i,e,Fa,u,f,h,p,d,A,S,T),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Qt.prototype.isMesh=!0;function hL(n,e,t,r,i,s,o,a){let u;if(e.side===sr?u=r.intersectTriangle(o,s,i,!0,a):u=r.intersectTriangle(i,s,o,e.side!==Xs,a),u===null)return null;Fd.copy(a),Fd.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Fd);return f<t.near||f>t.far?null:{distance:f,point:Fd.clone(),object:n}}function Nd(n,e,t,r,i,s,o,a,u,f,h,p){gs.fromBufferAttribute(i,f),ys.fromBufferAttribute(i,h),vs.fromBufferAttribute(i,p);const d=n.morphTargetInfluences;if(s&&d){Rd.set(0,0,0),Bd.set(0,0,0),Ld.set(0,0,0);for(let v=0,x=s.length;v<x;v++){const y=d[v],_=s[v];y!==0&&(Rg.fromBufferAttribute(_,f),Bg.fromBufferAttribute(_,h),Lg.fromBufferAttribute(_,p),o?(Rd.addScaledVector(Rg,y),Bd.addScaledVector(Bg,y),Ld.addScaledVector(Lg,y)):(Rd.addScaledVector(Rg.sub(gs),y),Bd.addScaledVector(Bg.sub(ys),y),Ld.addScaledVector(Lg.sub(vs),y)))}gs.add(Rd),ys.add(Bd),vs.add(Ld)}n.isSkinnedMesh&&(n.boneTransform(f,gs),n.boneTransform(h,ys),n.boneTransform(p,vs));const m=hL(n,e,t,r,gs,ys,vs,Pg);if(m){a&&(Pd.fromBufferAttribute(a,f),Id.fromBufferAttribute(a,h),Dd.fromBufferAttribute(a,p),m.uv=sn.getUV(Pg,gs,ys,vs,Pd,Id,Dd,new de)),u&&(Pd.fromBufferAttribute(u,f),Id.fromBufferAttribute(u,h),Dd.fromBufferAttribute(u,p),m.uv2=sn.getUV(Pg,gs,ys,vs,Pd,Id,Dd,new de));const v={a:f,b:h,c:p,normal:new I,materialIndex:0};sn.getNormal(gs,ys,vs,v.normal),m.face=v}return m}class _i extends Ye{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const u=[],f=[],h=[],p=[];let d=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(u),this.setAttribute("position",new ze(f,3)),this.setAttribute("normal",new ze(h,3)),this.setAttribute("uv",new ze(p,2));function v(x,y,_,M,A,S,T,C,B,L,F){const G=S/B,b=T/L,P=S/2,W=T/2,z=C/2,K=B+1,X=L+1;let q=0,V=0;const re=new I;for(let le=0;le<X;le++){const J=le*b-W;for(let Y=0;Y<K;Y++){const he=Y*G-P;re[x]=he*M,re[y]=J*A,re[_]=z,f.push(re.x,re.y,re.z),re[x]=0,re[y]=0,re[_]=C>0?1:-1,h.push(re.x,re.y,re.z),p.push(Y/B),p.push(1-le/L),q+=1}}for(let le=0;le<L;le++)for(let J=0;J<B;J++){const Y=d+J+K*le,he=d+J+K*(le+1),Se=d+(J+1)+K*(le+1),we=d+(J+1)+K*le;u.push(Y,he,we),u.push(he,Se,we),V+=6}a.addGroup(m,V,F),m+=V,d+=q}}static fromJSON(e){return new _i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sl(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Fn(n){const e={};for(let t=0;t<n.length;t++){const r=Sl(n[t]);for(const i in r)e[i]=r[i]}return e}const Uo={clone:Sl,merge:Fn};var pL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bn extends Wt{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=pL,this.fragmentShader=mL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Bn.prototype.isShaderMaterial=!0;class Yo extends mt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Ge,this.projectionMatrix=new Ge,this.projectionMatrixInverse=new Ge}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Yo.prototype.isCamera=!0;class kt extends Yo{constructor(e=50,t=1,r=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Oc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Oc*2*Math.atan(Math.tan(Vo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vo*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,f=o.fullHeight;s+=o.offsetX*i/u,t-=o.offsetY*r/f,i*=o.width/u,r*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}kt.prototype.isPerspectiveCamera=!0;const Na=90,Oa=1;class Sp extends mt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new kt(Na,Oa,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new I(1,0,0)),this.add(i);const s=new kt(Na,Oa,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new I(-1,0,0)),this.add(s);const o=new kt(Na,Oa,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new I(0,1,0)),this.add(o);const a=new kt(Na,Oa,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new I(0,-1,0)),this.add(a);const u=new kt(Na,Oa,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new I(0,0,1)),this.add(u);const f=new kt(Na,Oa,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new I(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,u,f]=this.children,h=e.getRenderTarget(),p=e.outputEncoding,d=e.toneMapping,m=e.xr.enabled;e.outputEncoding=or,e.toneMapping=qr,e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5),e.render(t,f),e.setRenderTarget(h),e.outputEncoding=p,e.toneMapping=d,e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class Ql extends Yt{constructor(e,t,r,i,s,o,a,u,f,h){e=e!==void 0?e:[],t=t!==void 0?t:Ki;super(e,t,r,i,s,o,a,u,f,h);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Ql.prototype.isCubeTexture=!0;class ef extends _n{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ql(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Dt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new _i(5,5,5),s=new Bn({name:"CubemapFromEquirect",uniforms:Sl(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:sr,blending:bn});s.uniforms.tEquirect.value=t;const o=new Qt(i,s),a=t.minFilter;return t.minFilter===qi&&(t.minFilter=Dt),new Sp(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}ef.prototype.isWebGLCubeRenderTarget=!0;const Ig=new I,gL=new I,yL=new gn;class ci{constructor(e=new I(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Ig.subVectors(r,t).cross(gL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Ig),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||yL.getNormalMatrix(e),i=this.coplanarPoint(Ig).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}ci.prototype.isPlane=!0;const ka=new $i,Od=new I;class tf{constructor(e=new ci,t=new ci,r=new ci,i=new ci,s=new ci,o=new ci){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],u=r[4],f=r[5],h=r[6],p=r[7],d=r[8],m=r[9],v=r[10],x=r[11],y=r[12],_=r[13],M=r[14],A=r[15];return t[0].setComponents(a-i,p-u,x-d,A-y).normalize(),t[1].setComponents(a+i,p+u,x+d,A+y).normalize(),t[2].setComponents(a+s,p+f,x+m,A+_).normalize(),t[3].setComponents(a-s,p-f,x-m,A-_).normalize(),t[4].setComponents(a-o,p-h,x-v,A-M).normalize(),t[5].setComponents(a+o,p+h,x+v,A+M).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),ka.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}intersectsSprite(e){return ka.center.set(0,0,0),ka.radius=.7071067811865476,ka.applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Od.x=i.normal.x>0?e.max.x:e.min.x,Od.y=i.normal.y>0?e.max.y:e.min.y,Od.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Od)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function eT(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function vL(n,e){const t=e.isWebGL2,r=new WeakMap;function i(f,h){const p=f.array,d=f.usage,m=n.createBuffer();n.bindBuffer(h,m),n.bufferData(h,p,d),f.onUploadCallback();let v;if(p instanceof Float32Array)v=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)v=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=5123;else if(p instanceof Int16Array)v=5122;else if(p instanceof Uint32Array)v=5125;else if(p instanceof Int32Array)v=5124;else if(p instanceof Int8Array)v=5120;else if(p instanceof Uint8Array)v=5121;else if(p instanceof Uint8ClampedArray)v=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:m,type:v,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function s(f,h,p){const d=h.array,m=h.updateRange;n.bindBuffer(p,f),m.count===-1?n.bufferSubData(p,0,d):(t?n.bufferSubData(p,m.offset*d.BYTES_PER_ELEMENT,d,m.offset,m.count):n.bufferSubData(p,m.offset*d.BYTES_PER_ELEMENT,d.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),r.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=r.get(f);h&&(n.deleteBuffer(h.buffer),r.delete(f))}function u(f,h){if(f.isGLBufferAttribute){const d=r.get(f);(!d||d.version<f.version)&&r.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=r.get(f);p===void 0?r.set(f,i(f,h)):p.version<f.version&&(s(p.buffer,f,h),p.version=f.version)}return{get:o,remove:a,update:u}}class Zs extends Ye{constructor(e=1,t=1,r=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),u=Math.floor(i),f=a+1,h=u+1,p=e/a,d=t/u,m=[],v=[],x=[],y=[];for(let _=0;_<h;_++){const M=_*d-o;for(let A=0;A<f;A++){const S=A*p-s;v.push(S,-M,0),x.push(0,0,1),y.push(A/a),y.push(1-_/u)}}for(let _=0;_<u;_++)for(let M=0;M<a;M++){const A=M+f*_,S=M+f*(_+1),T=M+1+f*(_+1),C=M+1+f*_;m.push(A,S,C),m.push(S,T,C)}this.setIndex(m),this.setAttribute("position",new ze(v,3)),this.setAttribute("normal",new ze(x,3)),this.setAttribute("uv",new ze(y,2))}static fromJSON(e){return new Zs(e.width,e.height,e.widthSegments,e.heightSegments)}}var xL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,_L=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ML=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,AL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,wL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,SL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,EL="vec3 transformed = vec3( position );",TL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,CL=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,bL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,RL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,BL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,PL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,DL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,NL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,OL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,kL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,GL=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,zL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,VL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WL="gl_FragColor = linearToOutputTexel( gl_FragColor );",JL=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,KL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,XL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,QL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$L=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,e2=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,t2=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,n2=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,r2=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,i2=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,s2=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,o2=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,a2=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,l2=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,u2=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,c2=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,f2=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,d2=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,h2=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,p2=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,m2=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,g2=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,y2=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,v2=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,x2=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,M2=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,A2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,w2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,S2=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,E2=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,T2=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,C2=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,b2=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,R2=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,B2=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,L2=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,P2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,I2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,D2=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,F2=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,N2=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,O2=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,k2=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,G2=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,U2=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,H2=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,z2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,V2=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,W2=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,J2=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,j2=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,K2=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,X2=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Q2=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Y2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,q2=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Z2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,$2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,iP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sP=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,oP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,aP=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,lP=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uP=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,cP=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,fP=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,dP=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,hP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mP=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,gP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yP=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vP=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_P=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,MP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,AP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wP=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,SP=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EP=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TP=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CP=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bP=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RP=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BP=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LP=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PP=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,IP=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,DP=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FP=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NP=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OP=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kP=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GP=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UP=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,HP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zP=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VP=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,WP=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ht={alphamap_fragment:xL,alphamap_pars_fragment:_L,alphatest_fragment:ML,alphatest_pars_fragment:AL,aomap_fragment:wL,aomap_pars_fragment:SL,begin_vertex:EL,beginnormal_vertex:TL,bsdfs:CL,bumpmap_pars_fragment:bL,clipping_planes_fragment:RL,clipping_planes_pars_fragment:BL,clipping_planes_pars_vertex:LL,clipping_planes_vertex:PL,color_fragment:IL,color_pars_fragment:DL,color_pars_vertex:FL,color_vertex:NL,common:OL,cube_uv_reflection_fragment:kL,defaultnormal_vertex:GL,displacementmap_pars_vertex:UL,displacementmap_vertex:HL,emissivemap_fragment:zL,emissivemap_pars_fragment:VL,encodings_fragment:WL,encodings_pars_fragment:JL,envmap_fragment:jL,envmap_common_pars_fragment:KL,envmap_pars_fragment:XL,envmap_pars_vertex:QL,envmap_physical_pars_fragment:o2,envmap_vertex:YL,fog_vertex:qL,fog_pars_vertex:ZL,fog_fragment:$L,fog_pars_fragment:e2,gradientmap_pars_fragment:t2,lightmap_fragment:n2,lightmap_pars_fragment:r2,lights_lambert_vertex:i2,lights_pars_begin:s2,lights_toon_fragment:a2,lights_toon_pars_fragment:l2,lights_phong_fragment:u2,lights_phong_pars_fragment:c2,lights_physical_fragment:f2,lights_physical_pars_fragment:d2,lights_fragment_begin:h2,lights_fragment_maps:p2,lights_fragment_end:m2,logdepthbuf_fragment:g2,logdepthbuf_pars_fragment:y2,logdepthbuf_pars_vertex:v2,logdepthbuf_vertex:x2,map_fragment:_2,map_pars_fragment:M2,map_particle_fragment:A2,map_particle_pars_fragment:w2,metalnessmap_fragment:S2,metalnessmap_pars_fragment:E2,morphcolor_vertex:T2,morphnormal_vertex:C2,morphtarget_pars_vertex:b2,morphtarget_vertex:R2,normal_fragment_begin:B2,normal_fragment_maps:L2,normal_pars_fragment:P2,normal_pars_vertex:I2,normal_vertex:D2,normalmap_pars_fragment:F2,clearcoat_normal_fragment_begin:N2,clearcoat_normal_fragment_maps:O2,clearcoat_pars_fragment:k2,output_fragment:G2,packing:U2,premultiplied_alpha_fragment:H2,project_vertex:z2,dithering_fragment:V2,dithering_pars_fragment:W2,roughnessmap_fragment:J2,roughnessmap_pars_fragment:j2,shadowmap_pars_fragment:K2,shadowmap_pars_vertex:X2,shadowmap_vertex:Q2,shadowmask_pars_fragment:Y2,skinbase_vertex:q2,skinning_pars_vertex:Z2,skinning_vertex:$2,skinnormal_vertex:eP,specularmap_fragment:tP,specularmap_pars_fragment:nP,tonemapping_fragment:rP,tonemapping_pars_fragment:iP,transmission_fragment:sP,transmission_pars_fragment:oP,uv_pars_fragment:aP,uv_pars_vertex:lP,uv_vertex:uP,uv2_pars_fragment:cP,uv2_pars_vertex:fP,uv2_vertex:dP,worldpos_vertex:hP,background_vert:pP,background_frag:mP,cube_vert:gP,cube_frag:yP,depth_vert:vP,depth_frag:xP,distanceRGBA_vert:_P,distanceRGBA_frag:MP,equirect_vert:AP,equirect_frag:wP,linedashed_vert:SP,linedashed_frag:EP,meshbasic_vert:TP,meshbasic_frag:CP,meshlambert_vert:bP,meshlambert_frag:RP,meshmatcap_vert:BP,meshmatcap_frag:LP,meshnormal_vert:PP,meshnormal_frag:IP,meshphong_vert:DP,meshphong_frag:FP,meshphysical_vert:NP,meshphysical_frag:OP,meshtoon_vert:kP,meshtoon_frag:GP,points_vert:UP,points_frag:HP,shadow_vert:zP,shadow_frag:VP,sprite_vert:WP,sprite_frag:JP},Re={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gn},uv2Transform:{value:new gn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gn}}},Qr={basic:{uniforms:Fn([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:Fn([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.fog,Re.lights,{emissive:{value:new Ae(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:Fn([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:Fn([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:Fn([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Ae(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:Fn([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:Fn([Re.points,Re.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:Fn([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:Fn([Re.common,Re.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:Fn([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:Fn([Re.sprite,Re.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},cube:{uniforms:Fn([Re.envmap,{opacity:{value:1}}]),vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:Fn([Re.common,Re.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:Fn([Re.lights,Re.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};Qr.physical={uniforms:Fn([Qr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new de(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};function jP(n,e,t,r,i,s){const o=new Ae(0);let a=i===!0?0:1,u,f,h=null,p=0,d=null;function m(x,y){let _=!1,M=y.isScene===!0?y.background:null;M&&M.isTexture&&(M=e.get(M));const A=n.xr,S=A.getSession&&A.getSession();S&&S.environmentBlendMode==="additive"&&(M=null),M===null?v(o,a):M&&M.isColor&&(v(M,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||M.mapping===Kl)?(f===void 0&&(f=new Qt(new _i(1,1,1),new Bn({name:"BackgroundCubeMaterial",uniforms:Sl(Qr.cube.uniforms),vertexShader:Qr.cube.vertexShader,fragmentShader:Qr.cube.fragmentShader,side:sr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(T,C,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=M,f.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,(h!==M||p!==M.version||d!==n.toneMapping)&&(f.material.needsUpdate=!0,h=M,p=M.version,d=n.toneMapping),x.unshift(f,f.geometry,f.material,0,0,null)):M&&M.isTexture&&(u===void 0&&(u=new Qt(new Zs(2,2),new Bn({name:"BackgroundMaterial",uniforms:Sl(Qr.background.uniforms),vertexShader:Qr.background.vertexShader,fragmentShader:Qr.background.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=M,M.matrixAutoUpdate===!0&&M.updateMatrix(),u.material.uniforms.uvTransform.value.copy(M.matrix),(h!==M||p!==M.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=M,p=M.version,d=n.toneMapping),x.unshift(u,u.geometry,u.material,0,0,null))}function v(x,y){t.buffers.color.setClear(x.r,x.g,x.b,y,s)}return{getClearColor:function(){return o},setClearColor:function(x,y=1){o.set(x),a=y,v(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(x){a=x,v(o,a)},render:m}}function KP(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},u=y(null);let f=u,h=!1;function p(z,K,X,q,V){let re=!1;if(o){const le=x(q,X,K);f!==le&&(f=le,m(f.object)),re=_(q,V),re&&M(q,V)}else{const le=K.wireframe===!0;(f.geometry!==q.id||f.program!==X.id||f.wireframe!==le)&&(f.geometry=q.id,f.program=X.id,f.wireframe=le,re=!0)}z.isInstancedMesh===!0&&(re=!0),V!==null&&t.update(V,34963),(re||h)&&(h=!1,L(z,K,X,q),V!==null&&n.bindBuffer(34963,t.get(V).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return r.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return r.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function x(z,K,X){const q=X.wireframe===!0;let V=a[z.id];V===void 0&&(V={},a[z.id]=V);let re=V[K.id];re===void 0&&(re={},V[K.id]=re);let le=re[q];return le===void 0&&(le=y(d()),re[q]=le),le}function y(z){const K=[],X=[],q=[];for(let V=0;V<i;V++)K[V]=0,X[V]=0,q[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:X,attributeDivisors:q,object:z,attributes:{},index:null}}function _(z,K){const X=f.attributes,q=z.attributes;let V=0;for(const re in q){const le=X[re],J=q[re];if(le===void 0||le.attribute!==J||le.data!==J.data)return!0;V++}return f.attributesNum!==V||f.index!==K}function M(z,K){const X={},q=z.attributes;let V=0;for(const re in q){const le=q[re],J={};J.attribute=le,le.data&&(J.data=le.data),X[re]=J,V++}f.attributes=X,f.attributesNum=V,f.index=K}function A(){const z=f.newAttributes;for(let K=0,X=z.length;K<X;K++)z[K]=0}function S(z){T(z,0)}function T(z,K){const X=f.newAttributes,q=f.enabledAttributes,V=f.attributeDivisors;X[z]=1,q[z]===0&&(n.enableVertexAttribArray(z),q[z]=1),V[z]!==K&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,K),V[z]=K)}function C(){const z=f.newAttributes,K=f.enabledAttributes;for(let X=0,q=K.length;X<q;X++)K[X]!==z[X]&&(n.disableVertexAttribArray(X),K[X]=0)}function B(z,K,X,q,V,re){r.isWebGL2===!0&&(X===5124||X===5125)?n.vertexAttribIPointer(z,K,X,V,re):n.vertexAttribPointer(z,K,X,q,V,re)}function L(z,K,X,q){if(r.isWebGL2===!1&&(z.isInstancedMesh||q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const V=q.attributes,re=X.getAttributes(),le=K.defaultAttributeValues;for(const J in re){const Y=re[J];if(Y.location>=0){let he=V[J];if(he===void 0&&(J==="instanceMatrix"&&z.instanceMatrix&&(he=z.instanceMatrix),J==="instanceColor"&&z.instanceColor&&(he=z.instanceColor)),he!==void 0){const Se=he.normalized,we=he.itemSize,te=t.get(he);if(te===void 0)continue;const Ke=te.buffer,Ne=te.type,Fe=te.bytesPerElement;if(he.isInterleavedBufferAttribute){const ve=he.data,qe=ve.stride,ue=he.offset;if(ve.isInstancedInterleavedBuffer){for(let ce=0;ce<Y.locationSize;ce++)T(Y.location+ce,ve.meshPerAttribute);z.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let ce=0;ce<Y.locationSize;ce++)S(Y.location+ce);n.bindBuffer(34962,Ke);for(let ce=0;ce<Y.locationSize;ce++)B(Y.location+ce,we/Y.locationSize,Ne,Se,qe*Fe,(ue+we/Y.locationSize*ce)*Fe)}else{if(he.isInstancedBufferAttribute){for(let ve=0;ve<Y.locationSize;ve++)T(Y.location+ve,he.meshPerAttribute);z.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let ve=0;ve<Y.locationSize;ve++)S(Y.location+ve);n.bindBuffer(34962,Ke);for(let ve=0;ve<Y.locationSize;ve++)B(Y.location+ve,we/Y.locationSize,Ne,Se,we*Fe,we/Y.locationSize*ve*Fe)}}else if(le!==void 0){const Se=le[J];if(Se!==void 0)switch(Se.length){case 2:n.vertexAttrib2fv(Y.location,Se);break;case 3:n.vertexAttrib3fv(Y.location,Se);break;case 4:n.vertexAttrib4fv(Y.location,Se);break;default:n.vertexAttrib1fv(Y.location,Se)}}}}C()}function F(){P();for(const z in a){const K=a[z];for(const X in K){const q=K[X];for(const V in q)v(q[V].object),delete q[V];delete K[X]}delete a[z]}}function G(z){if(a[z.id]===void 0)return;const K=a[z.id];for(const X in K){const q=K[X];for(const V in q)v(q[V].object),delete q[V];delete K[X]}delete a[z.id]}function b(z){for(const K in a){const X=a[K];if(X[z.id]===void 0)continue;const q=X[z.id];for(const V in q)v(q[V].object),delete q[V];delete X[z.id]}}function P(){W(),h=!0,f!==u&&(f=u,m(f.object))}function W(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:P,resetDefaultState:W,dispose:F,releaseStatesOfGeometry:G,releaseStatesOfProgram:b,initAttributes:A,enableAttribute:S,disableUnusedAttributes:C}}function XP(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}function a(f,h){n.drawArrays(s,f,h),t.update(h,s,1)}function u(f,h,p){if(p===0)return;let d,m;if(i)d=n,m="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](s,f,h,p),t.update(h,s,p)}this.setMode=o,this.render=a,this.renderInstances=u}function QP(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(B){if(B==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const u=s(a);u!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",u,"instead."),a=u);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,p=n.getParameter(34930),d=n.getParameter(35660),m=n.getParameter(3379),v=n.getParameter(34076),x=n.getParameter(34921),y=n.getParameter(36347),_=n.getParameter(36348),M=n.getParameter(36349),A=d>0,S=o||e.has("OES_texture_float"),T=A&&S,C=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:v,maxAttributes:x,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:M,vertexTextures:A,floatFragmentTextures:S,floatVertexTextures:T,maxSamples:C}}function YP(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new ci,a=new gn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,d,m){const v=p.length!==0||d||r!==0||i;return i=d,t=h(p,m,0),r=p.length,v},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,f()},this.setState=function(p,d,m){const v=p.clippingPlanes,x=p.clipIntersection,y=p.clipShadows,_=n.get(p);if(!i||v===null||v.length===0||s&&!y)s?h(null):f();else{const M=s?0:r,A=M*4;let S=_.clippingState||null;u.value=S,S=h(v,d,A,m);for(let T=0;T!==A;++T)S[T]=t[T];_.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=M}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(p,d,m,v){const x=p!==null?p.length:0;let y=null;if(x!==0){if(y=u.value,v!==!0||y===null){const _=m+x*4,M=d.matrixWorldInverse;a.getNormalMatrix(M),(y===null||y.length<_)&&(y=new Float32Array(_));for(let A=0,S=m;A!==x;++A,S+=4)o.copy(p[A]).applyMatrix4(M,a),o.normal.toArray(y,S),y[S+3]=o.constant}u.value=y,u.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function qP(n){let e=new WeakMap;function t(o,a){return a===vl?o.mapping=Ki:a===Ic&&(o.mapping=Qs),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===vl||a===Ic)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const f=new ef(u.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Zr extends Yo{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,u=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Zr.prototype.isOrthographicCamera=!0;const tl=4,PA=[.125,.215,.35,.446,.526,.582],Lo=20,Dg=new Zr,IA=new Ae;let Fg=null;const Ro=(1+Math.sqrt(5))/2,Ga=1/Ro,DA=[new I(1,1,1),new I(-1,1,1),new I(1,1,-1),new I(-1,1,-1),new I(0,Ro,Ga),new I(0,Ro,-Ga),new I(Ga,0,Ro),new I(-Ga,0,Ro),new I(Ro,Ga,0),new I(-Ro,Ga,0)];class yy{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Fg=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=OA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=NA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Fg),e.scissorTest=!1,kd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ki||e.mapping===Qs?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Fg=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:Dt,minFilter:Dt,generateMipmaps:!1,type:Br,format:dr,encoding:or,depthBuffer:!1},i=FA(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=FA(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ZP(s)),this._blurMaterial=$P(s,e,t)}return i}_compileMaterial(e){const t=new Qt(this._lodPlanes[0],e);this._renderer.compile(t,Dg)}_sceneToCubeUV(e,t,r,i){const a=new kt(90,1,t,r),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,d=h.toneMapping;h.getClearColor(IA),h.toneMapping=qr,h.autoClear=!1;const m=new nr({name:"PMREM.Background",side:sr,depthWrite:!1,depthTest:!1}),v=new Qt(new _i,m);let x=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,x=!0):(m.color.copy(IA),x=!0);for(let _=0;_<6;_++){const M=_%3;M===0?(a.up.set(0,u[_],0),a.lookAt(f[_],0,0)):M===1?(a.up.set(0,0,u[_]),a.lookAt(0,f[_],0)):(a.up.set(0,u[_],0),a.lookAt(0,0,f[_]));const A=this._cubeSize;kd(i,M*A,_>2?A:0,A,A),h.setRenderTarget(i),x&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=d,h.autoClear=p,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ki||e.mapping===Qs;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=OA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=NA());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Qt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const u=this._cubeSize;kd(t,0,0,3*u,2*u),r.setRenderTarget(t),r.render(o,Dg)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=DA[(i-1)%DA.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const u=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Qt(this._lodPlanes[i],f),d=f.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Lo-1),x=s/v,y=isFinite(s)?1+Math.floor(h*x):Lo;y>Lo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Lo}`);const _=[];let M=0;for(let B=0;B<Lo;++B){const L=B/x,F=Math.exp(-L*L/2);_.push(F),B===0?M+=F:B<y&&(M+=2*F)}for(let B=0;B<_.length;B++)_[B]=_[B]/M;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=_,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:A}=this;d.dTheta.value=v,d.mipInt.value=A-r;const S=this._sizeLods[i],T=3*S*(i>A-tl?i-A+tl:0),C=4*(this._cubeSize-S);kd(t,T,C,3*S,2*S),u.setRenderTarget(t),u.render(p,Dg)}}function ZP(n){const e=[],t=[],r=[];let i=n;const s=n-tl+1+PA.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let u=1/a;o>n-tl?u=PA[o-n+tl-1]:o===0&&(u=0),r.push(u);const f=1/(a-1),h=-f/2,p=1+f/2,d=[h,h,p,h,p,p,h,h,p,p,h,p],m=6,v=6,x=3,y=2,_=1,M=new Float32Array(x*v*m),A=new Float32Array(y*v*m),S=new Float32Array(_*v*m);for(let C=0;C<m;C++){const B=C%3*2/3-1,L=C>2?0:-1,F=[B,L,0,B+2/3,L,0,B+2/3,L+1,0,B,L,0,B+2/3,L+1,0,B,L+1,0];M.set(F,x*v*C),A.set(d,y*v*C);const G=[C,C,C,C,C,C];S.set(G,_*v*C)}const T=new Ye;T.setAttribute("position",new pt(M,x)),T.setAttribute("uv",new pt(A,y)),T.setAttribute("faceIndex",new pt(S,_)),e.push(T),i>tl&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function FA(n,e,t){const r=new _n(n,e,t);return r.texture.mapping=Kl,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function kd(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function $P(n,e,t){const r=new Float32Array(Lo),i=new I(0,1,0);return new Bn({name:"SphericalGaussianBlur",defines:{n:Lo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bn,depthTest:!1,depthWrite:!1})}function NA(){return new Bn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bn,depthTest:!1,depthWrite:!1})}function OA(){return new Bn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bn,depthTest:!1,depthWrite:!1})}function Wv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function e3(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const u=a.mapping,f=u===vl||u===Ic,h=u===Ki||u===Qs;if(f||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new yy(n)),p=f?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(f&&p&&p.height>0||h&&p&&i(p)){t===null&&(t=new yy(n));const d=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let u=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&u++;return u===f}function s(a){const u=a.target;u.removeEventListener("dispose",s);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function t3(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function n3(n,e,t,r){const i={},s=new WeakMap;function o(p){const d=p.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);d.removeEventListener("dispose",o),delete i[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(p,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function u(p){const d=p.attributes;for(const v in d)e.update(d[v],34962);const m=p.morphAttributes;for(const v in m){const x=m[v];for(let y=0,_=x.length;y<_;y++)e.update(x[y],34962)}}function f(p){const d=[],m=p.index,v=p.attributes.position;let x=0;if(m!==null){const M=m.array;x=m.version;for(let A=0,S=M.length;A<S;A+=3){const T=M[A+0],C=M[A+1],B=M[A+2];d.push(T,C,C,B,B,T)}}else{const M=v.array;x=v.version;for(let A=0,S=M.length/3-1;A<S;A+=3){const T=A+0,C=A+1,B=A+2;d.push(T,C,C,B,B,T)}}const y=new(zE(d)?wp:Ap)(d,1);y.version=x;const _=s.get(p);_&&e.remove(_),s.set(p,y)}function h(p){const d=s.get(p);if(d){const m=p.index;m!==null&&d.version<m.version&&f(p)}else f(p);return s.get(p)}return{get:a,update:u,getWireframeAttribute:h}}function r3(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,u;function f(d){a=d.type,u=d.bytesPerElement}function h(d,m){n.drawElements(s,m,a,d*u),t.update(m,s,1)}function p(d,m,v){if(v===0)return;let x,y;if(i)x=n,y="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](s,m,a,d*u,v),t.update(m,s,v)}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=p}function i3(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function s3(n,e){return n[0]-e[0]}function o3(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Ng(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function a3(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Rt,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function u(f,h,p,d){const m=f.morphTargetInfluences;if(e.isWebGL2===!0){const v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,x=v!==void 0?v.length:0;let y=s.get(h);if(y===void 0||y.count!==x){let K=function(){W.dispose(),s.delete(h),h.removeEventListener("dispose",K)};y!==void 0&&y.texture.dispose();const A=h.morphAttributes.position!==void 0,S=h.morphAttributes.normal!==void 0,T=h.morphAttributes.color!==void 0,C=h.morphAttributes.position||[],B=h.morphAttributes.normal||[],L=h.morphAttributes.color||[];let F=0;A===!0&&(F=1),S===!0&&(F=2),T===!0&&(F=3);let G=h.attributes.position.count*F,b=1;G>e.maxTextureSize&&(b=Math.ceil(G/e.maxTextureSize),G=e.maxTextureSize);const P=new Float32Array(G*b*4*x),W=new Xl(P,G,b,x);W.type=tr,W.needsUpdate=!0;const z=F*4;for(let X=0;X<x;X++){const q=C[X],V=B[X],re=L[X],le=G*b*4*X;for(let J=0;J<q.count;J++){const Y=J*z;A===!0&&(o.fromBufferAttribute(q,J),q.normalized===!0&&Ng(o,q),P[le+Y+0]=o.x,P[le+Y+1]=o.y,P[le+Y+2]=o.z,P[le+Y+3]=0),S===!0&&(o.fromBufferAttribute(V,J),V.normalized===!0&&Ng(o,V),P[le+Y+4]=o.x,P[le+Y+5]=o.y,P[le+Y+6]=o.z,P[le+Y+7]=0),T===!0&&(o.fromBufferAttribute(re,J),re.normalized===!0&&Ng(o,re),P[le+Y+8]=o.x,P[le+Y+9]=o.y,P[le+Y+10]=o.z,P[le+Y+11]=re.itemSize===4?o.w:1)}}y={count:x,texture:W,size:new de(G,b)},s.set(h,y),h.addEventListener("dispose",K)}let _=0;for(let A=0;A<m.length;A++)_+=m[A];const M=h.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",M),d.getUniforms().setValue(n,"morphTargetInfluences",m),d.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const v=m===void 0?0:m.length;let x=r[h.id];if(x===void 0||x.length!==v){x=[];for(let S=0;S<v;S++)x[S]=[S,0];r[h.id]=x}for(let S=0;S<v;S++){const T=x[S];T[0]=S,T[1]=m[S]}x.sort(o3);for(let S=0;S<8;S++)S<v&&x[S][1]?(a[S][0]=x[S][0],a[S][1]=x[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(s3);const y=h.morphAttributes.position,_=h.morphAttributes.normal;let M=0;for(let S=0;S<8;S++){const T=a[S],C=T[0],B=T[1];C!==Number.MAX_SAFE_INTEGER&&B?(y&&h.getAttribute("morphTarget"+S)!==y[C]&&h.setAttribute("morphTarget"+S,y[C]),_&&h.getAttribute("morphNormal"+S)!==_[C]&&h.setAttribute("morphNormal"+S,_[C]),i[S]=B,M+=B):(y&&h.hasAttribute("morphTarget"+S)===!0&&h.deleteAttribute("morphTarget"+S),_&&h.hasAttribute("morphNormal"+S)===!0&&h.deleteAttribute("morphNormal"+S),i[S]=0)}const A=h.morphTargetsRelative?1:1-M;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:u}}function l3(n,e,t,r){let i=new WeakMap;function s(u){const f=r.render.frame,h=u.geometry,p=e.get(u,h);return i.get(p)!==f&&(e.update(p),i.set(p,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),p}function o(){i=new WeakMap}function a(u){const f=u.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const tT=new Yt,nT=new Xl,rT=new $c,iT=new Ql,kA=[],GA=[],UA=new Float32Array(16),HA=new Float32Array(9),zA=new Float32Array(4);function Yl(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=kA[i];if(s===void 0&&(s=new Float32Array(i),kA[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function jn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Hn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Ep(n,e){let t=GA[e];t===void 0&&(t=new Int32Array(e),GA[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function u3(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function c3(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2fv(this.addr,e),Hn(t,e)}}function f3(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(jn(t,e))return;n.uniform3fv(this.addr,e),Hn(t,e)}}function d3(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4fv(this.addr,e),Hn(t,e)}}function h3(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(jn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Hn(t,e)}else{if(jn(t,r))return;zA.set(r),n.uniformMatrix2fv(this.addr,!1,zA),Hn(t,r)}}function p3(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(jn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Hn(t,e)}else{if(jn(t,r))return;HA.set(r),n.uniformMatrix3fv(this.addr,!1,HA),Hn(t,r)}}function m3(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(jn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Hn(t,e)}else{if(jn(t,r))return;UA.set(r),n.uniformMatrix4fv(this.addr,!1,UA),Hn(t,r)}}function g3(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function y3(n,e){const t=this.cache;jn(t,e)||(n.uniform2iv(this.addr,e),Hn(t,e))}function v3(n,e){const t=this.cache;jn(t,e)||(n.uniform3iv(this.addr,e),Hn(t,e))}function x3(n,e){const t=this.cache;jn(t,e)||(n.uniform4iv(this.addr,e),Hn(t,e))}function _3(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function M3(n,e){const t=this.cache;jn(t,e)||(n.uniform2uiv(this.addr,e),Hn(t,e))}function A3(n,e){const t=this.cache;jn(t,e)||(n.uniform3uiv(this.addr,e),Hn(t,e))}function w3(n,e){const t=this.cache;jn(t,e)||(n.uniform4uiv(this.addr,e),Hn(t,e))}function S3(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||tT,i)}function E3(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||rT,i)}function T3(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||iT,i)}function C3(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||nT,i)}function b3(n){switch(n){case 5126:return u3;case 35664:return c3;case 35665:return f3;case 35666:return d3;case 35674:return h3;case 35675:return p3;case 35676:return m3;case 5124:case 35670:return g3;case 35667:case 35671:return y3;case 35668:case 35672:return v3;case 35669:case 35673:return x3;case 5125:return _3;case 36294:return M3;case 36295:return A3;case 36296:return w3;case 35678:case 36198:case 36298:case 36306:case 35682:return S3;case 35679:case 36299:case 36307:return E3;case 35680:case 36300:case 36308:case 36293:return T3;case 36289:case 36303:case 36311:case 36292:return C3}}function R3(n,e){n.uniform1fv(this.addr,e)}function B3(n,e){const t=Yl(e,this.size,2);n.uniform2fv(this.addr,t)}function L3(n,e){const t=Yl(e,this.size,3);n.uniform3fv(this.addr,t)}function P3(n,e){const t=Yl(e,this.size,4);n.uniform4fv(this.addr,t)}function I3(n,e){const t=Yl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function D3(n,e){const t=Yl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function F3(n,e){const t=Yl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N3(n,e){n.uniform1iv(this.addr,e)}function O3(n,e){n.uniform2iv(this.addr,e)}function k3(n,e){n.uniform3iv(this.addr,e)}function G3(n,e){n.uniform4iv(this.addr,e)}function U3(n,e){n.uniform1uiv(this.addr,e)}function H3(n,e){n.uniform2uiv(this.addr,e)}function z3(n,e){n.uniform3uiv(this.addr,e)}function V3(n,e){n.uniform4uiv(this.addr,e)}function W3(n,e,t){const r=e.length,i=Ep(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||tT,i[s])}function J3(n,e,t){const r=e.length,i=Ep(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||rT,i[s])}function j3(n,e,t){const r=e.length,i=Ep(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||iT,i[s])}function K3(n,e,t){const r=e.length,i=Ep(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||nT,i[s])}function X3(n){switch(n){case 5126:return R3;case 35664:return B3;case 35665:return L3;case 35666:return P3;case 35674:return I3;case 35675:return D3;case 35676:return F3;case 5124:case 35670:return N3;case 35667:case 35671:return O3;case 35668:case 35672:return k3;case 35669:case 35673:return G3;case 5125:return U3;case 36294:return H3;case 36295:return z3;case 36296:return V3;case 35678:case 36198:case 36298:case 36306:case 35682:return W3;case 35679:case 36299:case 36307:return J3;case 35680:case 36300:case 36308:case 36293:return j3;case 36289:case 36303:case 36311:case 36292:return K3}}function Q3(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=b3(e.type)}function sT(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=X3(e.type)}sT.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Hn(e,n)};function oT(n){this.id=n,this.seq=[],this.map={}}oT.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const Og=/(\w+)(\])?(\[|\.)?/g;function VA(n,e){n.seq.push(e),n.map[e.id]=e}function Y3(n,e,t){const r=n.name,i=r.length;for(Og.lastIndex=0;;){const s=Og.exec(r),o=Og.lastIndex;let a=s[1];const u=s[2]==="]",f=s[3];if(u&&(a=a|0),f===void 0||f==="["&&o+2===i){VA(t,f===void 0?new Q3(a,n,e):new sT(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new oT(a),VA(t,p)),t=p}}}function Us(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r),s=n.getUniformLocation(e,i.name);Y3(i,s,this)}}Us.prototype.setValue=function(n,e,t,r){const i=this.map[e];i!==void 0&&i.setValue(n,t,r)};Us.prototype.setOptional=function(n,e,t){const r=e[t];r!==void 0&&this.setValue(n,t,r)};Us.upload=function(n,e,t,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,r)}};Us.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.id in e&&t.push(s)}return t};function WA(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let q3=0;function Z3(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++)r.push(o+1+": "+t[o]);return r.join(`
`)}function $3(n){switch(n){case or:return["Linear","( value )"];case bt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function JA(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(i)[1]);return t.toUpperCase()+`

`+i+`

`+Z3(n.getShaderSource(e),s)}function eI(n,e){const t=$3(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function tI(n,e){let t;switch(e){case mE:t="Linear";break;case gE:t="Reinhard";break;case yE:t="OptimizedCineon";break;case kv:t="ACESFilmic";break;case vE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function nI(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(tc).join(`
`)}function rI(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function iI(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function tc(n){return n!==""}function jA(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function KA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const sI=/^[ \t]*#include +<([\w\d./]+)>/gm;function vy(n){return n.replace(sI,oI)}function oI(n,e){const t=ht[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return vy(t)}const aI=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XA(n){return n.replace(lI,aT).replace(aI,uI)}function uI(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),aT(n,e,t,r)}function aT(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function QA(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cI(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Bv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$a&&(e="SHADOWMAP_TYPE_VSM"),e}function fI(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ki:case Qs:e="ENVMAP_TYPE_CUBE";break;case Kl:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dI(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Qs:e="ENVMAP_MODE_REFRACTION";break}return e}function hI(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Zc:e="ENVMAP_BLENDING_MULTIPLY";break;case hE:e="ENVMAP_BLENDING_MIX";break;case pE:e="ENVMAP_BLENDING_ADD";break}return e}function pI(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function mI(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const u=cI(t),f=fI(t),h=dI(t),p=hI(t),d=pI(t),m=t.isWebGL2?"":nI(t),v=rI(s),x=i.createProgram();let y,_,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[v].filter(tc).join(`
`),y.length>0&&(y+=`
`),_=[m,v].filter(tc).join(`
`),_.length>0&&(_+=`
`)):(y=[QA(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(tc).join(`
`),_=[m,QA(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qr?"#define TONE_MAPPING":"",t.toneMapping!==qr?ht.tonemapping_pars_fragment:"",t.toneMapping!==qr?tI("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.encodings_pars_fragment,eI("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(tc).join(`
`)),o=vy(o),o=jA(o,t),o=KA(o,t),a=vy(a),a=jA(a,t),a=KA(a,t),o=XA(o),a=XA(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===my?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===my?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const A=M+y+o,S=M+_+a,T=WA(i,35633,A),C=WA(i,35632,S);if(i.attachShader(x,T),i.attachShader(x,C),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),n.debug.checkShaderErrors){const F=i.getProgramInfoLog(x).trim(),G=i.getShaderInfoLog(T).trim(),b=i.getShaderInfoLog(C).trim();let P=!0,W=!0;if(i.getProgramParameter(x,35714)===!1){P=!1;const z=JA(i,T,"vertex"),K=JA(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+F+`
`+z+`
`+K)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(G===""||b==="")&&(W=!1);W&&(this.diagnostics={runnable:P,programLog:F,vertexShader:{log:G,prefix:y},fragmentShader:{log:b,prefix:_}})}i.deleteShader(T),i.deleteShader(C);let B;this.getUniforms=function(){return B===void 0&&(B=new Us(i,x)),B};let L;return this.getAttributes=function(){return L===void 0&&(L=iI(i,x)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=q3++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=C,this}let gI=0;class yI{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new vI(e);t.set(e,r)}return t.get(e)}}class vI{constructor(e){this.id=gI++,this.code=e,this.usedTimes=0}}function xI(n,e,t,r,i,s,o){const a=new Jo,u=new yI,f=[],h=i.isWebGL2,p=i.logarithmicDepthBuffer,d=i.floatVertexTextures,m=i.maxVertexUniforms,v=i.vertexTextures;let x=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(b){const W=b.skeleton.bones;if(d)return 1024;{const K=Math.floor((m-20)/4),X=Math.min(K,W.length);return X<W.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+W.length+" bones. This GPU supports "+X+"."),0):X}}function M(b,P,W,z,K){const X=z.fog,q=K.geometry,V=b.isMeshStandardMaterial?z.environment:null,re=(b.isMeshStandardMaterial?t:e).get(b.envMap||V),le=!!re&&re.mapping===Kl?re.image.height:null,J=y[b.type],Y=K.isSkinnedMesh?_(K):0;b.precision!==null&&(x=i.getMaxPrecision(b.precision),x!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",x,"instead."));const he=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,Se=he!==void 0?he.length:0;let we=0;q.morphAttributes.position!==void 0&&(we=1),q.morphAttributes.normal!==void 0&&(we=2),q.morphAttributes.color!==void 0&&(we=3);let te,Ke,Ne,Fe;if(J){const ge=Qr[J];te=ge.vertexShader,Ke=ge.fragmentShader}else te=b.vertexShader,Ke=b.fragmentShader,u.update(b),Ne=u.getVertexShaderID(b),Fe=u.getFragmentShaderID(b);const ve=n.getRenderTarget(),qe=b.alphaTest>0,ue=b.clearcoat>0;return{isWebGL2:h,shaderID:J,shaderName:b.type,vertexShader:te,fragmentShader:Ke,defines:b.defines,customVertexShaderID:Ne,customFragmentShaderID:Fe,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:x,instancing:K.isInstancedMesh===!0,instancingColor:K.isInstancedMesh===!0&&K.instanceColor!==null,supportsVertexTextures:v,outputEncoding:ve===null?n.outputEncoding:ve.isXRRenderTarget===!0?ve.texture.encoding:or,map:!!b.map,matcap:!!b.matcap,envMap:!!re,envMapMode:re&&re.mapping,envMapCubeUVHeight:le,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===GE,tangentSpaceNormalMap:b.normalMapType===io,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===bt,clearcoat:ue,clearcoatMap:ue&&!!b.clearcoatMap,clearcoatRoughnessMap:ue&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:ue&&!!b.clearcoatNormalMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===zo,alphaMap:!!b.alphaMap,alphaTest:qe,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!q.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatNormalMap||b.transmission>0||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||b.sheen>0||!!b.sheenColorMap||!!b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!X,useFog:b.fog,fogExp2:X&&X.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:p,skinning:K.isSkinnedMesh===!0&&Y>0,maxBones:Y,useVertexTexture:d,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:Se,morphTextureStride:we,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:qr,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Xs,flipSided:b.side===sr,depthPacking:b.depthPacking!==void 0?b.depthPacking:!1,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function A(b){const P=[];if(b.shaderID?P.push(b.shaderID):(P.push(b.customVertexShaderID),P.push(b.customFragmentShaderID)),b.defines!==void 0)for(const W in b.defines)P.push(W),P.push(b.defines[W]);return b.isRawShaderMaterial===!1&&(S(P,b),T(P,b),P.push(n.outputEncoding)),P.push(b.customProgramCacheKey),P.join()}function S(b,P){b.push(P.precision),b.push(P.outputEncoding),b.push(P.envMapMode),b.push(P.envMapCubeUVHeight),b.push(P.combine),b.push(P.vertexUvs),b.push(P.fogExp2),b.push(P.sizeAttenuation),b.push(P.maxBones),b.push(P.morphTargetsCount),b.push(P.morphAttributeCount),b.push(P.numDirLights),b.push(P.numPointLights),b.push(P.numSpotLights),b.push(P.numHemiLights),b.push(P.numRectAreaLights),b.push(P.numDirLightShadows),b.push(P.numPointLightShadows),b.push(P.numSpotLightShadows),b.push(P.shadowMapType),b.push(P.toneMapping),b.push(P.numClippingPlanes),b.push(P.numClipIntersection)}function T(b,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.map&&a.enable(4),P.matcap&&a.enable(5),P.envMap&&a.enable(6),P.lightMap&&a.enable(7),P.aoMap&&a.enable(8),P.emissiveMap&&a.enable(9),P.bumpMap&&a.enable(10),P.normalMap&&a.enable(11),P.objectSpaceNormalMap&&a.enable(12),P.tangentSpaceNormalMap&&a.enable(13),P.clearcoat&&a.enable(14),P.clearcoatMap&&a.enable(15),P.clearcoatRoughnessMap&&a.enable(16),P.clearcoatNormalMap&&a.enable(17),P.displacementMap&&a.enable(18),P.specularMap&&a.enable(19),P.roughnessMap&&a.enable(20),P.metalnessMap&&a.enable(21),P.gradientMap&&a.enable(22),P.alphaMap&&a.enable(23),P.alphaTest&&a.enable(24),P.vertexColors&&a.enable(25),P.vertexAlphas&&a.enable(26),P.vertexUvs&&a.enable(27),P.vertexTangents&&a.enable(28),P.uvsVertexOnly&&a.enable(29),P.fog&&a.enable(30),b.push(a.mask),a.disableAll(),P.useFog&&a.enable(0),P.flatShading&&a.enable(1),P.logarithmicDepthBuffer&&a.enable(2),P.skinning&&a.enable(3),P.useVertexTexture&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.physicallyCorrectLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.depthPacking&&a.enable(13),P.dithering&&a.enable(14),P.specularIntensityMap&&a.enable(15),P.specularColorMap&&a.enable(16),P.transmission&&a.enable(17),P.transmissionMap&&a.enable(18),P.thicknessMap&&a.enable(19),P.sheen&&a.enable(20),P.sheenColorMap&&a.enable(21),P.sheenRoughnessMap&&a.enable(22),P.decodeVideoTexture&&a.enable(23),P.opaque&&a.enable(24),b.push(a.mask)}function C(b){const P=y[b.type];let W;if(P){const z=Qr[P];W=Uo.clone(z.uniforms)}else W=b.uniforms;return W}function B(b,P){let W;for(let z=0,K=f.length;z<K;z++){const X=f[z];if(X.cacheKey===P){W=X,++W.usedTimes;break}}return W===void 0&&(W=new mI(n,P,b,s),f.push(W)),W}function L(b){if(--b.usedTimes===0){const P=f.indexOf(b);f[P]=f[f.length-1],f.pop(),b.destroy()}}function F(b){u.remove(b)}function G(){u.dispose()}return{getParameters:M,getProgramCacheKey:A,getUniforms:C,acquireProgram:B,releaseProgram:L,releaseShaderCache:F,programs:f,dispose:G}}function _I(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function MI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qA(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(p,d,m,v,x,y){let _=n[e];return _===void 0?(_={id:p.id,object:p,geometry:d,material:m,groupOrder:v,renderOrder:p.renderOrder,z:x,group:y},n[e]=_):(_.id=p.id,_.object=p,_.geometry=d,_.material=m,_.groupOrder=v,_.renderOrder=p.renderOrder,_.z=x,_.group=y),e++,_}function a(p,d,m,v,x,y){const _=o(p,d,m,v,x,y);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function u(p,d,m,v,x,y){const _=o(p,d,m,v,x,y);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function f(p,d){t.length>1&&t.sort(p||MI),r.length>1&&r.sort(d||YA),i.length>1&&i.sort(d||YA)}function h(){for(let p=e,d=n.length;p<d;p++){const m=n[p];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:u,finish:h,sort:f}}function AI(){let n=new WeakMap;function e(r,i){let s;return n.has(r)===!1?(s=new qA,n.set(r,[s])):i>=n.get(r).length?(s=new qA,n.get(r).push(s)):s=n.get(r)[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function wI(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new I,color:new Ae};break;case"SpotLight":t={position:new I,direction:new I,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new I,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":t={direction:new I,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":t={color:new Ae,position:new I,halfWidth:new I,halfHeight:new I};break}return n[e.id]=t,t}}}function SI(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EI=0;function TI(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function CI(n,e){const t=new wI,r=SI(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let h=0;h<9;h++)i.probe.push(new I);const s=new I,o=new Ge,a=new Ge;function u(h,p){let d=0,m=0,v=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let x=0,y=0,_=0,M=0,A=0,S=0,T=0,C=0;h.sort(TI);const B=p!==!0?Math.PI:1;for(let F=0,G=h.length;F<G;F++){const b=h[F],P=b.color,W=b.intensity,z=b.distance,K=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)d+=P.r*W*B,m+=P.g*W*B,v+=P.b*W*B;else if(b.isLightProbe)for(let X=0;X<9;X++)i.probe[X].addScaledVector(b.sh.coefficients[X],W);else if(b.isDirectionalLight){const X=t.get(b);if(X.color.copy(b.color).multiplyScalar(b.intensity*B),b.castShadow){const q=b.shadow,V=r.get(b);V.shadowBias=q.bias,V.shadowNormalBias=q.normalBias,V.shadowRadius=q.radius,V.shadowMapSize=q.mapSize,i.directionalShadow[x]=V,i.directionalShadowMap[x]=K,i.directionalShadowMatrix[x]=b.shadow.matrix,S++}i.directional[x]=X,x++}else if(b.isSpotLight){const X=t.get(b);if(X.position.setFromMatrixPosition(b.matrixWorld),X.color.copy(P).multiplyScalar(W*B),X.distance=z,X.coneCos=Math.cos(b.angle),X.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),X.decay=b.decay,b.castShadow){const q=b.shadow,V=r.get(b);V.shadowBias=q.bias,V.shadowNormalBias=q.normalBias,V.shadowRadius=q.radius,V.shadowMapSize=q.mapSize,i.spotShadow[_]=V,i.spotShadowMap[_]=K,i.spotShadowMatrix[_]=b.shadow.matrix,C++}i.spot[_]=X,_++}else if(b.isRectAreaLight){const X=t.get(b);X.color.copy(P).multiplyScalar(W),X.halfWidth.set(b.width*.5,0,0),X.halfHeight.set(0,b.height*.5,0),i.rectArea[M]=X,M++}else if(b.isPointLight){const X=t.get(b);if(X.color.copy(b.color).multiplyScalar(b.intensity*B),X.distance=b.distance,X.decay=b.decay,b.castShadow){const q=b.shadow,V=r.get(b);V.shadowBias=q.bias,V.shadowNormalBias=q.normalBias,V.shadowRadius=q.radius,V.shadowMapSize=q.mapSize,V.shadowCameraNear=q.camera.near,V.shadowCameraFar=q.camera.far,i.pointShadow[y]=V,i.pointShadowMap[y]=K,i.pointShadowMatrix[y]=b.shadow.matrix,T++}i.point[y]=X,y++}else if(b.isHemisphereLight){const X=t.get(b);X.skyColor.copy(b.color).multiplyScalar(W*B),X.groundColor.copy(b.groundColor).multiplyScalar(W*B),i.hemi[A]=X,A++}}M>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Re.LTC_FLOAT_1,i.rectAreaLTC2=Re.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Re.LTC_HALF_1,i.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=m,i.ambient[2]=v;const L=i.hash;(L.directionalLength!==x||L.pointLength!==y||L.spotLength!==_||L.rectAreaLength!==M||L.hemiLength!==A||L.numDirectionalShadows!==S||L.numPointShadows!==T||L.numSpotShadows!==C)&&(i.directional.length=x,i.spot.length=_,i.rectArea.length=M,i.point.length=y,i.hemi.length=A,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=T,i.spotShadowMatrix.length=C,L.directionalLength=x,L.pointLength=y,L.spotLength=_,L.rectAreaLength=M,L.hemiLength=A,L.numDirectionalShadows=S,L.numPointShadows=T,L.numSpotShadows=C,i.version=EI++)}function f(h,p){let d=0,m=0,v=0,x=0,y=0;const _=p.matrixWorldInverse;for(let M=0,A=h.length;M<A;M++){const S=h[M];if(S.isDirectionalLight){const T=i.directional[d];T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(_),d++}else if(S.isSpotLight){const T=i.spot[v];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(_),v++}else if(S.isRectAreaLight){const T=i.rectArea[x];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),a.identity(),o.copy(S.matrixWorld),o.premultiply(_),a.extractRotation(o),T.halfWidth.set(S.width*.5,0,0),T.halfHeight.set(0,S.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),x++}else if(S.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),m++}else if(S.isHemisphereLight){const T=i.hemi[y];T.direction.setFromMatrixPosition(S.matrixWorld),T.direction.transformDirection(_),T.direction.normalize(),y++}}}return{setup:u,setupView:f,state:i}}function ZA(n,e){const t=new CI(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(p){r.push(p)}function a(p){i.push(p)}function u(p){t.setup(r,p)}function f(p){t.setupView(r,p)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:u,setupLightsView:f,pushLight:o,pushShadow:a}}function bI(n,e){let t=new WeakMap;function r(s,o=0){let a;return t.has(s)===!1?(a=new ZA(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new ZA(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function i(){t=new WeakMap}return{get:r,dispose:i}}class Tp extends Wt{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=OE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Tp.prototype.isMeshDepthMaterial=!0;class Cp extends Wt{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new I,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Cp.prototype.isMeshDistanceMaterial=!0;const RI=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,BI=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lT(n,e,t){let r=new tf;const i=new de,s=new de,o=new Rt,a=new Tp({depthPacking:kE}),u=new Cp,f={},h=t.maxTextureSize,p={0:sr,1:Ks,2:Xs},d=new Bn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:RI,fragmentShader:BI}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const v=new Ye;v.setAttribute("position",new pt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Qt(v,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bv,this.render=function(S,T,C){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const B=n.getRenderTarget(),L=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),G=n.state;G.setBlending(bn),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);for(let b=0,P=S.length;b<P;b++){const W=S[b],z=W.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const K=z.getFrameExtents();if(i.multiply(K),s.copy(z.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/K.x),i.x=s.x*K.x,z.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/K.y),i.y=s.y*K.y,z.mapSize.y=s.y)),z.map===null&&!z.isPointLightShadow&&this.type===$a&&(z.map=new _n(i.x,i.y),z.map.texture.name=W.name+".shadowMap",z.mapPass=new _n(i.x,i.y),z.camera.updateProjectionMatrix()),z.map===null){const q={minFilter:Kt,magFilter:Kt,format:dr};z.map=new _n(i.x,i.y,q),z.map.texture.name=W.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();const X=z.getViewportCount();for(let q=0;q<X;q++){const V=z.getViewport(q);o.set(s.x*V.x,s.y*V.y,s.x*V.z,s.y*V.w),G.viewport(o),z.updateMatrices(W,q),r=z.getFrustum(),A(T,C,z.camera,W,this.type)}!z.isPointLightShadow&&this.type===$a&&_(z,C),z.needsUpdate=!1}y.needsUpdate=!1,n.setRenderTarget(B,L,F)};function _(S,T){const C=e.update(x);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,m.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(T,null,C,d,x,null),m.uniforms.shadow_pass.value=S.mapPass.texture,m.uniforms.resolution.value=S.mapSize,m.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(T,null,C,m,x,null)}function M(S,T,C,B,L,F){let G=null;const b=C.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(b!==void 0?G=b:G=C.isPointLight===!0?u:a,n.localClippingEnabled&&T.clipShadows===!0&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0){const P=G.uuid,W=T.uuid;let z=f[P];z===void 0&&(z={},f[P]=z);let K=z[W];K===void 0&&(K=G.clone(),z[W]=K),G=K}return G.visible=T.visible,G.wireframe=T.wireframe,F===$a?G.side=T.shadowSide!==null?T.shadowSide:T.side:G.side=T.shadowSide!==null?T.shadowSide:p[T.side],G.alphaMap=T.alphaMap,G.alphaTest=T.alphaTest,G.clipShadows=T.clipShadows,G.clippingPlanes=T.clippingPlanes,G.clipIntersection=T.clipIntersection,G.displacementMap=T.displacementMap,G.displacementScale=T.displacementScale,G.displacementBias=T.displacementBias,G.wireframeLinewidth=T.wireframeLinewidth,G.linewidth=T.linewidth,C.isPointLight===!0&&G.isMeshDistanceMaterial===!0&&(G.referencePosition.setFromMatrixPosition(C.matrixWorld),G.nearDistance=B,G.farDistance=L),G}function A(S,T,C,B,L){if(S.visible===!1)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&L===$a)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,S.matrixWorld);const b=e.update(S),P=S.material;if(Array.isArray(P)){const W=b.groups;for(let z=0,K=W.length;z<K;z++){const X=W[z],q=P[X.materialIndex];if(q&&q.visible){const V=M(S,q,B,C.near,C.far,L);n.renderBufferDirect(C,null,b,V,S,X)}}}else if(P.visible){const W=M(S,P,B,C.near,C.far,L);n.renderBufferDirect(C,null,b,W,S,null)}}const G=S.children;for(let b=0,P=G.length;b<P;b++)A(G[b],T,C,B,L)}}function LI(n,e,t){const r=t.isWebGL2;function i(){let N=!1;const fe=new Rt;let pe=null;const De=new Rt(0,0,0,0);return{setMask:function(be){pe!==be&&!N&&(n.colorMask(be,be,be,be),pe=be)},setLocked:function(be){N=be},setClear:function(be,We,xe,Ve,ot){ot===!0&&(be*=Ve,We*=Ve,xe*=Ve),fe.set(be,We,xe,Ve),De.equals(fe)===!1&&(n.clearColor(be,We,xe,Ve),De.copy(fe))},reset:function(){N=!1,pe=null,De.set(-1,0,0,0)}}}function s(){let N=!1,fe=null,pe=null,De=null;return{setTest:function(be){be?we(2929):te(2929)},setMask:function(be){fe!==be&&!N&&(n.depthMask(be),fe=be)},setFunc:function(be){if(pe!==be){if(be)switch(be){case oE:n.depthFunc(512);break;case aE:n.depthFunc(519);break;case lE:n.depthFunc(513);break;case Zh:n.depthFunc(515);break;case uE:n.depthFunc(514);break;case cE:n.depthFunc(518);break;case fE:n.depthFunc(516);break;case dE:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);pe=be}},setLocked:function(be){N=be},setClear:function(be){De!==be&&(n.clearDepth(be),De=be)},reset:function(){N=!1,fe=null,pe=null,De=null}}}function o(){let N=!1,fe=null,pe=null,De=null,be=null,We=null,xe=null,Ve=null,ot=null;return{setTest:function(ut){N||(ut?we(2960):te(2960))},setMask:function(ut){fe!==ut&&!N&&(n.stencilMask(ut),fe=ut)},setFunc:function(ut,yr,vr){(pe!==ut||De!==yr||be!==vr)&&(n.stencilFunc(ut,yr,vr),pe=ut,De=yr,be=vr)},setOp:function(ut,yr,vr){(We!==ut||xe!==yr||Ve!==vr)&&(n.stencilOp(ut,yr,vr),We=ut,xe=yr,Ve=vr)},setLocked:function(ut){N=ut},setClear:function(ut){ot!==ut&&(n.clearStencil(ut),ot=ut)},reset:function(){N=!1,fe=null,pe=null,De=null,be=null,We=null,xe=null,Ve=null,ot=null}}}const a=new i,u=new s,f=new o;let h={},p={},d=new WeakMap,m=[],v=null,x=!1,y=null,_=null,M=null,A=null,S=null,T=null,C=null,B=!1,L=null,F=null,G=null,b=null,P=null;const W=n.getParameter(35661);let z=!1,K=0;const X=n.getParameter(7938);X.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(X)[1]),z=K>=1):X.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),z=K>=2);let q=null,V={};const re=n.getParameter(3088),le=n.getParameter(2978),J=new Rt().fromArray(re),Y=new Rt().fromArray(le);function he(N,fe,pe){const De=new Uint8Array(4),be=n.createTexture();n.bindTexture(N,be),n.texParameteri(N,10241,9728),n.texParameteri(N,10240,9728);for(let We=0;We<pe;We++)n.texImage2D(fe+We,0,6408,1,1,0,6408,5121,De);return be}const Se={};Se[3553]=he(3553,3553,1),Se[34067]=he(34067,34069,6),a.setClear(0,0,0,1),u.setClear(1),f.setClear(0),we(2929),u.setFunc(Zh),ge(!1),Le(z0),we(2884),ue(bn);function we(N){h[N]!==!0&&(n.enable(N),h[N]=!0)}function te(N){h[N]!==!1&&(n.disable(N),h[N]=!1)}function Ke(N,fe){return p[N]!==fe?(n.bindFramebuffer(N,fe),p[N]=fe,r&&(N===36009&&(p[36160]=fe),N===36160&&(p[36009]=fe)),!0):!1}function Ne(N,fe){let pe=m,De=!1;if(N)if(pe=d.get(fe),pe===void 0&&(pe=[],d.set(fe,pe)),N.isWebGLMultipleRenderTargets){const be=N.texture;if(pe.length!==be.length||pe[0]!==36064){for(let We=0,xe=be.length;We<xe;We++)pe[We]=36064+We;pe.length=be.length,De=!0}}else pe[0]!==36064&&(pe[0]=36064,De=!0);else pe[0]!==1029&&(pe[0]=1029,De=!0);De&&(t.isWebGL2?n.drawBuffers(pe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(pe))}function Fe(N){return v!==N?(n.useProgram(N),v=N,!0):!1}const ve={[zi]:32774,[ZS]:32778,[$S]:32779};if(r)ve[j0]=32775,ve[K0]=32776;else{const N=e.get("EXT_blend_minmax");N!==null&&(ve[j0]=N.MIN_EXT,ve[K0]=N.MAX_EXT)}const qe={[qh]:0,[eE]:1,[tE]:768,[Dv]:770,[sE]:776,[Ov]:774,[Nv]:772,[nE]:769,[Fv]:771,[iE]:775,[rE]:773};function ue(N,fe,pe,De,be,We,xe,Ve){if(N===bn){x===!0&&(te(3042),x=!1);return}if(x===!1&&(we(3042),x=!0),N!==Iv){if(N!==y||Ve!==B){if((_!==zi||S!==zi)&&(n.blendEquation(32774),_=zi,S=zi),Ve)switch(N){case zo:n.blendFuncSeparate(1,771,1,771);break;case V0:n.blendFunc(1,1);break;case W0:n.blendFuncSeparate(0,769,0,1);break;case J0:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}else switch(N){case zo:n.blendFuncSeparate(770,771,1,771);break;case V0:n.blendFunc(770,1);break;case W0:n.blendFuncSeparate(0,769,0,1);break;case J0:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}M=null,A=null,T=null,C=null,y=N,B=Ve}return}be=be||fe,We=We||pe,xe=xe||De,(fe!==_||be!==S)&&(n.blendEquationSeparate(ve[fe],ve[be]),_=fe,S=be),(pe!==M||De!==A||We!==T||xe!==C)&&(n.blendFuncSeparate(qe[pe],qe[De],qe[We],qe[xe]),M=pe,A=De,T=We,C=xe),y=N,B=null}function ce(N,fe){N.side===Xs?te(2884):we(2884);let pe=N.side===sr;fe&&(pe=!pe),ge(pe),N.blending===zo&&N.transparent===!1?ue(bn):ue(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),u.setFunc(N.depthFunc),u.setTest(N.depthTest),u.setMask(N.depthWrite),a.setMask(N.colorWrite);const De=N.stencilWrite;f.setTest(De),De&&(f.setMask(N.stencilWriteMask),f.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),f.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),et(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),N.alphaToCoverage===!0?we(32926):te(32926)}function ge(N){L!==N&&(N?n.frontFace(2304):n.frontFace(2305),L=N)}function Le(N){N!==YS?(we(2884),N!==F&&(N===z0?n.cullFace(1029):N===qS?n.cullFace(1028):n.cullFace(1032))):te(2884),F=N}function _e(N){N!==G&&(z&&n.lineWidth(N),G=N)}function et(N,fe,pe){N?(we(32823),(b!==fe||P!==pe)&&(n.polygonOffset(fe,pe),b=fe,P=pe)):te(32823)}function Je(N){N?we(3089):te(3089)}function He(N){N===void 0&&(N=33984+W-1),q!==N&&(n.activeTexture(N),q=N)}function At(N,fe){q===null&&He();let pe=V[q];pe===void 0&&(pe={type:void 0,texture:void 0},V[q]=pe),(pe.type!==N||pe.texture!==fe)&&(n.bindTexture(N,fe||Se[N]),pe.type=N,pe.texture=fe)}function yt(){const N=V[q];N!==void 0&&N.type!==void 0&&(n.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)}function U(){try{n.compressedTexImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function D(){try{n.texSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ne(){try{n.texSubImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ye(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Ee(){try{n.texStorage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Te(){try{n.texStorage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function je(){try{n.texImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ie(){try{n.texImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Ze(N){J.equals(N)===!1&&(n.scissor(N.x,N.y,N.z,N.w),J.copy(N))}function tt(N){Y.equals(N)===!1&&(n.viewport(N.x,N.y,N.z,N.w),Y.copy(N))}function H(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},q=null,V={},p={},d=new WeakMap,m=[],v=null,x=!1,y=null,_=null,M=null,A=null,S=null,T=null,C=null,B=!1,L=null,F=null,G=null,b=null,P=null,J.set(0,0,n.canvas.width,n.canvas.height),Y.set(0,0,n.canvas.width,n.canvas.height),a.reset(),u.reset(),f.reset()}return{buffers:{color:a,depth:u,stencil:f},enable:we,disable:te,bindFramebuffer:Ke,drawBuffers:Ne,useProgram:Fe,setBlending:ue,setMaterial:ce,setFlipSided:ge,setCullFace:Le,setLineWidth:_e,setPolygonOffset:et,setScissorTest:Je,activeTexture:He,bindTexture:At,unbindTexture:yt,compressedTexImage2D:U,texImage2D:je,texImage3D:ie,texStorage2D:Ee,texStorage3D:Te,texSubImage2D:D,texSubImage3D:ne,compressedTexSubImage2D:ye,scissor:Ze,viewport:tt,reset:H}}function PI(n,e,t,r,i,s,o){const a=i.isWebGL2,u=i.maxTextures,f=i.maxCubemapSize,h=i.maxTextureSize,p=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let x;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(U,D){return _?new OffscreenCanvas(U,D):kc("canvas")}function A(U,D,ne,ye){let Ee=1;if((U.width>ye||U.height>ye)&&(Ee=ye/Math.max(U.width,U.height)),Ee<1||D===!0)if(typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&U instanceof ImageBitmap){const Te=D?ep:Math.floor,je=Te(Ee*U.width),ie=Te(Ee*U.height);x===void 0&&(x=M(je,ie));const Ze=ne?M(je,ie):x;return Ze.width=je,Ze.height=ie,Ze.getContext("2d").drawImage(U,0,0,je,ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+je+"x"+ie+")."),Ze}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function S(U){return gy(U.width)&&gy(U.height)}function T(U){return a?!1:U.wrapS!==On||U.wrapT!==On||U.minFilter!==Kt&&U.minFilter!==Dt}function C(U,D){return U.generateMipmaps&&D&&U.minFilter!==Kt&&U.minFilter!==Dt}function B(U){n.generateMipmap(U)}function L(U,D,ne,ye,Ee=!1){if(a===!1)return D;if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Te=D;return D===6403&&(ne===5126&&(Te=33326),ne===5131&&(Te=33325),ne===5121&&(Te=33321)),D===33319&&(ne===5126&&(Te=33328),ne===5131&&(Te=33327),ne===5121&&(Te=33323)),D===6408&&(ne===5126&&(Te=34836),ne===5131&&(Te=34842),ne===5121&&(Te=ye===bt&&Ee===!1?35907:32856),ne===32819&&(Te=32854),ne===32820&&(Te=32855)),(Te===33325||Te===33326||Te===33327||Te===33328||Te===34842||Te===34836)&&e.get("EXT_color_buffer_float"),Te}function F(U,D,ne){return C(U,ne)===!0||U.isFramebufferTexture&&U.minFilter!==Kt&&U.minFilter!==Dt?Math.log2(Math.max(D.width,D.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?D.mipmaps.length:1}function G(U){return U===Kt||U===Dc||U===Fc?9728:9729}function b(U){const D=U.target;D.removeEventListener("dispose",b),W(D),D.isVideoTexture&&v.delete(D)}function P(U){const D=U.target;D.removeEventListener("dispose",P),K(D)}function W(U){const D=r.get(U);if(D.__webglInit===void 0)return;const ne=U.source,ye=y.get(ne);if(ye){const Ee=ye[D.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&z(U),Object.keys(ye).length===0&&y.delete(ne)}r.remove(U)}function z(U){const D=r.get(U);n.deleteTexture(D.__webglTexture);const ne=U.source,ye=y.get(ne);delete ye[D.__cacheKey],o.memory.textures--}function K(U){const D=U.texture,ne=r.get(U),ye=r.get(D);if(ye.__webglTexture!==void 0&&(n.deleteTexture(ye.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++)n.deleteFramebuffer(ne.__webglFramebuffer[Ee]),ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer[Ee]);else n.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&n.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer&&n.deleteRenderbuffer(ne.__webglColorRenderbuffer),ne.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ne.__webglDepthRenderbuffer);if(U.isWebGLMultipleRenderTargets)for(let Ee=0,Te=D.length;Ee<Te;Ee++){const je=r.get(D[Ee]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),r.remove(D[Ee])}r.remove(D),r.remove(U)}let X=0;function q(){X=0}function V(){const U=X;return U>=u&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+u),X+=1,U}function re(U){const D=[];return D.push(U.wrapS),D.push(U.wrapT),D.push(U.magFilter),D.push(U.minFilter),D.push(U.anisotropy),D.push(U.internalFormat),D.push(U.format),D.push(U.type),D.push(U.generateMipmaps),D.push(U.premultiplyAlpha),D.push(U.flipY),D.push(U.unpackAlignment),D.push(U.encoding),D.join()}function le(U,D){const ne=r.get(U);if(U.isVideoTexture&&At(U),U.isRenderTargetTexture===!1&&U.version>0&&ne.__version!==U.version){const ye=U.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ne(ne,U,D);return}}t.activeTexture(33984+D),t.bindTexture(3553,ne.__webglTexture)}function J(U,D){const ne=r.get(U);if(U.version>0&&ne.__version!==U.version){Ne(ne,U,D);return}t.activeTexture(33984+D),t.bindTexture(35866,ne.__webglTexture)}function Y(U,D){const ne=r.get(U);if(U.version>0&&ne.__version!==U.version){Ne(ne,U,D);return}t.activeTexture(33984+D),t.bindTexture(32879,ne.__webglTexture)}function he(U,D){const ne=r.get(U);if(U.version>0&&ne.__version!==U.version){Fe(ne,U,D);return}t.activeTexture(33984+D),t.bindTexture(34067,ne.__webglTexture)}const Se={[xi]:10497,[On]:33071,[xl]:33648},we={[Kt]:9728,[Dc]:9984,[Fc]:9986,[Dt]:9729,[_p]:9985,[qi]:9987};function te(U,D,ne){if(ne?(n.texParameteri(U,10242,Se[D.wrapS]),n.texParameteri(U,10243,Se[D.wrapT]),(U===32879||U===35866)&&n.texParameteri(U,32882,Se[D.wrapR]),n.texParameteri(U,10240,we[D.magFilter]),n.texParameteri(U,10241,we[D.minFilter])):(n.texParameteri(U,10242,33071),n.texParameteri(U,10243,33071),(U===32879||U===35866)&&n.texParameteri(U,32882,33071),(D.wrapS!==On||D.wrapT!==On)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(U,10240,G(D.magFilter)),n.texParameteri(U,10241,G(D.minFilter)),D.minFilter!==Kt&&D.minFilter!==Dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(D.type===tr&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===Br&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||r.get(D).__currentAnisotropy)&&(n.texParameterf(U,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy)}}function Ke(U,D){let ne=!1;U.__webglInit===void 0&&(U.__webglInit=!0,D.addEventListener("dispose",b));const ye=D.source;let Ee=y.get(ye);Ee===void 0&&(Ee={},y.set(ye,Ee));const Te=re(D);if(Te!==U.__cacheKey){Ee[Te]===void 0&&(Ee[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),Ee[Te].usedTimes++;const je=Ee[U.__cacheKey];je!==void 0&&(Ee[U.__cacheKey].usedTimes--,je.usedTimes===0&&z(D)),U.__cacheKey=Te,U.__webglTexture=Ee[Te].texture}return ne}function Ne(U,D,ne){let ye=3553;D.isDataArrayTexture&&(ye=35866),D.isData3DTexture&&(ye=32879);const Ee=Ke(U,D),Te=D.source;if(t.activeTexture(33984+ne),t.bindTexture(ye,U.__webglTexture),Te.version!==Te.__currentVersion||Ee===!0){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const je=T(D)&&S(D.image)===!1;let ie=A(D.image,je,!1,h);ie=yt(D,ie);const Ze=S(ie)||a,tt=s.convert(D.format,D.encoding);let H=s.convert(D.type),N=L(D.internalFormat,tt,H,D.encoding,D.isVideoTexture);te(ye,D,Ze);let fe;const pe=D.mipmaps,De=a&&D.isVideoTexture!==!0,be=U.__version===void 0,We=F(D,ie,Ze);if(D.isDepthTexture)N=6402,a?D.type===tr?N=36012:D.type===mc?N=33190:D.type===ks?N=35056:N=33189:D.type===tr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===Gs&&N===6402&&D.type!==_l&&D.type!==mc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=_l,H=s.convert(D.type)),D.format===qs&&N===6402&&(N=34041,D.type!==ks&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=ks,H=s.convert(D.type))),De&&be?t.texStorage2D(3553,1,N,ie.width,ie.height):t.texImage2D(3553,0,N,ie.width,ie.height,0,tt,H,null);else if(D.isDataTexture)if(pe.length>0&&Ze){De&&be&&t.texStorage2D(3553,We,N,pe[0].width,pe[0].height);for(let xe=0,Ve=pe.length;xe<Ve;xe++)fe=pe[xe],De?t.texSubImage2D(3553,xe,0,0,fe.width,fe.height,tt,H,fe.data):t.texImage2D(3553,xe,N,fe.width,fe.height,0,tt,H,fe.data);D.generateMipmaps=!1}else De?(be&&t.texStorage2D(3553,We,N,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,ie.width,ie.height,tt,H,ie.data)):t.texImage2D(3553,0,N,ie.width,ie.height,0,tt,H,ie.data);else if(D.isCompressedTexture){De&&be&&t.texStorage2D(3553,We,N,pe[0].width,pe[0].height);for(let xe=0,Ve=pe.length;xe<Ve;xe++)fe=pe[xe],D.format!==dr?tt!==null?De?t.compressedTexSubImage2D(3553,xe,0,0,fe.width,fe.height,tt,fe.data):t.compressedTexImage2D(3553,xe,N,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?t.texSubImage2D(3553,xe,0,0,fe.width,fe.height,tt,H,fe.data):t.texImage2D(3553,xe,N,fe.width,fe.height,0,tt,H,fe.data)}else if(D.isDataArrayTexture)De?(be&&t.texStorage3D(35866,We,N,ie.width,ie.height,ie.depth),t.texSubImage3D(35866,0,0,0,0,ie.width,ie.height,ie.depth,tt,H,ie.data)):t.texImage3D(35866,0,N,ie.width,ie.height,ie.depth,0,tt,H,ie.data);else if(D.isData3DTexture)De?(be&&t.texStorage3D(32879,We,N,ie.width,ie.height,ie.depth),t.texSubImage3D(32879,0,0,0,0,ie.width,ie.height,ie.depth,tt,H,ie.data)):t.texImage3D(32879,0,N,ie.width,ie.height,ie.depth,0,tt,H,ie.data);else if(D.isFramebufferTexture)De&&be?t.texStorage2D(3553,We,N,ie.width,ie.height):t.texImage2D(3553,0,N,ie.width,ie.height,0,tt,H,null);else if(pe.length>0&&Ze){De&&be&&t.texStorage2D(3553,We,N,pe[0].width,pe[0].height);for(let xe=0,Ve=pe.length;xe<Ve;xe++)fe=pe[xe],De?t.texSubImage2D(3553,xe,0,0,tt,H,fe):t.texImage2D(3553,xe,N,tt,H,fe);D.generateMipmaps=!1}else De?(be&&t.texStorage2D(3553,We,N,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,tt,H,ie)):t.texImage2D(3553,0,N,tt,H,ie);C(D,Ze)&&B(ye),Te.__currentVersion=Te.version,D.onUpdate&&D.onUpdate(D)}U.__version=D.version}function Fe(U,D,ne){if(D.image.length!==6)return;const ye=Ke(U,D),Ee=D.source;if(t.activeTexture(33984+ne),t.bindTexture(34067,U.__webglTexture),Ee.version!==Ee.__currentVersion||ye===!0){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Te=D.isCompressedTexture||D.image[0].isCompressedTexture,je=D.image[0]&&D.image[0].isDataTexture,ie=[];for(let xe=0;xe<6;xe++)!Te&&!je?ie[xe]=A(D.image[xe],!1,!0,f):ie[xe]=je?D.image[xe].image:D.image[xe],ie[xe]=yt(D,ie[xe]);const Ze=ie[0],tt=S(Ze)||a,H=s.convert(D.format,D.encoding),N=s.convert(D.type),fe=L(D.internalFormat,H,N,D.encoding),pe=a&&D.isVideoTexture!==!0,De=U.__version===void 0;let be=F(D,Ze,tt);te(34067,D,tt);let We;if(Te){pe&&De&&t.texStorage2D(34067,be,fe,Ze.width,Ze.height);for(let xe=0;xe<6;xe++){We=ie[xe].mipmaps;for(let Ve=0;Ve<We.length;Ve++){const ot=We[Ve];D.format!==dr?H!==null?pe?t.compressedTexSubImage2D(34069+xe,Ve,0,0,ot.width,ot.height,H,ot.data):t.compressedTexImage2D(34069+xe,Ve,fe,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?t.texSubImage2D(34069+xe,Ve,0,0,ot.width,ot.height,H,N,ot.data):t.texImage2D(34069+xe,Ve,fe,ot.width,ot.height,0,H,N,ot.data)}}}else{We=D.mipmaps,pe&&De&&(We.length>0&&be++,t.texStorage2D(34067,be,fe,ie[0].width,ie[0].height));for(let xe=0;xe<6;xe++)if(je){pe?t.texSubImage2D(34069+xe,0,0,0,ie[xe].width,ie[xe].height,H,N,ie[xe].data):t.texImage2D(34069+xe,0,fe,ie[xe].width,ie[xe].height,0,H,N,ie[xe].data);for(let Ve=0;Ve<We.length;Ve++){const ut=We[Ve].image[xe].image;pe?t.texSubImage2D(34069+xe,Ve+1,0,0,ut.width,ut.height,H,N,ut.data):t.texImage2D(34069+xe,Ve+1,fe,ut.width,ut.height,0,H,N,ut.data)}}else{pe?t.texSubImage2D(34069+xe,0,0,0,H,N,ie[xe]):t.texImage2D(34069+xe,0,fe,H,N,ie[xe]);for(let Ve=0;Ve<We.length;Ve++){const ot=We[Ve];pe?t.texSubImage2D(34069+xe,Ve+1,0,0,H,N,ot.image[xe]):t.texImage2D(34069+xe,Ve+1,fe,H,N,ot.image[xe])}}}C(D,tt)&&B(34067),Ee.__currentVersion=Ee.version,D.onUpdate&&D.onUpdate(D)}U.__version=D.version}function ve(U,D,ne,ye,Ee){const Te=s.convert(ne.format,ne.encoding),je=s.convert(ne.type),ie=L(ne.internalFormat,Te,je,ne.encoding);r.get(D).__hasExternalTextures||(Ee===32879||Ee===35866?t.texImage3D(Ee,0,ie,D.width,D.height,D.depth,0,Te,je,null):t.texImage2D(Ee,0,ie,D.width,D.height,0,Te,je,null)),t.bindFramebuffer(36160,U),He(D)?d.framebufferTexture2DMultisampleEXT(36160,ye,Ee,r.get(ne).__webglTexture,0,Je(D)):n.framebufferTexture2D(36160,ye,Ee,r.get(ne).__webglTexture,0),t.bindFramebuffer(36160,null)}function qe(U,D,ne){if(n.bindRenderbuffer(36161,U),D.depthBuffer&&!D.stencilBuffer){let ye=33189;if(ne||He(D)){const Ee=D.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===tr?ye=36012:Ee.type===mc&&(ye=33190));const Te=Je(D);He(D)?d.renderbufferStorageMultisampleEXT(36161,Te,ye,D.width,D.height):n.renderbufferStorageMultisample(36161,Te,ye,D.width,D.height)}else n.renderbufferStorage(36161,ye,D.width,D.height);n.framebufferRenderbuffer(36160,36096,36161,U)}else if(D.depthBuffer&&D.stencilBuffer){const ye=Je(D);ne&&He(D)===!1?n.renderbufferStorageMultisample(36161,ye,35056,D.width,D.height):He(D)?d.renderbufferStorageMultisampleEXT(36161,ye,35056,D.width,D.height):n.renderbufferStorage(36161,34041,D.width,D.height),n.framebufferRenderbuffer(36160,33306,36161,U)}else{const ye=D.isWebGLMultipleRenderTargets===!0?D.texture[0]:D.texture,Ee=s.convert(ye.format,ye.encoding),Te=s.convert(ye.type),je=L(ye.internalFormat,Ee,Te,ye.encoding),ie=Je(D);ne&&He(D)===!1?n.renderbufferStorageMultisample(36161,ie,je,D.width,D.height):He(D)?d.renderbufferStorageMultisampleEXT(36161,ie,je,D.width,D.height):n.renderbufferStorage(36161,je,D.width,D.height)}n.bindRenderbuffer(36161,null)}function ue(U,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,U),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),le(D.depthTexture,0);const ye=r.get(D.depthTexture).__webglTexture,Ee=Je(D);if(D.depthTexture.format===Gs)He(D)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ye,0,Ee):n.framebufferTexture2D(36160,36096,3553,ye,0);else if(D.depthTexture.format===qs)He(D)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ye,0,Ee):n.framebufferTexture2D(36160,33306,3553,ye,0);else throw new Error("Unknown depthTexture format")}function ce(U){const D=r.get(U),ne=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!D.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ue(D.__webglFramebuffer,U)}else if(ne){D.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)t.bindFramebuffer(36160,D.__webglFramebuffer[ye]),D.__webglDepthbuffer[ye]=n.createRenderbuffer(),qe(D.__webglDepthbuffer[ye],U,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),qe(D.__webglDepthbuffer,U,!1);t.bindFramebuffer(36160,null)}function ge(U,D,ne){const ye=r.get(U);D!==void 0&&ve(ye.__webglFramebuffer,U,U.texture,36064,3553),ne!==void 0&&ce(U)}function Le(U){const D=U.texture,ne=r.get(U),ye=r.get(D);U.addEventListener("dispose",P),U.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=n.createTexture()),ye.__version=D.version,o.memory.textures++);const Ee=U.isWebGLCubeRenderTarget===!0,Te=U.isWebGLMultipleRenderTargets===!0,je=S(U)||a;if(Ee){ne.__webglFramebuffer=[];for(let ie=0;ie<6;ie++)ne.__webglFramebuffer[ie]=n.createFramebuffer()}else if(ne.__webglFramebuffer=n.createFramebuffer(),Te)if(i.drawBuffers){const ie=U.texture;for(let Ze=0,tt=ie.length;Ze<tt;Ze++){const H=r.get(ie[Ze]);H.__webglTexture===void 0&&(H.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&U.samples>0&&He(U)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ne.__webglColorRenderbuffer);const ie=s.convert(D.format,D.encoding),Ze=s.convert(D.type),tt=L(D.internalFormat,ie,Ze,D.encoding),H=Je(U);n.renderbufferStorageMultisample(36161,H,tt,U.width,U.height),t.bindFramebuffer(36160,ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ne.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),U.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),qe(ne.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(36160,null)}if(Ee){t.bindTexture(34067,ye.__webglTexture),te(34067,D,je);for(let ie=0;ie<6;ie++)ve(ne.__webglFramebuffer[ie],U,D,36064,34069+ie);C(D,je)&&B(34067),t.unbindTexture()}else if(Te){const ie=U.texture;for(let Ze=0,tt=ie.length;Ze<tt;Ze++){const H=ie[Ze],N=r.get(H);t.bindTexture(3553,N.__webglTexture),te(3553,H,je),ve(ne.__webglFramebuffer,U,H,36064+Ze,3553),C(H,je)&&B(3553)}t.unbindTexture()}else{let ie=3553;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?ie=U.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ie,ye.__webglTexture),te(ie,D,je),ve(ne.__webglFramebuffer,U,D,36064,ie),C(D,je)&&B(ie),t.unbindTexture()}U.depthBuffer&&ce(U)}function _e(U){const D=S(U)||a,ne=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let ye=0,Ee=ne.length;ye<Ee;ye++){const Te=ne[ye];if(C(Te,D)){const je=U.isWebGLCubeRenderTarget?34067:3553,ie=r.get(Te).__webglTexture;t.bindTexture(je,ie),B(je),t.unbindTexture()}}}function et(U){if(a&&U.samples>0&&He(U)===!1){const D=U.width,ne=U.height;let ye=16384;const Ee=[36064],Te=U.stencilBuffer?33306:36096;U.depthBuffer&&Ee.push(Te);const je=r.get(U),ie=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;ie===!1&&(U.depthBuffer&&(ye|=256),U.stencilBuffer&&(ye|=1024)),t.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,je.__webglFramebuffer),ie===!0&&(n.invalidateFramebuffer(36008,[Te]),n.invalidateFramebuffer(36009,[Te])),n.blitFramebuffer(0,0,D,ne,0,0,D,ne,ye,9728),m&&n.invalidateFramebuffer(36008,Ee),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function Je(U){return Math.min(p,U.samples)}function He(U){const D=r.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function At(U){const D=o.render.frame;v.get(U)!==D&&(v.set(U,D),U.update())}function yt(U,D){const ne=U.encoding,ye=U.format,Ee=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===$h||ne!==or&&(ne===bt?a===!1?e.has("EXT_sRGB")===!0&&ye===dr?(U.format=$h,U.minFilter=Dt,U.generateMipmaps=!1):D=so.sRGBToLinear(D):(ye!==dr||Ee!==Ys)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ne)),D}this.allocateTextureUnit=V,this.resetTextureUnits=q,this.setTexture2D=le,this.setTexture2DArray=J,this.setTexture3D=Y,this.setTextureCube=he,this.rebindTextures=ge,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=_e,this.updateMultisampleRenderTarget=et,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=He}function uT(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Ys)return 5121;if(s===AE)return 32819;if(s===wE)return 32820;if(s===xE)return 5120;if(s===_E)return 5122;if(s===_l)return 5123;if(s===ME)return 5124;if(s===mc)return 5125;if(s===tr)return 5126;if(s===Br)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===SE)return 6406;if(s===dr)return 6408;if(s===Gv)return 6409;if(s===TE)return 6410;if(s===Gs)return 6402;if(s===qs)return 34041;if(s===Uv)return 6403;if(s===EE)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===$h)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===CE)return 36244;if(s===bE)return 33319;if(s===RE)return 33320;if(s===BE)return 36249;if(s===Mh||s===Ah||s===wh||s===Sh)if(o===bt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Mh)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ah)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===wh)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Sh)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Mh)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ah)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===wh)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Sh)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===X0||s===Q0||s===Y0||s===q0)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===X0)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Q0)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Y0)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===q0)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===LE)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Z0||s===$0)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Z0)return o===bt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===$0)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ey||s===ty||s===ny||s===ry||s===iy||s===sy||s===oy||s===ay||s===ly||s===uy||s===cy||s===fy||s===dy||s===hy)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===ey)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ty)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ny)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ry)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===iy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===sy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===oy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ay)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===ly)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===uy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===cy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===fy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===dy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===hy)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===py)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===py)return o===bt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===ks)return r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class Jv extends kt{constructor(e=[]){super();this.cameras=e}}Jv.prototype.isArrayCamera=!0;class pi extends mt{constructor(){super();this.type="Group"}}pi.prototype.isGroup=!0;const II={type:"move"};class kg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new pi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new pi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new I,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new I),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new pi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new I,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new I),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(II))),f&&e.hand){o=!0;for(const x of e.hand.values()){const y=t.getJointPose(x,r);if(f.joints[x.jointName]===void 0){const M=new pi;M.matrixAutoUpdate=!1,M.visible=!1,f.joints[x.jointName]=M,f.add(M)}const _=f.joints[x.jointName];y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=y.radius),_.visible=y!==null}const h=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],d=h.position.distanceTo(p.position),m=.02,v=.005;f.inputState.pinching&&d>m+v?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&d<=m-v&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),u!==null&&(u.visible=s!==null),f!==null&&(f.visible=o!==null),this}}class bp extends Yt{constructor(e,t,r,i,s,o,a,u,f,h){if(h=h!==void 0?h:Gs,h!==Gs&&h!==qs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Gs&&(r=_l),r===void 0&&h===qs&&(r=ks);super(null,i,s,o,a,u,h,r,f);this.image={width:e,height:t},this.magFilter=a!==void 0?a:Kt,this.minFilter=u!==void 0?u:Kt,this.flipY=!1,this.generateMipmaps=!1}}bp.prototype.isDepthTexture=!0;class DI extends Zi{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",u=null,f=null,h=null,p=null,d=null;const m=t.getContextAttributes();let v=null,x=null;const y=[],_=new Map,M=new kt;M.layers.enable(1),M.viewport=new Rt;const A=new kt;A.layers.enable(2),A.viewport=new Rt;const S=[M,A],T=new Jv;T.layers.enable(1),T.layers.enable(2);let C=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let re=y[V];return re===void 0&&(re=new kg,y[V]=re),re.getTargetRaySpace()},this.getControllerGrip=function(V){let re=y[V];return re===void 0&&(re=new kg,y[V]=re),re.getGripSpace()},this.getHand=function(V){let re=y[V];return re===void 0&&(re=new kg,y[V]=re),re.getHandSpace()};function L(V){const re=_.get(V.inputSource);re&&re.dispatchEvent({type:V.type,data:V.inputSource})}function F(){_.forEach(function(V,re){V.disconnect(re)}),_.clear(),C=null,B=null,e.setRenderTarget(v),p=null,h=null,f=null,i=null,x=null,q.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(V){if(i=V,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",F),i.addEventListener("inputsourceschange",G),m.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const re={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,re),i.updateRenderState({baseLayer:p}),x=new _n(p.framebufferWidth,p.framebufferHeight,{format:dr,type:Ys,encoding:e.outputEncoding})}else{let re=null,le=null,J=null;m.depth&&(J=m.stencil?35056:33190,re=m.stencil?qs:Gs,le=m.stencil?ks:_l);const Y={colorFormat:e.outputEncoding===bt?35907:32856,depthFormat:J,scaleFactor:s};f=new XRWebGLBinding(i,t),h=f.createProjectionLayer(Y),i.updateRenderState({layers:[h]}),x=new _n(h.textureWidth,h.textureHeight,{format:dr,type:Ys,depthTexture:new bp(h.textureWidth,h.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const he=e.properties.get(x);he.__ignoreDepthValues=h.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(1),o=await i.requestReferenceSpace(a),q.setContext(i),q.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function G(V){const re=i.inputSources;for(let le=0;le<y.length;le++)_.set(re[le],y[le]);for(let le=0;le<V.removed.length;le++){const J=V.removed[le],Y=_.get(J);Y&&(Y.dispatchEvent({type:"disconnected",data:J}),_.delete(J))}for(let le=0;le<V.added.length;le++){const J=V.added[le],Y=_.get(J);Y&&Y.dispatchEvent({type:"connected",data:J})}}const b=new I,P=new I;function W(V,re,le){b.setFromMatrixPosition(re.matrixWorld),P.setFromMatrixPosition(le.matrixWorld);const J=b.distanceTo(P),Y=re.projectionMatrix.elements,he=le.projectionMatrix.elements,Se=Y[14]/(Y[10]-1),we=Y[14]/(Y[10]+1),te=(Y[9]+1)/Y[5],Ke=(Y[9]-1)/Y[5],Ne=(Y[8]-1)/Y[0],Fe=(he[8]+1)/he[0],ve=Se*Ne,qe=Se*Fe,ue=J/(-Ne+Fe),ce=ue*-Ne;re.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(ce),V.translateZ(ue),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const ge=Se+ue,Le=we+ue,_e=ve-ce,et=qe+(J-ce),Je=te*we/Le*ge,He=Ke*we/Le*ge;V.projectionMatrix.makePerspective(_e,et,Je,He,ge,Le)}function z(V,re){re===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(re.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(i===null)return;T.near=A.near=M.near=V.near,T.far=A.far=M.far=V.far,(C!==T.near||B!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),C=T.near,B=T.far);const re=V.parent,le=T.cameras;z(T,re);for(let Y=0;Y<le.length;Y++)z(le[Y],re);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),V.position.copy(T.position),V.quaternion.copy(T.quaternion),V.scale.copy(T.scale),V.matrix.copy(T.matrix),V.matrixWorld.copy(T.matrixWorld);const J=V.children;for(let Y=0,he=J.length;Y<he;Y++)J[Y].updateMatrixWorld(!0);le.length===2?W(T,M,A):T.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(V){h!==null&&(h.fixedFoveation=V),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=V)};let K=null;function X(V,re){if(u=re.getViewerPose(o),d=re,u!==null){const J=u.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let Y=!1;J.length!==T.cameras.length&&(T.cameras.length=0,Y=!0);for(let he=0;he<J.length;he++){const Se=J[he];let we=null;if(p!==null)we=p.getViewport(Se);else{const Ke=f.getViewSubImage(h,Se);we=Ke.viewport,he===0&&(e.setRenderTargetTextures(x,Ke.colorTexture,h.ignoreDepthValues?void 0:Ke.depthStencilTexture),e.setRenderTarget(x))}const te=S[he];te.matrix.fromArray(Se.transform.matrix),te.projectionMatrix.fromArray(Se.projectionMatrix),te.viewport.set(we.x,we.y,we.width,we.height),he===0&&T.matrix.copy(te.matrix),Y===!0&&T.cameras.push(te)}}const le=i.inputSources;for(let J=0;J<y.length;J++){const Y=y[J],he=le[J];Y.update(he,re,o)}K&&K(V,re),d=null}const q=new eT;q.setAnimationLoop(X),this.setAnimationLoop=function(V){K=V},this.dispose=function(){}}}function FI(n,e){function t(x,y){x.fogColor.value.copy(y.color),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function r(x,y,_,M,A){y.isMeshBasicMaterial||y.isMeshLambertMaterial?i(x,y):y.isMeshToonMaterial?(i(x,y),h(x,y)):y.isMeshPhongMaterial?(i(x,y),f(x,y)):y.isMeshStandardMaterial?(i(x,y),p(x,y),y.isMeshPhysicalMaterial&&d(x,y,A)):y.isMeshMatcapMaterial?(i(x,y),m(x,y)):y.isMeshDepthMaterial?i(x,y):y.isMeshDistanceMaterial?(i(x,y),v(x,y)):y.isMeshNormalMaterial?i(x,y):y.isLineBasicMaterial?(s(x,y),y.isLineDashedMaterial&&o(x,y)):y.isPointsMaterial?a(x,y,_,M):y.isSpriteMaterial?u(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function i(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.bumpMap&&(x.bumpMap.value=y.bumpMap,x.bumpScale.value=y.bumpScale,y.side===sr&&(x.bumpScale.value*=-1)),y.displacementMap&&(x.displacementMap.value=y.displacementMap,x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap),y.normalMap&&(x.normalMap.value=y.normalMap,x.normalScale.value.copy(y.normalScale),y.side===sr&&x.normalScale.value.negate()),y.specularMap&&(x.specularMap.value=y.specularMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const _=e.get(y).envMap;if(_&&(x.envMap.value=_,x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap){x.lightMap.value=y.lightMap;const S=n.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=y.lightMapIntensity*S}y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity);let M;y.map?M=y.map:y.specularMap?M=y.specularMap:y.displacementMap?M=y.displacementMap:y.normalMap?M=y.normalMap:y.bumpMap?M=y.bumpMap:y.roughnessMap?M=y.roughnessMap:y.metalnessMap?M=y.metalnessMap:y.alphaMap?M=y.alphaMap:y.emissiveMap?M=y.emissiveMap:y.clearcoatMap?M=y.clearcoatMap:y.clearcoatNormalMap?M=y.clearcoatNormalMap:y.clearcoatRoughnessMap?M=y.clearcoatRoughnessMap:y.specularIntensityMap?M=y.specularIntensityMap:y.specularColorMap?M=y.specularColorMap:y.transmissionMap?M=y.transmissionMap:y.thicknessMap?M=y.thicknessMap:y.sheenColorMap?M=y.sheenColorMap:y.sheenRoughnessMap&&(M=y.sheenRoughnessMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),x.uvTransform.value.copy(M.matrix));let A;y.aoMap?A=y.aoMap:y.lightMap&&(A=y.lightMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uv2Transform.value.copy(A.matrix))}function s(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity}function o(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function a(x,y,_,M){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*_,x.scale.value=M*.5,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);let A;y.map?A=y.map:y.alphaMap&&(A=y.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uvTransform.value.copy(A.matrix))}function u(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map),y.alphaMap&&(x.alphaMap.value=y.alphaMap),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);let _;y.map?_=y.map:y.alphaMap&&(_=y.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),x.uvTransform.value.copy(_.matrix))}function f(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function h(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function p(x,y){x.roughness.value=y.roughness,x.metalness.value=y.metalness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap),e.get(y).envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function d(x,y,_){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),x.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===sr&&x.clearcoatNormalScale.value.negate())),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap)}function m(x,y){y.matcap&&(x.matcap.value=y.matcap)}function v(x,y){x.referencePosition.value.copy(y.referencePosition),x.nearDistance.value=y.nearDistance,x.farDistance.value=y.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function NI(){const n=kc("canvas");return n.style.display="block",n}function Bt(n={}){const e=n.canvas!==void 0?n.canvas:NI(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,u=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h;n.context!==void 0?h=t.getContextAttributes().alpha:h=n.alpha!==void 0?n.alpha:!1;let p=null,d=null;const m=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=or,this.physicallyCorrectLights=!1,this.toneMapping=qr,this.toneMappingExposure=1;const x=this;let y=!1,_=0,M=0,A=null,S=-1,T=null;const C=new Rt,B=new Rt;let L=null,F=e.width,G=e.height,b=1,P=null,W=null;const z=new Rt(0,0,F,G),K=new Rt(0,0,F,G);let X=!1;const q=new tf;let V=!1,re=!1,le=null;const J=new Ge,Y=new de,he=new I,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function we(){return A===null?b:1}let te=t;function Ke(O,$){for(let se=0;se<O.length;se++){const ee=O[se],me=e.getContext(ee,$);if(me!==null)return me}return null}try{const O={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${vp}`),e.addEventListener("webglcontextlost",N,!1),e.addEventListener("webglcontextrestored",fe,!1),te===null){const $=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&$.shift(),te=Ke($,O),te===null)throw Ke($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Ne,Fe,ve,qe,ue,ce,ge,Le,_e,et,Je,He,At,yt,U,D,ne,ye,Ee,Te,je,ie,Ze;function tt(){Ne=new t3(te),Fe=new QP(te,Ne,n),Ne.init(Fe),ie=new uT(te,Ne,Fe),ve=new LI(te,Ne,Fe),qe=new i3(te),ue=new _I,ce=new PI(te,Ne,ve,ue,Fe,ie,qe),ge=new qP(x),Le=new e3(x),_e=new vL(te,Fe),Ze=new KP(te,Ne,_e,Fe),et=new n3(te,_e,qe,Ze),Je=new l3(te,et,_e,qe),Ee=new a3(te,Fe,ce),D=new YP(ue),He=new xI(x,ge,Le,Ne,Fe,Ze,D),At=new FI(x,ue),yt=new AI,U=new bI(Ne,Fe),ye=new jP(x,ge,ve,Je,h,o),ne=new lT(x,Je,Fe),Te=new XP(te,Ne,qe,Fe),je=new r3(te,Ne,qe,Fe),qe.programs=He.programs,x.capabilities=Fe,x.extensions=Ne,x.properties=ue,x.renderLists=yt,x.shadowMap=ne,x.state=ve,x.info=qe}tt();const H=new DI(x,te);this.xr=H,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const O=Ne.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Ne.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return b},this.setPixelRatio=function(O){O!==void 0&&(b=O,this.setSize(F,G,!1))},this.getSize=function(O){return O.set(F,G)},this.setSize=function(O,$,se){if(H.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=O,G=$,e.width=Math.floor(O*b),e.height=Math.floor($*b),se!==!1&&(e.style.width=O+"px",e.style.height=$+"px"),this.setViewport(0,0,O,$)},this.getDrawingBufferSize=function(O){return O.set(F*b,G*b).floor()},this.setDrawingBufferSize=function(O,$,se){F=O,G=$,b=se,e.width=Math.floor(O*se),e.height=Math.floor($*se),this.setViewport(0,0,O,$)},this.getCurrentViewport=function(O){return O.copy(C)},this.getViewport=function(O){return O.copy(z)},this.setViewport=function(O,$,se,ee){O.isVector4?z.set(O.x,O.y,O.z,O.w):z.set(O,$,se,ee),ve.viewport(C.copy(z).multiplyScalar(b).floor())},this.getScissor=function(O){return O.copy(K)},this.setScissor=function(O,$,se,ee){O.isVector4?K.set(O.x,O.y,O.z,O.w):K.set(O,$,se,ee),ve.scissor(B.copy(K).multiplyScalar(b).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(O){ve.setScissorTest(X=O)},this.setOpaqueSort=function(O){P=O},this.setTransparentSort=function(O){W=O},this.getClearColor=function(O){return O.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(O=!0,$=!0,se=!0){let ee=0;O&&(ee|=16384),$&&(ee|=256),se&&(ee|=1024),te.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",N,!1),e.removeEventListener("webglcontextrestored",fe,!1),yt.dispose(),U.dispose(),ue.dispose(),ge.dispose(),Le.dispose(),Je.dispose(),Ze.dispose(),He.dispose(),H.dispose(),H.removeEventListener("sessionstart",Ve),H.removeEventListener("sessionend",ot),le&&(le.dispose(),le=null),ut.stop()};function N(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const O=qe.autoReset,$=ne.enabled,se=ne.autoUpdate,ee=ne.needsUpdate,me=ne.type;tt(),qe.autoReset=O,ne.enabled=$,ne.autoUpdate=se,ne.needsUpdate=ee,ne.type=me}function pe(O){const $=O.target;$.removeEventListener("dispose",pe),De($)}function De(O){be(O),ue.remove(O)}function be(O){const $=ue.get(O).programs;$!==void 0&&($.forEach(function(se){He.releaseProgram(se)}),O.isShaderMaterial&&He.releaseShaderCache(O))}this.renderBufferDirect=function(O,$,se,ee,me,nt){$===null&&($=Se);const at=me.isMesh&&me.matrixWorld.determinant()<0,ft=pf(O,$,se,ee,me);ve.setMaterial(ee,at);let ct=se.index;const St=se.attributes.position;if(ct===null){if(St===void 0||St.count===0)return}else if(ct.count===0)return;let vt=1;ee.wireframe===!0&&(ct=et.getWireframeAttribute(se),vt=2),Ze.setup(me,ee,ft,se,ct);let gt,Lt=Te;ct!==null&&(gt=_e.get(ct),Lt=je,Lt.setIndex(gt));const Fr=ct!==null?ct.count:St.count,Nr=se.drawRange.start*vt,ri=se.drawRange.count*vt,An=nt!==null?nt.start*vt:0,dt=nt!==null?nt.count*vt:1/0,Et=Math.max(Nr,An),lt=Math.min(Fr,Nr+ri,An+dt)-1,dn=Math.max(0,lt-Et+1);if(dn!==0){if(me.isMesh)ee.wireframe===!0?(ve.setLineWidth(ee.wireframeLinewidth*we()),Lt.setMode(1)):Lt.setMode(4);else if(me.isLine){let Gt=ee.linewidth;Gt===void 0&&(Gt=1),ve.setLineWidth(Gt*we()),me.isLineSegments?Lt.setMode(1):me.isLineLoop?Lt.setMode(2):Lt.setMode(3)}else me.isPoints?Lt.setMode(0):me.isSprite&&Lt.setMode(4);if(me.isInstancedMesh)Lt.renderInstances(Et,dn,me.count);else if(se.isInstancedBufferGeometry){const Gt=Math.min(se.instanceCount,se._maxInstanceCount);Lt.renderInstances(Et,dn,Gt)}else Lt.render(Et,dn)}},this.compile=function(O,$){d=U.get(O),d.init(),v.push(d),O.traverseVisible(function(se){se.isLight&&se.layers.test($.layers)&&(d.pushLight(se),se.castShadow&&d.pushShadow(se))}),d.setupLights(x.physicallyCorrectLights),O.traverse(function(se){const ee=se.material;if(ee)if(Array.isArray(ee))for(let me=0;me<ee.length;me++){const nt=ee[me];da(nt,O,se)}else da(ee,O,se)}),v.pop(),d=null};let We=null;function xe(O){We&&We(O)}function Ve(){ut.stop()}function ot(){ut.start()}const ut=new eT;ut.setAnimationLoop(xe),typeof self!="undefined"&&ut.setContext(self),this.setAnimationLoop=function(O){We=O,H.setAnimationLoop(O),O===null?ut.stop():ut.start()},H.addEventListener("sessionstart",Ve),H.addEventListener("sessionend",ot),this.render=function(O,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;O.autoUpdate===!0&&O.updateMatrixWorld(),$.parent===null&&$.updateMatrixWorld(),H.enabled===!0&&H.isPresenting===!0&&(H.cameraAutoUpdate===!0&&H.updateCamera($),$=H.getCamera()),O.isScene===!0&&O.onBeforeRender(x,O,$,A),d=U.get(O,v.length),d.init(),v.push(d),J.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),q.setFromProjectionMatrix(J),re=this.localClippingEnabled,V=D.init(this.clippingPlanes,re,$),p=yt.get(O,m.length),p.init(),m.push(p),yr(O,$,0,x.sortObjects),p.finish(),x.sortObjects===!0&&p.sort(P,W),V===!0&&D.beginShadows();const se=d.state.shadowsArray;if(ne.render(se,O,$),V===!0&&D.endShadows(),this.info.autoReset===!0&&this.info.reset(),ye.render(p,O),d.setupLights(x.physicallyCorrectLights),$.isArrayCamera){const ee=$.cameras;for(let me=0,nt=ee.length;me<nt;me++){const at=ee[me];vr(p,O,at,at.viewport)}}else vr(p,O,$);A!==null&&(ce.updateMultisampleRenderTarget(A),ce.updateRenderTargetMipmap(A)),O.isScene===!0&&O.onAfterRender(x,O,$),Ze.resetDefaultState(),S=-1,T=null,v.pop(),v.length>0?d=v[v.length-1]:d=null,m.pop(),m.length>0?p=m[m.length-1]:p=null};function yr(O,$,se,ee){if(O.visible===!1)return;if(O.layers.test($.layers)){if(O.isGroup)se=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update($);else if(O.isLight)d.pushLight(O),O.castShadow&&d.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||q.intersectsSprite(O)){ee&&he.setFromMatrixPosition(O.matrixWorld).applyMatrix4(J);const at=Je.update(O),ft=O.material;ft.visible&&p.push(O,at,ft,se,he.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(O.isSkinnedMesh&&O.skeleton.frame!==qe.render.frame&&(O.skeleton.update(),O.skeleton.frame=qe.render.frame),!O.frustumCulled||q.intersectsObject(O))){ee&&he.setFromMatrixPosition(O.matrixWorld).applyMatrix4(J);const at=Je.update(O),ft=O.material;if(Array.isArray(ft)){const ct=at.groups;for(let St=0,vt=ct.length;St<vt;St++){const gt=ct[St],Lt=ft[gt.materialIndex];Lt&&Lt.visible&&p.push(O,at,Lt,se,he.z,gt)}}else ft.visible&&p.push(O,at,ft,se,he.z,null)}}const nt=O.children;for(let at=0,ft=nt.length;at<ft;at++)yr(nt[at],$,se,ee)}function vr(O,$,se,ee){const me=O.opaque,nt=O.transmissive,at=O.transparent;d.setupLightsView(se),nt.length>0&&nu(me,$,se),ee&&ve.viewport(C.copy(ee)),me.length>0&&fa(me,$,se),nt.length>0&&fa(nt,$,se),at.length>0&&fa(at,$,se),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function nu(O,$,se){const ee=Fe.isWebGL2;le===null&&(le=new _n(1,1,{generateMipmaps:!0,type:ie.convert(Br)!==null?Br:Ys,minFilter:qi,samples:ee&&s===!0?4:0})),x.getDrawingBufferSize(Y),ee?le.setSize(Y.x,Y.y):le.setSize(ep(Y.x),ep(Y.y));const me=x.getRenderTarget();x.setRenderTarget(le),x.clear();const nt=x.toneMapping;x.toneMapping=qr,fa(O,$,se),x.toneMapping=nt,ce.updateMultisampleRenderTarget(le),ce.updateRenderTargetMipmap(le),x.setRenderTarget(me)}function fa(O,$,se){const ee=$.isScene===!0?$.overrideMaterial:null;for(let me=0,nt=O.length;me<nt;me++){const at=O[me],ft=at.object,ct=at.geometry,St=ee===null?at.material:ee,vt=at.group;ft.layers.test(se.layers)&&df(ft,$,se,ct,St,vt)}}function df(O,$,se,ee,me,nt){O.onBeforeRender(x,$,se,ee,me,nt),O.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),me.onBeforeRender(x,$,se,ee,O,nt),me.transparent===!0&&me.side===Xs?(me.side=sr,me.needsUpdate=!0,x.renderBufferDirect(se,$,ee,me,O,nt),me.side=Ks,me.needsUpdate=!0,x.renderBufferDirect(se,$,ee,me,O,nt),me.side=Xs):x.renderBufferDirect(se,$,ee,me,O,nt),O.onAfterRender(x,$,se,ee,me,nt)}function da(O,$,se){$.isScene!==!0&&($=Se);const ee=ue.get(O),me=d.state.lights,nt=d.state.shadowsArray,at=me.state.version,ft=He.getParameters(O,me.state,nt,$,se),ct=He.getProgramCacheKey(ft);let St=ee.programs;ee.environment=O.isMeshStandardMaterial?$.environment:null,ee.fog=$.fog,ee.envMap=(O.isMeshStandardMaterial?Le:ge).get(O.envMap||ee.environment),St===void 0&&(O.addEventListener("dispose",pe),St=new Map,ee.programs=St);let vt=St.get(ct);if(vt!==void 0){if(ee.currentProgram===vt&&ee.lightsStateVersion===at)return hf(O,ft),vt}else ft.uniforms=He.getUniforms(O),O.onBuild(se,ft,x),O.onBeforeCompile(ft,x),vt=He.acquireProgram(ft,ct),St.set(ct,vt),ee.uniforms=ft.uniforms;const gt=ee.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(gt.clippingPlanes=D.uniform),hf(O,ft),ee.needsLights=gf(O),ee.lightsStateVersion=at,ee.needsLights&&(gt.ambientLightColor.value=me.state.ambient,gt.lightProbe.value=me.state.probe,gt.directionalLights.value=me.state.directional,gt.directionalLightShadows.value=me.state.directionalShadow,gt.spotLights.value=me.state.spot,gt.spotLightShadows.value=me.state.spotShadow,gt.rectAreaLights.value=me.state.rectArea,gt.ltc_1.value=me.state.rectAreaLTC1,gt.ltc_2.value=me.state.rectAreaLTC2,gt.pointLights.value=me.state.point,gt.pointLightShadows.value=me.state.pointShadow,gt.hemisphereLights.value=me.state.hemi,gt.directionalShadowMap.value=me.state.directionalShadowMap,gt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,gt.spotShadowMap.value=me.state.spotShadowMap,gt.spotShadowMatrix.value=me.state.spotShadowMatrix,gt.pointShadowMap.value=me.state.pointShadowMap,gt.pointShadowMatrix.value=me.state.pointShadowMatrix);const Lt=vt.getUniforms(),Fr=Us.seqWithValue(Lt.seq,gt);return ee.currentProgram=vt,ee.uniformsList=Fr,vt}function hf(O,$){const se=ue.get(O);se.outputEncoding=$.outputEncoding,se.instancing=$.instancing,se.skinning=$.skinning,se.morphTargets=$.morphTargets,se.morphNormals=$.morphNormals,se.morphColors=$.morphColors,se.morphTargetsCount=$.morphTargetsCount,se.numClippingPlanes=$.numClippingPlanes,se.numIntersection=$.numClipIntersection,se.vertexAlphas=$.vertexAlphas,se.vertexTangents=$.vertexTangents,se.toneMapping=$.toneMapping}function pf(O,$,se,ee,me){$.isScene!==!0&&($=Se),ce.resetTextureUnits();const nt=$.fog,at=ee.isMeshStandardMaterial?$.environment:null,ft=A===null?x.outputEncoding:A.isXRRenderTarget===!0?A.texture.encoding:or,ct=(ee.isMeshStandardMaterial?Le:ge).get(ee.envMap||at),St=ee.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,vt=!!ee.normalMap&&!!se.attributes.tangent,gt=!!se.morphAttributes.position,Lt=!!se.morphAttributes.normal,Fr=!!se.morphAttributes.color,Nr=ee.toneMapped?x.toneMapping:qr,ri=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,An=ri!==void 0?ri.length:0,dt=ue.get(ee),Et=d.state.lights;if(V===!0&&(re===!0||O!==T)){const Qn=O===T&&ee.id===S;D.setState(ee,O,Qn)}let lt=!1;ee.version===dt.__version?(dt.needsLights&&dt.lightsStateVersion!==Et.state.version||dt.outputEncoding!==ft||me.isInstancedMesh&&dt.instancing===!1||!me.isInstancedMesh&&dt.instancing===!0||me.isSkinnedMesh&&dt.skinning===!1||!me.isSkinnedMesh&&dt.skinning===!0||dt.envMap!==ct||ee.fog&&dt.fog!==nt||dt.numClippingPlanes!==void 0&&(dt.numClippingPlanes!==D.numPlanes||dt.numIntersection!==D.numIntersection)||dt.vertexAlphas!==St||dt.vertexTangents!==vt||dt.morphTargets!==gt||dt.morphNormals!==Lt||dt.morphColors!==Fr||dt.toneMapping!==Nr||Fe.isWebGL2===!0&&dt.morphTargetsCount!==An)&&(lt=!0):(lt=!0,dt.__version=ee.version);let dn=dt.currentProgram;lt===!0&&(dn=da(ee,$,me));let Gt=!1,ln=!1,Or=!1;const jt=dn.getUniforms(),un=dt.uniforms;if(ve.useProgram(dn.program)&&(Gt=!0,ln=!0,Or=!0),ee.id!==S&&(S=ee.id,ln=!0),Gt||T!==O){if(jt.setValue(te,"projectionMatrix",O.projectionMatrix),Fe.logarithmicDepthBuffer&&jt.setValue(te,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),T!==O&&(T=O,ln=!0,Or=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){const Qn=jt.map.cameraPosition;Qn!==void 0&&Qn.setValue(te,he.setFromMatrixPosition(O.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&jt.setValue(te,"isOrthographic",O.isOrthographicCamera===!0),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||me.isSkinnedMesh)&&jt.setValue(te,"viewMatrix",O.matrixWorldInverse)}if(me.isSkinnedMesh){jt.setOptional(te,me,"bindMatrix"),jt.setOptional(te,me,"bindMatrixInverse");const Qn=me.skeleton;Qn&&(Fe.floatVertexTextures?(Qn.boneTexture===null&&Qn.computeBoneTexture(),jt.setValue(te,"boneTexture",Qn.boneTexture,ce),jt.setValue(te,"boneTextureSize",Qn.boneTextureSize)):jt.setOptional(te,Qn,"boneMatrices"))}const ts=se.morphAttributes;return(ts.position!==void 0||ts.normal!==void 0||ts.color!==void 0&&Fe.isWebGL2===!0)&&Ee.update(me,se,ee,dn),(ln||dt.receiveShadow!==me.receiveShadow)&&(dt.receiveShadow=me.receiveShadow,jt.setValue(te,"receiveShadow",me.receiveShadow)),ln&&(jt.setValue(te,"toneMappingExposure",x.toneMappingExposure),dt.needsLights&&mf(un,Or),nt&&ee.fog&&At.refreshFogUniforms(un,nt),At.refreshMaterialUniforms(un,ee,b,G,le),Us.upload(te,dt.uniformsList,un,ce)),ee.isShaderMaterial&&ee.uniformsNeedUpdate===!0&&(Us.upload(te,dt.uniformsList,un,ce),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&jt.setValue(te,"center",me.center),jt.setValue(te,"modelViewMatrix",me.modelViewMatrix),jt.setValue(te,"normalMatrix",me.normalMatrix),jt.setValue(te,"modelMatrix",me.matrixWorld),dn}function mf(O,$){O.ambientLightColor.needsUpdate=$,O.lightProbe.needsUpdate=$,O.directionalLights.needsUpdate=$,O.directionalLightShadows.needsUpdate=$,O.pointLights.needsUpdate=$,O.pointLightShadows.needsUpdate=$,O.spotLights.needsUpdate=$,O.spotLightShadows.needsUpdate=$,O.rectAreaLights.needsUpdate=$,O.hemisphereLights.needsUpdate=$}function gf(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(O,$,se){ue.get(O.texture).__webglTexture=$,ue.get(O.depthTexture).__webglTexture=se;const ee=ue.get(O);ee.__hasExternalTextures=!0,ee.__hasExternalTextures&&(ee.__autoAllocateDepthBuffer=se===void 0,ee.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ee.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,$){const se=ue.get(O);se.__webglFramebuffer=$,se.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(O,$=0,se=0){A=O,_=$,M=se;let ee=!0;if(O){const ct=ue.get(O);ct.__useDefaultFramebuffer!==void 0?(ve.bindFramebuffer(36160,null),ee=!1):ct.__webglFramebuffer===void 0?ce.setupRenderTarget(O):ct.__hasExternalTextures&&ce.rebindTextures(O,ue.get(O.texture).__webglTexture,ue.get(O.depthTexture).__webglTexture)}let me=null,nt=!1,at=!1;if(O){const ct=O.texture;(ct.isData3DTexture||ct.isDataArrayTexture)&&(at=!0);const St=ue.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(me=St[$],nt=!0):Fe.isWebGL2&&O.samples>0&&ce.useMultisampledRTT(O)===!1?me=ue.get(O).__webglMultisampledFramebuffer:me=St,C.copy(O.viewport),B.copy(O.scissor),L=O.scissorTest}else C.copy(z).multiplyScalar(b).floor(),B.copy(K).multiplyScalar(b).floor(),L=X;if(ve.bindFramebuffer(36160,me)&&Fe.drawBuffers&&ee&&ve.drawBuffers(O,me),ve.viewport(C),ve.scissor(B),ve.setScissorTest(L),nt){const ct=ue.get(O.texture);te.framebufferTexture2D(36160,36064,34069+$,ct.__webglTexture,se)}else if(at){const ct=ue.get(O.texture),St=$||0;te.framebufferTextureLayer(36160,36064,ct.__webglTexture,se||0,St)}S=-1},this.readRenderTargetPixels=function(O,$,se,ee,me,nt,at){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=ue.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&at!==void 0&&(ft=ft[at]),ft){ve.bindFramebuffer(36160,ft);try{const ct=O.texture,St=ct.format,vt=ct.type;if(St!==dr&&ie.convert(St)!==te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=vt===Br&&(Ne.has("EXT_color_buffer_half_float")||Fe.isWebGL2&&Ne.has("EXT_color_buffer_float"));if(vt!==Ys&&ie.convert(vt)!==te.getParameter(35738)&&!(vt===tr&&(Fe.isWebGL2||Ne.has("OES_texture_float")||Ne.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=O.width-ee&&se>=0&&se<=O.height-me&&te.readPixels($,se,ee,me,ie.convert(St),ie.convert(vt),nt)}finally{const ct=A!==null?ue.get(A).__webglFramebuffer:null;ve.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(O,$,se=0){if($.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const ee=Math.pow(2,-se),me=Math.floor($.image.width*ee),nt=Math.floor($.image.height*ee);ce.setTexture2D($,0),te.copyTexSubImage2D(3553,se,0,0,O.x,O.y,me,nt),ve.unbindTexture()},this.copyTextureToTexture=function(O,$,se,ee=0){const me=$.image.width,nt=$.image.height,at=ie.convert(se.format),ft=ie.convert(se.type);ce.setTexture2D(se,0),te.pixelStorei(37440,se.flipY),te.pixelStorei(37441,se.premultiplyAlpha),te.pixelStorei(3317,se.unpackAlignment),$.isDataTexture?te.texSubImage2D(3553,ee,O.x,O.y,me,nt,at,ft,$.image.data):$.isCompressedTexture?te.compressedTexSubImage2D(3553,ee,O.x,O.y,$.mipmaps[0].width,$.mipmaps[0].height,at,$.mipmaps[0].data):te.texSubImage2D(3553,ee,O.x,O.y,at,ft,$.image),ee===0&&se.generateMipmaps&&te.generateMipmap(3553),ve.unbindTexture()},this.copyTextureToTexture3D=function(O,$,se,ee,me=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const nt=O.max.x-O.min.x+1,at=O.max.y-O.min.y+1,ft=O.max.z-O.min.z+1,ct=ie.convert(ee.format),St=ie.convert(ee.type);let vt;if(ee.isData3DTexture)ce.setTexture3D(ee,0),vt=32879;else if(ee.isDataArrayTexture)ce.setTexture2DArray(ee,0),vt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(37440,ee.flipY),te.pixelStorei(37441,ee.premultiplyAlpha),te.pixelStorei(3317,ee.unpackAlignment);const gt=te.getParameter(3314),Lt=te.getParameter(32878),Fr=te.getParameter(3316),Nr=te.getParameter(3315),ri=te.getParameter(32877),An=se.isCompressedTexture?se.mipmaps[0]:se.image;te.pixelStorei(3314,An.width),te.pixelStorei(32878,An.height),te.pixelStorei(3316,O.min.x),te.pixelStorei(3315,O.min.y),te.pixelStorei(32877,O.min.z),se.isDataTexture||se.isData3DTexture?te.texSubImage3D(vt,me,$.x,$.y,$.z,nt,at,ft,ct,St,An.data):se.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(vt,me,$.x,$.y,$.z,nt,at,ft,ct,An.data)):te.texSubImage3D(vt,me,$.x,$.y,$.z,nt,at,ft,ct,St,An),te.pixelStorei(3314,gt),te.pixelStorei(32878,Lt),te.pixelStorei(3316,Fr),te.pixelStorei(3315,Nr),te.pixelStorei(32877,ri),me===0&&ee.generateMipmaps&&te.generateMipmap(vt),ve.unbindTexture()},this.initTexture=function(O){ce.setTexture2D(O,0),ve.unbindTexture()},this.resetState=function(){_=0,M=0,A=null,ve.reset(),Ze.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Bt.prototype.isWebGLRenderer=!0;class cT extends Bt{}cT.prototype.isWebGL1Renderer=!0;class nf{constructor(e,t=25e-5){this.name="",this.color=new Ae(e),this.density=t}clone(){return new nf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}nf.prototype.isFogExp2=!0;class rf{constructor(e,t=1,r=1e3){this.name="",this.color=new Ae(e),this.near=t,this.far=r}clone(){return new rf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}rf.prototype.isFog=!0;class ql extends mt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}ql.prototype.isScene=!0;class lo{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Al,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=pr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}lo.prototype.isInterleavedBuffer=!0;const Wn=new I;class Xi{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Wn.fromBufferAttribute(this,t),Wn.applyMatrix4(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Wn.fromBufferAttribute(this,t),Wn.applyNormalMatrix(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Wn.fromBufferAttribute(this,t),Wn.transformDirection(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new pt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xi(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Xi.prototype.isInterleavedBufferAttribute=!0;class Rp extends Wt{constructor(e){super();this.type="SpriteMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}Rp.prototype.isSpriteMaterial=!0;let Ua;const Hu=new I,Ha=new I,za=new I,Va=new de,zu=new de,fT=new Ge,Gd=new I,Vu=new I,Ud=new I,$A=new de,Gg=new de,ew=new de;class Bp extends mt{constructor(e){super();if(this.type="Sprite",Ua===void 0){Ua=new Ye;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new lo(t,5);Ua.setIndex([0,1,2,0,2,3]),Ua.setAttribute("position",new Xi(r,3,0,!1)),Ua.setAttribute("uv",new Xi(r,2,3,!1))}this.geometry=Ua,this.material=e!==void 0?e:new Rp,this.center=new de(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ha.setFromMatrixScale(this.matrixWorld),fT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),za.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ha.multiplyScalar(-za.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Hd(Gd.set(-.5,-.5,0),za,o,Ha,i,s),Hd(Vu.set(.5,-.5,0),za,o,Ha,i,s),Hd(Ud.set(.5,.5,0),za,o,Ha,i,s),$A.set(0,0),Gg.set(1,0),ew.set(1,1);let a=e.ray.intersectTriangle(Gd,Vu,Ud,!1,Hu);if(a===null&&(Hd(Vu.set(-.5,.5,0),za,o,Ha,i,s),Gg.set(0,1),a=e.ray.intersectTriangle(Gd,Ud,Vu,!1,Hu),a===null))return;const u=e.ray.origin.distanceTo(Hu);u<e.near||u>e.far||t.push({distance:u,point:Hu.clone(),uv:sn.getUV(Hu,Gd,Vu,Ud,$A,Gg,ew,new de),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}Bp.prototype.isSprite=!0;function Hd(n,e,t,r,i,s){Va.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(zu.x=s*Va.x-i*Va.y,zu.y=i*Va.x+s*Va.y):zu.copy(Va),n.copy(e),n.x+=zu.x,n.y+=zu.y,n.applyMatrix4(fT)}const zd=new I,tw=new I;class dT extends mt{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){zd.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(zd);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zd.setFromMatrixPosition(e.matrixWorld),tw.setFromMatrixPosition(this.matrixWorld);const r=zd.distanceTo(tw)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const nw=new I,rw=new Rt,iw=new Rt,OI=new I,sw=new Ge;class sf extends Qt{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ge,this.bindMatrixInverse=new Ge}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Rt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;rw.fromBufferAttribute(i.attributes.skinIndex,e),iw.fromBufferAttribute(i.attributes.skinWeight,e),nw.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=iw.getComponent(s);if(o!==0){const a=rw.getComponent(s);sw.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(OI.copy(nw).applyMatrix4(sw),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}sf.prototype.isSkinnedMesh=!0;class of extends mt{constructor(){super();this.type="Bone"}}of.prototype.isBone=!0;class Hs extends Yt{constructor(e=null,t=1,r=1,i,s,o,a,u,f=Kt,h=Kt,p,d){super(null,o,a,u,f,h,i,s,p,d);this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Hs.prototype.isDataTexture=!0;const ow=new Ge,kI=new Ge;class af{constructor(e=[],t=[]){this.uuid=pr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ge)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ge;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:kI;ow.multiplyMatrices(a,t[s]),ow.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new af(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=HE(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Hs(t,e,e,dr,tr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new of),this.bones.push(o),this.boneInverses.push(new Ge().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class qo extends pt{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}qo.prototype.isInstancedBufferAttribute=!0;const aw=new Ge,lw=new Ge,Vd=[],Wu=new Qt;class jv extends Qt{constructor(e,t,r){super(e,t);this.instanceMatrix=new qo(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Wu.geometry=this.geometry,Wu.material=this.material,Wu.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,aw),lw.multiplyMatrices(r,aw),Wu.matrixWorld=lw,Wu.raycast(e,Vd);for(let o=0,a=Vd.length;o<a;o++){const u=Vd[o];u.instanceId=s,u.object=this,t.push(u)}Vd.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new qo(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}jv.prototype.isInstancedMesh=!0;class yn extends Wt{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ae(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}yn.prototype.isLineBasicMaterial=!0;const uw=new I,cw=new I,fw=new Ge,Ug=new oo,Wd=new $i;class Mi extends mt{constructor(e=new Ye,t=new yn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)uw.fromBufferAttribute(t,i-1),cw.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=uw.distanceTo(cw);e.setAttribute("lineDistance",new ze(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Wd.copy(r.boundingSphere),Wd.applyMatrix4(i),Wd.radius+=s,e.ray.intersectsSphere(Wd)===!1)return;fw.copy(i).invert(),Ug.copy(e.ray).applyMatrix4(fw);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=new I,h=new I,p=new I,d=new I,m=this.isLineSegments?2:1;if(r.isBufferGeometry){const v=r.index,y=r.attributes.position;if(v!==null){const _=Math.max(0,o.start),M=Math.min(v.count,o.start+o.count);for(let A=_,S=M-1;A<S;A+=m){const T=v.getX(A),C=v.getX(A+1);if(f.fromBufferAttribute(y,T),h.fromBufferAttribute(y,C),Ug.distanceSqToSegment(f,h,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(d);L<e.near||L>e.far||t.push({distance:L,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),M=Math.min(y.count,o.start+o.count);for(let A=_,S=M-1;A<S;A+=m){if(f.fromBufferAttribute(y,A),h.fromBufferAttribute(y,A+1),Ug.distanceSqToSegment(f,h,d,p)>u)continue;d.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Mi.prototype.isLine=!0;const dw=new I,hw=new I;class Kn extends Mi{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)dw.fromBufferAttribute(t,i),hw.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+dw.distanceTo(hw);e.setAttribute("lineDistance",new ze(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Kn.prototype.isLineSegments=!0;class Lp extends Mi{constructor(e,t){super(e,t);this.type="LineLoop"}}Lp.prototype.isLineLoop=!0;class uo extends Wt{constructor(e){super();this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}uo.prototype.isPointsMaterial=!0;const pw=new Ge,xy=new oo,Jd=new $i,jd=new I;class Zl extends mt{constructor(e=new Ye,t=new uo){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Jd.copy(r.boundingSphere),Jd.applyMatrix4(i),Jd.radius+=s,e.ray.intersectsSphere(Jd)===!1)return;pw.copy(i).invert(),xy.copy(e.ray).applyMatrix4(pw);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a;if(r.isBufferGeometry){const f=r.index,p=r.attributes.position;if(f!==null){const d=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=d,x=m;v<x;v++){const y=f.getX(v);jd.fromBufferAttribute(p,y),mw(jd,y,u,i,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(p.count,o.start+o.count);for(let v=d,x=m;v<x;v++)jd.fromBufferAttribute(p,v),mw(jd,v,u,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Zl.prototype.isPoints=!0;function mw(n,e,t,r,i,s,o){const a=xy.distanceSqToPoint(n);if(a<t){const u=new I;xy.closestPointToPoint(n,u),u.applyMatrix4(r);const f=i.ray.origin.distanceTo(u);if(f<i.near||f>i.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:u,index:e,face:null,object:o})}}class hT extends Yt{constructor(e,t,r,i,s,o,a,u,f){super(e,t,r,i,s,o,a,u,f);this.minFilter=o!==void 0?o:Dt,this.magFilter=s!==void 0?s:Dt,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}hT.prototype.isVideoTexture=!0;class pT extends Yt{constructor(e,t,r){super({width:e,height:t});this.format=r,this.magFilter=Kt,this.minFilter=Kt,this.generateMipmaps=!1,this.needsUpdate=!0}}pT.prototype.isFramebufferTexture=!0;class Kv extends Yt{constructor(e,t,r,i,s,o,a,u,f,h,p,d){super(null,o,a,u,f,h,i,s,p,d);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Kv.prototype.isCompressedTexture=!0;class mT extends Yt{constructor(e,t,r,i,s,o,a,u,f){super(e,t,r,i,s,o,a,u,f);this.needsUpdate=!0}}mT.prototype.isCanvasTexture=!0;class mr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,u=s-1,f;for(;a<=u;)if(i=Math.floor(a+(u-a)/2),f=r[i]-o,f<0)a=i+1;else if(f>0)u=i-1;else{u=i;break}if(i=u,r[i]===o)return i/(s-1);const h=r[i],d=r[i+1]-h,m=(o-h)/d;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),u=t||(o.isVector2?new de:new I);return u.copy(a).sub(o).normalize(),u}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new I,i=[],s=[],o=[],a=new I,u=new Ge;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new I)}s[0]=new I,o[0]=new I;let f=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),d=Math.abs(i[0].z);h<=f&&(f=h,r.set(1,0,0)),p<=f&&(f=p,r.set(0,1,0)),d<=f&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(rn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(u.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(rn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(u.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class lf extends mr{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,u=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=u}getPoint(e,t){const r=t||new de,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),d=u-this.aX,m=f-this.aY;u=d*h-m*p+this.aX,f=d*p+m*h+this.aY}return r.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}lf.prototype.isEllipseCurve=!0;class Xv extends lf{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o);this.type="ArcCurve"}}Xv.prototype.isArcCurve=!0;function Qv(){let n=0,e=0,t=0,r=0;function i(s,o,a,u){n=s,e=a,t=-3*s+3*o-2*a-u,r=2*s-2*o+a+u}return{initCatmullRom:function(s,o,a,u,f){i(o,a,f*(a-s),f*(u-o))},initNonuniformCatmullRom:function(s,o,a,u,f,h,p){let d=(o-s)/f-(a-s)/(f+h)+(a-o)/h,m=(a-o)/h-(u-o)/(h+p)+(u-a)/p;d*=h,m*=h,i(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Kd=new I,Hg=new Qv,zg=new Qv,Vg=new Qv;class Yv extends mr{constructor(e=[],t=!1,r="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new I){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:u===0&&a===s-1&&(a=s-2,u=1);let f,h;this.closed||a>0?f=i[(a-1)%s]:(Kd.subVectors(i[0],i[1]).add(i[0]),f=Kd);const p=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(Kd.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Kd),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(f.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(h),m);x<1e-4&&(x=1),v<1e-4&&(v=x),y<1e-4&&(y=x),Hg.initNonuniformCatmullRom(f.x,p.x,d.x,h.x,v,x,y),zg.initNonuniformCatmullRom(f.y,p.y,d.y,h.y,v,x,y),Vg.initNonuniformCatmullRom(f.z,p.z,d.z,h.z,v,x,y)}else this.curveType==="catmullrom"&&(Hg.initCatmullRom(f.x,p.x,d.x,h.x,this.tension),zg.initCatmullRom(f.y,p.y,d.y,h.y,this.tension),Vg.initCatmullRom(f.z,p.z,d.z,h.z,this.tension));return r.set(Hg.calc(u),zg.calc(u),Vg.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new I().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Yv.prototype.isCatmullRomCurve3=!0;function gw(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,u=n*a;return(2*t-2*r+s+o)*u+(-3*t+3*r-2*s-o)*a+s*n+t}function GI(n,e){const t=1-n;return t*t*e}function UI(n,e){return 2*(1-n)*n*e}function HI(n,e){return n*n*e}function yc(n,e,t,r){return GI(n,e)+UI(n,t)+HI(n,r)}function zI(n,e){const t=1-n;return t*t*t*e}function VI(n,e){const t=1-n;return 3*t*t*n*e}function WI(n,e){return 3*(1-n)*n*n*e}function JI(n,e){return n*n*n*e}function vc(n,e,t,r,i){return zI(n,e)+VI(n,t)+WI(n,r)+JI(n,i)}class Pp extends mr{constructor(e=new de,t=new de,r=new de,i=new de){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vc(e,i.x,s.x,o.x,a.x),vc(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Pp.prototype.isCubicBezierCurve=!0;class qv extends mr{constructor(e=new I,t=new I,r=new I,i=new I){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new I){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vc(e,i.x,s.x,o.x,a.x),vc(e,i.y,s.y,o.y,a.y),vc(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}qv.prototype.isCubicBezierCurve3=!0;class uf extends mr{constructor(e=new de,t=new de){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new de){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new de;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uf.prototype.isLineCurve=!0;class gT extends mr{constructor(e=new I,t=new I){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new I){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ip extends mr{constructor(e=new de,t=new de,r=new de){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(yc(e,i.x,s.x,o.x),yc(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Ip.prototype.isQuadraticBezierCurve=!0;class Dp extends mr{constructor(e=new I,t=new I,r=new I){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new I){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(yc(e,i.x,s.x,o.x),yc(e,i.y,s.y,o.y),yc(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Dp.prototype.isQuadraticBezierCurve3=!0;class Fp extends mr{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new de){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,u=i[o===0?o:o-1],f=i[o],h=i[o>i.length-2?i.length-1:o+1],p=i[o>i.length-3?i.length-1:o+2];return r.set(gw(a,u.x,f.x,h.x,p.x),gw(a,u.y,f.y,h.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new de().fromArray(i))}return this}}Fp.prototype.isSplineCurve=!0;var Zv=Object.freeze({__proto__:null,ArcCurve:Xv,CatmullRomCurve3:Yv,CubicBezierCurve:Pp,CubicBezierCurve3:qv,EllipseCurve:lf,LineCurve:uf,LineCurve3:gT,QuadraticBezierCurve:Ip,QuadraticBezierCurve3:Dp,SplineCurve:Fp});class yT extends mr{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new uf(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],u=a.getLength(),f=u===0?0:1-o/u;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(a);for(let f=0;f<u.length;f++){const h=u[f];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Zv[i.type]().fromJSON(i))}return this}}class El extends yT{constructor(e){super();this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new uf(this.currentPoint.clone(),new de(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new Ip(this.currentPoint.clone(),new de(e,t),new de(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new Pp(this.currentPoint.clone(),new de(e,t),new de(r,i),new de(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Fp(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+a,t+u,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,u){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,r,i,s,o,a,u),this}absellipse(e,t,r,i,s,o,a,u){const f=new lf(e,t,r,i,s,o,a,u);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zo extends Ye{constructor(e=[new de(0,.5),new de(.5,0),new de(0,-.5)],t=12,r=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=rn(i,0,Math.PI*2);const s=[],o=[],a=[],u=[],f=[],h=1/t,p=new I,d=new de,m=new I,v=new I,x=new I;let y=0,_=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:y=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,m.x=_*1,m.y=-y,m.z=_*0,x.copy(m),m.normalize(),u.push(m.x,m.y,m.z);break;case e.length-1:u.push(x.x,x.y,x.z);break;default:y=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,m.x=_*1,m.y=-y,m.z=_*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),u.push(m.x,m.y,m.z),x.copy(v)}for(let M=0;M<=t;M++){const A=r+M*h*i,S=Math.sin(A),T=Math.cos(A);for(let C=0;C<=e.length-1;C++){p.x=e[C].x*S,p.y=e[C].y,p.z=e[C].x*T,o.push(p.x,p.y,p.z),d.x=M/t,d.y=C/(e.length-1),a.push(d.x,d.y);const B=u[3*C+0]*S,L=u[3*C+1],F=u[3*C+0]*T;f.push(B,L,F)}}for(let M=0;M<t;M++)for(let A=0;A<e.length-1;A++){const S=A+M*e.length,T=S,C=S+e.length,B=S+e.length+1,L=S+1;s.push(T,C,L),s.push(B,L,C)}this.setIndex(s),this.setAttribute("position",new ze(o,3)),this.setAttribute("uv",new ze(a,2)),this.setAttribute("normal",new ze(f,3))}static fromJSON(e){return new Zo(e.points,e.segments,e.phiStart,e.phiLength)}}class Tl extends Zo{constructor(e=1,t=1,r=4,i=8){const s=new El;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5);super(s.getPoints(r),i);this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Tl(e.radius,e.length,e.capSegments,e.radialSegments)}}class Cl extends Ye{constructor(e=1,t=8,r=0,i=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],u=[],f=new I,h=new de;o.push(0,0,0),a.push(0,0,1),u.push(.5,.5);for(let p=0,d=3;p<=t;p++,d+=3){const m=r+p/t*i;f.x=e*Math.cos(m),f.y=e*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,u.push(h.x,h.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new ze(o,3)),this.setAttribute("normal",new ze(a,3)),this.setAttribute("uv",new ze(u,2))}static fromJSON(e){return new Cl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class $s extends Ye{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,u=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:u};const f=this;i=Math.floor(i),s=Math.floor(s);const h=[],p=[],d=[],m=[];let v=0;const x=[],y=r/2;let _=0;M(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new ze(p,3)),this.setAttribute("normal",new ze(d,3)),this.setAttribute("uv",new ze(m,2));function M(){const S=new I,T=new I;let C=0;const B=(t-e)/r;for(let L=0;L<=s;L++){const F=[],G=L/s,b=G*(t-e)+e;for(let P=0;P<=i;P++){const W=P/i,z=W*u+a,K=Math.sin(z),X=Math.cos(z);T.x=b*K,T.y=-G*r+y,T.z=b*X,p.push(T.x,T.y,T.z),S.set(K,B,X).normalize(),d.push(S.x,S.y,S.z),m.push(W,1-G),F.push(v++)}x.push(F)}for(let L=0;L<i;L++)for(let F=0;F<s;F++){const G=x[F][L],b=x[F+1][L],P=x[F+1][L+1],W=x[F][L+1];h.push(G,b,W),h.push(b,P,W),C+=6}f.addGroup(_,C,0),_+=C}function A(S){const T=v,C=new de,B=new I;let L=0;const F=S===!0?e:t,G=S===!0?1:-1;for(let P=1;P<=i;P++)p.push(0,y*G,0),d.push(0,G,0),m.push(.5,.5),v++;const b=v;for(let P=0;P<=i;P++){const z=P/i*u+a,K=Math.cos(z),X=Math.sin(z);B.x=F*X,B.y=y*G,B.z=F*K,p.push(B.x,B.y,B.z),d.push(0,G,0),C.x=K*.5+.5,C.y=X*.5*G+.5,m.push(C.x,C.y),v++}for(let P=0;P<i;P++){const W=T+P,z=b+P;S===!0?h.push(z,z+1,W):h.push(z+1,z,W),L+=3}f.addGroup(_,L,S===!0?1:2),_+=L}}static fromJSON(e){return new $s(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bl extends $s{constructor(e=1,t=1,r=8,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new bl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ai extends Ye{constructor(e=[],t=[],r=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),f(r),h(),this.setAttribute("position",new ze(s,3)),this.setAttribute("normal",new ze(s.slice(),3)),this.setAttribute("uv",new ze(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const A=new I,S=new I,T=new I;for(let C=0;C<t.length;C+=3)m(t[C+0],A),m(t[C+1],S),m(t[C+2],T),u(A,S,T,M)}function u(M,A,S,T){const C=T+1,B=[];for(let L=0;L<=C;L++){B[L]=[];const F=M.clone().lerp(S,L/C),G=A.clone().lerp(S,L/C),b=C-L;for(let P=0;P<=b;P++)P===0&&L===C?B[L][P]=F:B[L][P]=F.clone().lerp(G,P/b)}for(let L=0;L<C;L++)for(let F=0;F<2*(C-L)-1;F++){const G=Math.floor(F/2);F%2===0?(d(B[L][G+1]),d(B[L+1][G]),d(B[L][G])):(d(B[L][G+1]),d(B[L+1][G+1]),d(B[L+1][G]))}}function f(M){const A=new I;for(let S=0;S<s.length;S+=3)A.x=s[S+0],A.y=s[S+1],A.z=s[S+2],A.normalize().multiplyScalar(M),s[S+0]=A.x,s[S+1]=A.y,s[S+2]=A.z}function h(){const M=new I;for(let A=0;A<s.length;A+=3){M.x=s[A+0],M.y=s[A+1],M.z=s[A+2];const S=y(M)/2/Math.PI+.5,T=_(M)/Math.PI+.5;o.push(S,1-T)}v(),p()}function p(){for(let M=0;M<o.length;M+=6){const A=o[M+0],S=o[M+2],T=o[M+4],C=Math.max(A,S,T),B=Math.min(A,S,T);C>.9&&B<.1&&(A<.2&&(o[M+0]+=1),S<.2&&(o[M+2]+=1),T<.2&&(o[M+4]+=1))}}function d(M){s.push(M.x,M.y,M.z)}function m(M,A){const S=M*3;A.x=e[S+0],A.y=e[S+1],A.z=e[S+2]}function v(){const M=new I,A=new I,S=new I,T=new I,C=new de,B=new de,L=new de;for(let F=0,G=0;F<s.length;F+=9,G+=6){M.set(s[F+0],s[F+1],s[F+2]),A.set(s[F+3],s[F+4],s[F+5]),S.set(s[F+6],s[F+7],s[F+8]),C.set(o[G+0],o[G+1]),B.set(o[G+2],o[G+3]),L.set(o[G+4],o[G+5]),T.copy(M).add(A).add(S).divideScalar(3);const b=y(T);x(C,G+0,M,b),x(B,G+2,A,b),x(L,G+4,S,b)}}function x(M,A,S,T){T<0&&M.x===1&&(o[A]=M.x-1),S.x===0&&S.z===0&&(o[A]=T/2/Math.PI+.5)}function y(M){return Math.atan2(M.z,-M.x)}function _(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}static fromJSON(e){return new Ai(e.vertices,e.indices,e.radius,e.details)}}class Rl extends Ai{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rl(e.radius,e.detail)}}const Xd=new I,Qd=new I,Wg=new I,Yd=new sn;class $v extends Ye{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Vo*t),o=e.getIndex(),a=e.getAttribute("position"),u=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],p=new Array(3),d={},m=[];for(let v=0;v<u;v+=3){o?(f[0]=o.getX(v),f[1]=o.getX(v+1),f[2]=o.getX(v+2)):(f[0]=v,f[1]=v+1,f[2]=v+2);const{a:x,b:y,c:_}=Yd;if(x.fromBufferAttribute(a,f[0]),y.fromBufferAttribute(a,f[1]),_.fromBufferAttribute(a,f[2]),Yd.getNormal(Wg),p[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,p[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,p[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let M=0;M<3;M++){const A=(M+1)%3,S=p[M],T=p[A],C=Yd[h[M]],B=Yd[h[A]],L=`${S}_${T}`,F=`${T}_${S}`;F in d&&d[F]?(Wg.dot(d[F].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(B.x,B.y,B.z)),d[F]=null):L in d||(d[L]={index0:f[M],index1:f[A],normal:Wg.clone()})}}for(const v in d)if(d[v]){const{index0:x,index1:y}=d[v];Xd.fromBufferAttribute(a,x),Qd.fromBufferAttribute(a,y),m.push(Xd.x,Xd.y,Xd.z),m.push(Qd.x,Qd.y,Qd.z)}this.setAttribute("position",new ze(m,3))}}}class yi extends El{constructor(e){super(e);this.uuid=pr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new El().fromJSON(i))}return this}}const jI={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=vT(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,u,f,h,p,d,m;if(r&&(s=qI(n,e,s,t)),n.length>80*t){a=f=n[0],u=h=n[1];for(let v=t;v<i;v+=t)p=n[v],d=n[v+1],p<a&&(a=p),d<u&&(u=d),p>f&&(f=p),d>h&&(h=d);m=Math.max(f-a,h-u),m=m!==0?1/m:0}return Gc(s,o,t,a,u,m),o}};function vT(n,e,t,r,i){let s,o;if(i===lD(n,e,t,r)>0)for(s=e;s<t;s+=r)o=yw(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=yw(s,n[s],n[s+1],o);return o&&Np(o,o.next)&&(Hc(o),o=o.next),o}function eo(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Np(t,t.next)||Xt(t.prev,t,t.next)===0)){if(Hc(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Gc(n,e,t,r,i,s,o){if(!n)return;!o&&s&&nD(n,r,i,s);let a=n,u,f;for(;n.prev!==n.next;){if(u=n.prev,f=n.next,s?XI(n,r,i,s):KI(n)){e.push(u.i/t),e.push(n.i/t),e.push(f.i/t),Hc(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=QI(eo(n),e,t),Gc(n,e,t,r,i,s,2)):o===2&&YI(n,e,t,r,i,s):Gc(eo(n),e,t,r,i,s,1);break}}}function KI(n){const e=n.prev,t=n,r=n.next;if(Xt(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(nl(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Xt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function XI(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Xt(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,u=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,f=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,h=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,p=_y(a,u,e,t,r),d=_y(f,h,e,t,r);let m=n.prevZ,v=n.nextZ;for(;m&&m.z>=p&&v&&v.z<=d;){if(m!==n.prev&&m!==n.next&&nl(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Xt(m.prev,m,m.next)>=0||(m=m.prevZ,v!==n.prev&&v!==n.next&&nl(i.x,i.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Xt(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;m&&m.z>=p;){if(m!==n.prev&&m!==n.next&&nl(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&Xt(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;v&&v.z<=d;){if(v!==n.prev&&v!==n.next&&nl(i.x,i.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Xt(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function QI(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Np(i,s)&&xT(i,r,r.next,s)&&Uc(i,s)&&Uc(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),Hc(r),Hc(r.next),r=n=s),r=r.next}while(r!==n);return eo(r)}function YI(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&sD(o,a)){let u=_T(o,a);o=eo(o,o.next),u=eo(u,u.next),Gc(o,e,t,r,i,s),Gc(u,e,t,r,i,s);return}a=a.next}o=o.next}while(o!==n)}function qI(n,e,t,r){const i=[];let s,o,a,u,f;for(s=0,o=e.length;s<o;s++)a=e[s]*r,u=s<o-1?e[s+1]*r:n.length,f=vT(n,a,u,r,!1),f===f.next&&(f.steiner=!0),i.push(iD(f));for(i.sort(ZI),s=0;s<i.length;s++)$I(i[s],t),t=eo(t,t.next);return t}function ZI(n,e){return n.x-e.x}function $I(n,e){if(e=eD(n,e),e){const t=_T(e,n);eo(e,e.next),eo(t,t.next)}}function eD(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>s){if(s=d,d===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,u=o.x,f=o.y;let h=1/0,p;t=o;do r>=t.x&&t.x>=u&&r!==t.x&&nl(i<f?r:s,i,u,f,i<f?s:r,i,t.x,t.y)&&(p=Math.abs(i-t.y)/(r-t.x),Uc(t,n)&&(p<h||p===h&&(t.x>o.x||t.x===o.x&&tD(o,t)))&&(o=t,h=p)),t=t.next;while(t!==a);return o}function tD(n,e){return Xt(n.prev,n,e.prev)<0&&Xt(e.next,n,n.next)<0}function nD(n,e,t,r){let i=n;do i.z===null&&(i.z=_y(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,rD(i)}function rD(n){let e,t,r,i,s,o,a,u,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<f&&(a++,r=r.nextZ,!!r);e++);for(u=f;a>0||u>0&&r;)a!==0&&(u===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,u--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,f*=2}while(o>1);return n}function _y(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function iD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function nl(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function sD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!oD(n,e)&&(Uc(n,e)&&Uc(e,n)&&aD(n,e)&&(Xt(n.prev,n,e.prev)||Xt(n,e.prev,e))||Np(n,e)&&Xt(n.prev,n,n.next)>0&&Xt(e.prev,e,e.next)>0)}function Xt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Np(n,e){return n.x===e.x&&n.y===e.y}function xT(n,e,t,r){const i=Zd(Xt(n,e,t)),s=Zd(Xt(n,e,r)),o=Zd(Xt(t,r,n)),a=Zd(Xt(t,r,e));return!!(i!==s&&o!==a||i===0&&qd(n,t,e)||s===0&&qd(n,r,e)||o===0&&qd(t,n,r)||a===0&&qd(t,e,r))}function qd(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Zd(n){return n>0?1:n<0?-1:0}function oD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&xT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Uc(n,e){return Xt(n.prev,n,n.next)<0?Xt(n,e,n.next)>=0&&Xt(n,n.prev,e)>=0:Xt(n,e,n.prev)<0||Xt(n,n.next,e)<0}function aD(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function _T(n,e){const t=new My(n.i,n.x,n.y),r=new My(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function yw(n,e,t,r){const i=new My(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function My(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lD(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class vi{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return vi.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];vw(e),xw(r,e);let o=e.length;t.forEach(vw);for(let u=0;u<t.length;u++)i.push(o),o+=t[u].length,xw(r,t[u]);const a=jI.triangulate(r,i);for(let u=0;u<a.length;u+=3)s.push(a.slice(u,u+3));return s}}function vw(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function xw(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class wi extends Ye{constructor(e=new yi([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];o(f)}this.setAttribute("position",new ze(i,3)),this.setAttribute("uv",new ze(s,2)),this.computeVertexNormals();function o(a){const u=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1;let p=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:uD;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=t.amount);let A,S=!1,T,C,B,L;_&&(A=_.getSpacedPoints(h),S=!0,d=!1,T=_.computeFrenetFrames(h,!1),C=new I,B=new I,L=new I),d||(y=0,m=0,v=0,x=0);const F=a.extractPoints(f);let G=F.shape;const b=F.holes;if(!vi.isClockWise(G)){G=G.reverse();for(let ue=0,ce=b.length;ue<ce;ue++){const ge=b[ue];vi.isClockWise(ge)&&(b[ue]=ge.reverse())}}const W=vi.triangulateShape(G,b),z=G;for(let ue=0,ce=b.length;ue<ce;ue++){const ge=b[ue];G=G.concat(ge)}function K(ue,ce,ge){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().multiplyScalar(ge).add(ue)}const X=G.length,q=W.length;function V(ue,ce,ge){let Le,_e,et;const Je=ue.x-ce.x,He=ue.y-ce.y,At=ge.x-ue.x,yt=ge.y-ue.y,U=Je*Je+He*He,D=Je*yt-He*At;if(Math.abs(D)>Number.EPSILON){const ne=Math.sqrt(U),ye=Math.sqrt(At*At+yt*yt),Ee=ce.x-He/ne,Te=ce.y+Je/ne,je=ge.x-yt/ye,ie=ge.y+At/ye,Ze=((je-Ee)*yt-(ie-Te)*At)/(Je*yt-He*At);Le=Ee+Je*Ze-ue.x,_e=Te+He*Ze-ue.y;const tt=Le*Le+_e*_e;if(tt<=2)return new de(Le,_e);et=Math.sqrt(tt/2)}else{let ne=!1;Je>Number.EPSILON?At>Number.EPSILON&&(ne=!0):Je<-Number.EPSILON?At<-Number.EPSILON&&(ne=!0):Math.sign(He)===Math.sign(yt)&&(ne=!0),ne?(Le=-He,_e=Je,et=Math.sqrt(U)):(Le=Je,_e=He,et=Math.sqrt(U/2))}return new de(Le/et,_e/et)}const re=[];for(let ue=0,ce=z.length,ge=ce-1,Le=ue+1;ue<ce;ue++,ge++,Le++)ge===ce&&(ge=0),Le===ce&&(Le=0),re[ue]=V(z[ue],z[ge],z[Le]);const le=[];let J,Y=re.concat();for(let ue=0,ce=b.length;ue<ce;ue++){const ge=b[ue];J=[];for(let Le=0,_e=ge.length,et=_e-1,Je=Le+1;Le<_e;Le++,et++,Je++)et===_e&&(et=0),Je===_e&&(Je=0),J[Le]=V(ge[Le],ge[et],ge[Je]);le.push(J),Y=Y.concat(J)}for(let ue=0;ue<y;ue++){const ce=ue/y,ge=m*Math.cos(ce*Math.PI/2),Le=v*Math.sin(ce*Math.PI/2)+x;for(let _e=0,et=z.length;_e<et;_e++){const Je=K(z[_e],re[_e],Le);Ke(Je.x,Je.y,-ge)}for(let _e=0,et=b.length;_e<et;_e++){const Je=b[_e];J=le[_e];for(let He=0,At=Je.length;He<At;He++){const yt=K(Je[He],J[He],Le);Ke(yt.x,yt.y,-ge)}}}const he=v+x;for(let ue=0;ue<X;ue++){const ce=d?K(G[ue],Y[ue],he):G[ue];S?(B.copy(T.normals[0]).multiplyScalar(ce.x),C.copy(T.binormals[0]).multiplyScalar(ce.y),L.copy(A[0]).add(B).add(C),Ke(L.x,L.y,L.z)):Ke(ce.x,ce.y,0)}for(let ue=1;ue<=h;ue++)for(let ce=0;ce<X;ce++){const ge=d?K(G[ce],Y[ce],he):G[ce];S?(B.copy(T.normals[ue]).multiplyScalar(ge.x),C.copy(T.binormals[ue]).multiplyScalar(ge.y),L.copy(A[ue]).add(B).add(C),Ke(L.x,L.y,L.z)):Ke(ge.x,ge.y,p/h*ue)}for(let ue=y-1;ue>=0;ue--){const ce=ue/y,ge=m*Math.cos(ce*Math.PI/2),Le=v*Math.sin(ce*Math.PI/2)+x;for(let _e=0,et=z.length;_e<et;_e++){const Je=K(z[_e],re[_e],Le);Ke(Je.x,Je.y,p+ge)}for(let _e=0,et=b.length;_e<et;_e++){const Je=b[_e];J=le[_e];for(let He=0,At=Je.length;He<At;He++){const yt=K(Je[He],J[He],Le);S?Ke(yt.x,yt.y+A[h-1].y,A[h-1].x+ge):Ke(yt.x,yt.y,p+ge)}}}Se(),we();function Se(){const ue=i.length/3;if(d){let ce=0,ge=X*ce;for(let Le=0;Le<q;Le++){const _e=W[Le];Ne(_e[2]+ge,_e[1]+ge,_e[0]+ge)}ce=h+y*2,ge=X*ce;for(let Le=0;Le<q;Le++){const _e=W[Le];Ne(_e[0]+ge,_e[1]+ge,_e[2]+ge)}}else{for(let ce=0;ce<q;ce++){const ge=W[ce];Ne(ge[2],ge[1],ge[0])}for(let ce=0;ce<q;ce++){const ge=W[ce];Ne(ge[0]+X*h,ge[1]+X*h,ge[2]+X*h)}}r.addGroup(ue,i.length/3-ue,0)}function we(){const ue=i.length/3;let ce=0;te(z,ce),ce+=z.length;for(let ge=0,Le=b.length;ge<Le;ge++){const _e=b[ge];te(_e,ce),ce+=_e.length}r.addGroup(ue,i.length/3-ue,1)}function te(ue,ce){let ge=ue.length;for(;--ge>=0;){const Le=ge;let _e=ge-1;_e<0&&(_e=ue.length-1);for(let et=0,Je=h+y*2;et<Je;et++){const He=X*et,At=X*(et+1),yt=ce+Le+He,U=ce+_e+He,D=ce+_e+At,ne=ce+Le+At;Fe(yt,U,D,ne)}}}function Ke(ue,ce,ge){u.push(ue),u.push(ce),u.push(ge)}function Ne(ue,ce,ge){ve(ue),ve(ce),ve(ge);const Le=i.length/3,_e=M.generateTopUV(r,i,Le-3,Le-2,Le-1);qe(_e[0]),qe(_e[1]),qe(_e[2])}function Fe(ue,ce,ge,Le){ve(ue),ve(ce),ve(Le),ve(ce),ve(ge),ve(Le);const _e=i.length/3,et=M.generateSideWallUV(r,i,_e-6,_e-3,_e-2,_e-1);qe(et[0]),qe(et[1]),qe(et[3]),qe(et[1]),qe(et[2]),qe(et[3])}function ve(ue){i.push(u[ue*3+0]),i.push(u[ue*3+1]),i.push(u[ue*3+2])}function qe(ue){s.push(ue.x),s.push(ue.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return cD(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Zv[i.type]().fromJSON(i)),new wi(r,e.options)}}const uD={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],u=e[r*3+1],f=e[i*3],h=e[i*3+1];return[new de(s,o),new de(a,u),new de(f,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],u=e[t*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],d=e[i*3],m=e[i*3+1],v=e[i*3+2],x=e[s*3],y=e[s*3+1],_=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new de(o,1-u),new de(f,1-p),new de(d,1-v),new de(x,1-_)]:[new de(a,1-u),new de(h,1-p),new de(m,1-v),new de(y,1-_)]}};function cD(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Bl extends Ai{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bl(e.radius,e.detail)}}class $o extends Ai{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $o(e.radius,e.detail)}}class Ll extends Ye{constructor(e=.5,t=1,r=8,i=1,s=0,o=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],u=[],f=[],h=[];let p=e;const d=(t-e)/i,m=new I,v=new de;for(let x=0;x<=i;x++){for(let y=0;y<=r;y++){const _=s+y/r*o;m.x=p*Math.cos(_),m.y=p*Math.sin(_),u.push(m.x,m.y,m.z),f.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}p+=d}for(let x=0;x<i;x++){const y=x*(r+1);for(let _=0;_<r;_++){const M=_+y,A=M,S=M+r+1,T=M+r+2,C=M+1;a.push(A,S,C),a.push(S,T,C)}}this.setIndex(a),this.setAttribute("position",new ze(u,3)),this.setAttribute("normal",new ze(f,3)),this.setAttribute("uv",new ze(h,2))}static fromJSON(e){return new Ll(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ea extends Ye{constructor(e=new yi([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,u=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,u,h),a+=u,u=0;this.setIndex(r),this.setAttribute("position",new ze(i,3)),this.setAttribute("normal",new ze(s,3)),this.setAttribute("uv",new ze(o,2));function f(h){const p=i.length/3,d=h.extractPoints(t);let m=d.shape;const v=d.holes;vi.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,_=v.length;y<_;y++){const M=v[y];vi.isClockWise(M)===!0&&(v[y]=M.reverse())}const x=vi.triangulateShape(m,v);for(let y=0,_=v.length;y<_;y++){const M=v[y];m=m.concat(M)}for(let y=0,_=m.length;y<_;y++){const M=m[y];i.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let y=0,_=x.length;y<_;y++){const M=x[y],A=M[0]+p,S=M[1]+p,T=M[2]+p;r.push(A,S,T),u+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fD(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new ea(r,e.curveSegments)}}function fD(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class ta extends Ye{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const u=Math.min(o+a,Math.PI);let f=0;const h=[],p=new I,d=new I,m=[],v=[],x=[],y=[];for(let _=0;_<=r;_++){const M=[],A=_/r;let S=0;_==0&&o==0?S=.5/t:_==r&&u==Math.PI&&(S=-.5/t);for(let T=0;T<=t;T++){const C=T/t;p.x=-e*Math.cos(i+C*s)*Math.sin(o+A*a),p.y=e*Math.cos(o+A*a),p.z=e*Math.sin(i+C*s)*Math.sin(o+A*a),v.push(p.x,p.y,p.z),d.copy(p).normalize(),x.push(d.x,d.y,d.z),y.push(C+S,1-A),M.push(f++)}h.push(M)}for(let _=0;_<r;_++)for(let M=0;M<t;M++){const A=h[_][M+1],S=h[_][M],T=h[_+1][M],C=h[_+1][M+1];(_!==0||o>0)&&m.push(A,S,C),(_!==r-1||u<Math.PI)&&m.push(S,T,C)}this.setIndex(m),this.setAttribute("position",new ze(v,3)),this.setAttribute("normal",new ze(x,3)),this.setAttribute("uv",new ze(y,2))}static fromJSON(e){return new ta(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Pl extends Ai{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pl(e.radius,e.detail)}}class Il extends Ye{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],u=[],f=[],h=new I,p=new I,d=new I;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const x=v/i*s,y=m/r*Math.PI*2;p.x=(e+t*Math.cos(y))*Math.cos(x),p.y=(e+t*Math.cos(y))*Math.sin(x),p.z=t*Math.sin(y),a.push(p.x,p.y,p.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),d.subVectors(p,h).normalize(),u.push(d.x,d.y,d.z),f.push(v/i),f.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const x=(i+1)*m+v-1,y=(i+1)*(m-1)+v-1,_=(i+1)*(m-1)+v,M=(i+1)*m+v;o.push(x,y,M),o.push(y,_,M)}this.setIndex(o),this.setAttribute("position",new ze(a,3)),this.setAttribute("normal",new ze(u,3)),this.setAttribute("uv",new ze(f,2))}static fromJSON(e){return new Il(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dl extends Ye{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],u=[],f=[],h=[],p=new I,d=new I,m=new I,v=new I,x=new I,y=new I,_=new I;for(let A=0;A<=r;++A){const S=A/r*s*Math.PI*2;M(S,s,o,e,m),M(S+.01,s,o,e,v),y.subVectors(v,m),_.addVectors(v,m),x.crossVectors(y,_),_.crossVectors(x,y),x.normalize(),_.normalize();for(let T=0;T<=i;++T){const C=T/i*Math.PI*2,B=-t*Math.cos(C),L=t*Math.sin(C);p.x=m.x+(B*_.x+L*x.x),p.y=m.y+(B*_.y+L*x.y),p.z=m.z+(B*_.z+L*x.z),u.push(p.x,p.y,p.z),d.subVectors(p,m).normalize(),f.push(d.x,d.y,d.z),h.push(A/r),h.push(T/i)}}for(let A=1;A<=r;A++)for(let S=1;S<=i;S++){const T=(i+1)*(A-1)+(S-1),C=(i+1)*A+(S-1),B=(i+1)*A+S,L=(i+1)*(A-1)+S;a.push(T,C,L),a.push(C,B,L)}this.setIndex(a),this.setAttribute("position",new ze(u,3)),this.setAttribute("normal",new ze(f,3)),this.setAttribute("uv",new ze(h,2));function M(A,S,T,C,B){const L=Math.cos(A),F=Math.sin(A),G=T/S*A,b=Math.cos(G);B.x=C*(2+b)*.5*L,B.y=C*(2+b)*F*.5,B.z=C*Math.sin(G)*.5}}static fromJSON(e){return new Dl(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Fl extends Ye{constructor(e=new Dp(new I(-1,-1,0),new I(-1,1,0),new I(1,1,0)),t=64,r=1,i=8,s=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new I,u=new I,f=new de;let h=new I;const p=[],d=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new ze(p,3)),this.setAttribute("normal",new ze(d,3)),this.setAttribute("uv",new ze(m,2));function x(){for(let A=0;A<t;A++)y(A);y(s===!1?t:0),M(),_()}function y(A){h=e.getPointAt(A/t,h);const S=o.normals[A],T=o.binormals[A];for(let C=0;C<=i;C++){const B=C/i*Math.PI*2,L=Math.sin(B),F=-Math.cos(B);u.x=F*S.x+L*T.x,u.y=F*S.y+L*T.y,u.z=F*S.z+L*T.z,u.normalize(),d.push(u.x,u.y,u.z),a.x=h.x+r*u.x,a.y=h.y+r*u.y,a.z=h.z+r*u.z,p.push(a.x,a.y,a.z)}}function _(){for(let A=1;A<=t;A++)for(let S=1;S<=i;S++){const T=(i+1)*(A-1)+(S-1),C=(i+1)*A+(S-1),B=(i+1)*A+S,L=(i+1)*(A-1)+S;v.push(T,C,L),v.push(C,B,L)}}function M(){for(let A=0;A<=t;A++)for(let S=0;S<=i;S++)f.x=A/t,f.y=S/i,m.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Fl(new Zv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ex extends Ye{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new I,s=new I;if(e.index!==null){const o=e.attributes.position,a=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=u.length;f<h;++f){const p=u[f],d=p.start,m=p.count;for(let v=d,x=d+m;v<x;v+=3)for(let y=0;y<3;y++){const _=a.getX(v+y),M=a.getX(v+(y+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,M),_w(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,u=o.count/3;a<u;a++)for(let f=0;f<3;f++){const h=3*a+f,p=3*a+(f+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,p),_w(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ze(t,3))}}}function _w(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var Mw=Object.freeze({__proto__:null,BoxGeometry:_i,BoxBufferGeometry:_i,CapsuleGeometry:Tl,CapsuleBufferGeometry:Tl,CircleGeometry:Cl,CircleBufferGeometry:Cl,ConeGeometry:bl,ConeBufferGeometry:bl,CylinderGeometry:$s,CylinderBufferGeometry:$s,DodecahedronGeometry:Rl,DodecahedronBufferGeometry:Rl,EdgesGeometry:$v,ExtrudeGeometry:wi,ExtrudeBufferGeometry:wi,IcosahedronGeometry:Bl,IcosahedronBufferGeometry:Bl,LatheGeometry:Zo,LatheBufferGeometry:Zo,OctahedronGeometry:$o,OctahedronBufferGeometry:$o,PlaneGeometry:Zs,PlaneBufferGeometry:Zs,PolyhedronGeometry:Ai,PolyhedronBufferGeometry:Ai,RingGeometry:Ll,RingBufferGeometry:Ll,ShapeGeometry:ea,ShapeBufferGeometry:ea,SphereGeometry:ta,SphereBufferGeometry:ta,TetrahedronGeometry:Pl,TetrahedronBufferGeometry:Pl,TorusGeometry:Il,TorusBufferGeometry:Il,TorusKnotGeometry:Dl,TorusKnotBufferGeometry:Dl,TubeGeometry:Fl,TubeBufferGeometry:Fl,WireframeGeometry:ex});class tx extends Wt{constructor(e){super();this.type="ShadowMaterial",this.color=new Ae(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}tx.prototype.isShadowMaterial=!0;class nx extends Bn{constructor(e){super(e);this.type="RawShaderMaterial"}}nx.prototype.isRawShaderMaterial=!0;class la extends Wt{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=io,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}la.prototype.isMeshStandardMaterial=!0;class es extends la{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ae(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}es.prototype.isMeshPhysicalMaterial=!0;class rx extends Wt{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=io,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}rx.prototype.isMeshPhongMaterial=!0;class ix extends Wt{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=io,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ix.prototype.isMeshToonMaterial=!0;class Op extends Wt{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=io,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Op.prototype.isMeshNormalMaterial=!0;class sx extends Wt{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Zc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}sx.prototype.isMeshLambertMaterial=!0;class ox extends Wt{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=io,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}ox.prototype.isMeshMatcapMaterial=!0;class ax extends yn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}ax.prototype.isLineDashedMaterial=!0;const dD={ShadowMaterial:tx,SpriteMaterial:Rp,RawShaderMaterial:nx,ShaderMaterial:Bn,PointsMaterial:uo,MeshPhysicalMaterial:es,MeshStandardMaterial:la,MeshPhongMaterial:rx,MeshToonMaterial:ix,MeshNormalMaterial:Op,MeshLambertMaterial:sx,MeshDepthMaterial:Tp,MeshDistanceMaterial:Cp,MeshBasicMaterial:nr,MeshMatcapMaterial:ox,LineDashedMaterial:ax,LineBasicMaterial:yn,Material:Wt};Wt.fromType=function(n){return new dD[n]};const Ht={arraySlice:function(n,e,t){return Ht.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let u=0;u!==e;++u)i[o++]=n[a+u]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const f=s.tracks[u],h=f.getValueSize(),p=[],d=[];for(let m=0;m<f.times.length;++m){const v=f.times[m]*i;if(!(v<t||v>=r)){p.push(f.times[m]);for(let x=0;x<h;++x)d.push(f.values[m*h+x])}}p.length!==0&&(f.times=Ht.convertArray(p,f.times.constructor),f.values=Ht.convertArray(d,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let u=0;u<s.tracks.length;++u)a>s.tracks[u].times[0]&&(a=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],u=a.ValueTypeName;if(u==="bool"||u==="string")continue;const f=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===u});if(f===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let d=0;const m=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const _=h,M=p-h;x=Ht.arraySlice(a.values,_,M)}else if(s>=a.times[v]){const _=v*p+h,M=_+p-h;x=Ht.arraySlice(a.values,_,M)}else{const _=a.createInterpolant(),M=h,A=p-h;_.evaluate(s),x=Ht.arraySlice(_.resultBuffer,M,A)}u==="quaternion"&&new an().fromArray(x).normalize().conjugate().toArray(x);const y=f.times.length;for(let _=0;_<y;++_){const M=_*m+d;if(u==="quaternion")an.multiplyQuaternionsFlat(f.values,M,x,0,f.values,M);else{const A=m-d*2;for(let S=0;S<A;++S)f.values[M+S]-=x[S]}}}return n.blendMode=Hv,n}};class ei{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,s)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let u=r-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===u)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,s,e)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}ei.prototype.beforeStart_=ei.prototype.copySampleValue_;ei.prototype.afterEnd_=ei.prototype.copySampleValue_;class MT extends ei{constructor(e,t,r,i){super(e,t,r,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Oo,endingEnd:Oo}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],u=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ko:s=e,a=2*t-r;break;case Nc:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(u===void 0)switch(this.getSettings_().endingEnd){case ko:o=e,u=2*r-t;break;case Nc:o=1,u=r+i[1]-i[0];break;default:o=e-1,u=t}const f=(r-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(u-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,h=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),x=v*v,y=x*v,_=-d*y+2*d*x-d*v,M=(1+d)*y+(-1.5-2*d)*x+(-.5+d)*v+1,A=(-1-m)*y+(1.5+m)*x+.5*v,S=m*y-m*x;for(let T=0;T!==a;++T)s[T]=_*o[h+T]+M*o[f+T]+A*o[u+T]+S*o[p+T];return s}}class lx extends ei{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,f=u-a,h=(r-t)/(i-t),p=1-h;for(let d=0;d!==a;++d)s[d]=o[f+d]*p+o[u+d]*h;return s}}class AT extends ei{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ni{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ht.convertArray(t,this.TimeBufferType),this.values=Ht.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ht.convertArray(e.times,Array),values:Ht.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new AT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new MT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ml:t=this.InterpolantFactoryMethodDiscrete;break;case Qo:t=this.InterpolantFactoryMethodLinear;break;case Eh:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ml;case this.InterpolantFactoryMethodLinear:return Qo;case this.InterpolantFactoryMethodSmooth:return Eh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ht.arraySlice(r,s,o),this.values=Ht.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const u=r[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,o),e=!1;break}o=u}if(i!==void 0&&Ht.isTypedArray(i))for(let a=0,u=i.length;a!==u;++a){const f=i[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=Ht.arraySlice(this.times),t=Ht.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Eh,s=e.length-1;let o=1;for(let a=1;a<s;++a){let u=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(i)u=!0;else{const p=a*r,d=p-r,m=p+r;for(let v=0;v!==r;++v){const x=t[p+v];if(x!==t[d+v]||x!==t[m+v]){u=!0;break}}}if(u){if(a!==o){e[o]=e[a];const p=a*r,d=o*r;for(let m=0;m!==r;++m)t[d+m]=t[p+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,u=o*r,f=0;f!==r;++f)t[u+f]=t[a+f];++o}return o!==e.length?(this.times=Ht.arraySlice(e,0,o),this.values=Ht.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Ht.arraySlice(this.times,0),t=Ht.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ni.prototype.TimeBufferType=Float32Array;ni.prototype.ValueBufferType=Float32Array;ni.prototype.DefaultInterpolation=Qo;class ua extends ni{}ua.prototype.ValueTypeName="bool";ua.prototype.ValueBufferType=Array;ua.prototype.DefaultInterpolation=Ml;ua.prototype.InterpolantFactoryMethodLinear=void 0;ua.prototype.InterpolantFactoryMethodSmooth=void 0;class ux extends ni{}ux.prototype.ValueTypeName="color";class Nl extends ni{}Nl.prototype.ValueTypeName="number";class wT extends ei{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=(r-t)/(i-t);let f=e*a;for(let h=f+a;f!==h;f+=4)an.slerpFlat(s,0,o,f-a,o,f,u);return s}}class to extends ni{InterpolantFactoryMethodLinear(e){return new wT(this.times,this.values,this.getValueSize(),e)}}to.prototype.ValueTypeName="quaternion";to.prototype.DefaultInterpolation=Qo;to.prototype.InterpolantFactoryMethodSmooth=void 0;class ca extends ni{}ca.prototype.ValueTypeName="string";ca.prototype.ValueBufferType=Array;ca.prototype.DefaultInterpolation=Ml;ca.prototype.InterpolantFactoryMethodLinear=void 0;ca.prototype.InterpolantFactoryMethodSmooth=void 0;class Ol extends ni{}Ol.prototype.ValueTypeName="vector";class kl{constructor(e,t=-1,r,i=Mp){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=pr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(pD(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ni.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let u=[],f=[];u.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=Ht.getKeyframeOrder(u);u=Ht.sortedArray(u,1,h),f=Ht.sortedArray(f,1,h),!i&&u[0]===0&&(u.push(s),f.push(f[0])),o.push(new Nl(".morphTargetInfluences["+t[a].name+"]",u,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,u=e.length;a<u;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const p=h[1];let d=i[p];d||(i[p]=d=[]),d.push(f)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,d,m,v,x){if(m.length!==0){const y=[],_=[];Ht.flattenJSON(m,y,_,v),y.length!==0&&x.push(new p(d,y,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const d=f[p].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let x=0;x<d[v].morphTargets.length;x++)m[d[v].morphTargets[x]]=-1;for(const x in m){const y=[],_=[];for(let M=0;M!==d[v].morphTargets.length;++M){const A=d[v];y.push(A.time),_.push(A.morphTarget===x?1:0)}i.push(new Nl(".morphTargetInfluence["+x+"]",y,_))}u=m.length*o}else{const m=".bones["+t[p].name+"]";r(Ol,m+".position",d,"pos",i),r(to,m+".quaternion",d,"rot",i),r(Ol,m+".scale",d,"scl",i)}}return i.length===0?null:new this(s,u,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hD(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nl;case"vector":case"vector2":case"vector3":case"vector4":return Ol;case"color":return ux;case"quaternion":return to;case"bool":case"boolean":return ua;case"string":return ca}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function pD(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hD(n.type);if(n.times===void 0){const t=[],r=[];Ht.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const na={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class cx{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return u?u(h):h},this.setURLModifier=function(h){return u=h,this},this.addHandler=function(h,p){return f.push(h,p),this},this.removeHandler=function(h){const p=f.indexOf(h);return p!==-1&&f.splice(p,2),this},this.getHandler=function(h){for(let p=0,d=f.length;p<d;p+=2){const m=f[p],v=f[p+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const ST=new cx;class Pn{constructor(e){this.manager=e!==void 0?e:ST,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ki={};class ar extends Pn{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=na.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ki[e]!==void 0){ki[e].push({onLoad:t,onProgress:r,onError:i});return}ki[e]=[],ki[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||f.body===void 0||f.body.getReader===void 0)return f;const h=ki[e],p=f.body.getReader(),d=f.headers.get("Content-Length"),m=d?parseInt(d):0,v=m!==0;let x=0;const y=new ReadableStream({start(_){M();function M(){p.read().then(({done:A,value:S})=>{if(A)_.close();else{x+=S.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let C=0,B=h.length;C<B;C++){const L=h[C];L.onProgress&&L.onProgress(T)}_.enqueue(S),M()}})}}});return new Response(y)}else throw Error(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return f.json();default:if(a===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),d=p&&p[1]?p[1].toLowerCase():void 0,m=new TextDecoder(d);return f.arrayBuffer().then(v=>m.decode(v))}}}).then(f=>{na.add(e,f);const h=ki[e];delete ki[e];for(let p=0,d=h.length;p<d;p++){const m=h[p];m.onLoad&&m.onLoad(f)}}).catch(f=>{const h=ki[e];if(h===void 0)throw this.manager.itemError(e),f;delete ki[e];for(let p=0,d=h.length;p<d;p++){const m=h[p];m.onError&&m.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class mD extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ar(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=kl.parse(e[r]);t.push(i)}return t}}class gD extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Kv,u=new ar(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let f=0;function h(p){u.load(e[p],function(d){const m=s.parse(d,!0);o[p]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},f+=1,f===6&&(m.mipmapCount===1&&(a.minFilter=Dt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let p=0,d=e.length;p<d;++p)h(p);else u.load(e,function(p){const d=s.parse(p,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<d.mipmapCount;x++)o[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+x]),o[v].format=d.format,o[v].width=d.width,o[v].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Dt),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class zc extends Pn{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=na.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=kc("img");function u(){h(),na.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(p){h(),i&&i(p),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",u,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class fx extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=new Ql,o=new zc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function u(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let f=0;f<e.length;++f)u(f);return s}}class dx extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Hs,a=new ar(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(u){const f=s.parse(u);!f||(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:On,o.wrapT=f.wrapT!==void 0?f.wrapT:On,o.magFilter=f.magFilter!==void 0?f.magFilter:Dt,o.minFilter=f.minFilter!==void 0?f.minFilter:Dt,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=qi),f.mipmapCount===1&&(o.minFilter=Dt),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},r,i),o}}class hx extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=new Yt,o=new zc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class ti extends mt{constructor(e,t=1){super();this.type="Light",this.color=new Ae(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ti.prototype.isLight=!0;class px extends ti{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.groundColor=new Ae(t)}copy(e){return ti.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}px.prototype.isHemisphereLight=!0;const Aw=new Ge,ww=new I,Sw=new I;class mx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new Ge,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tf,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Rt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;ww.setFromMatrixPosition(e.matrixWorld),t.position.copy(ww),Sw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Sw),t.updateMatrixWorld(),Aw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Aw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ET extends mx{constructor(){super(new kt(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=Oc*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ET.prototype.isSpotLightShadow=!0;class kp extends ti{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t);this.type="SpotLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new ET}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}kp.prototype.isSpotLight=!0;const Ew=new Ge,Ju=new I,Jg=new I;class TT extends mx{constructor(){super(new kt(90,1,.5,500));this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Rt(2,1,1,1),new Rt(0,1,1,1),new Rt(3,1,1,1),new Rt(1,1,1,1),new Rt(3,0,1,1),new Rt(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Ju.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ju),Jg.copy(r.position),Jg.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Jg),r.updateMatrixWorld(),i.makeTranslation(-Ju.x,-Ju.y,-Ju.z),Ew.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ew)}}TT.prototype.isPointLightShadow=!0;class Gp extends ti{constructor(e,t,r=0,i=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new TT}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Gp.prototype.isPointLight=!0;class CT extends mx{constructor(){super(new Zr(-5,5,5,-5,.5,500))}}CT.prototype.isDirectionalLightShadow=!0;class Up extends ti{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.shadow=new CT}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Up.prototype.isDirectionalLight=!0;class gx extends ti{constructor(e,t){super(e,t);this.type="AmbientLight"}}gx.prototype.isAmbientLight=!0;class yx extends ti{constructor(e,t,r=10,i=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}yx.prototype.isRectAreaLight=!0;class vx{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new I)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}vx.prototype.isSphericalHarmonics3=!0;class cf extends ti{constructor(e=new vx,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}cf.prototype.isLightProbe=!0;class bT extends Pn{constructor(e){super(e);this.textures={}}load(e,t,r,i){const s=this,o=new ar(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Wt.fromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ae().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ae().setHex(o.value);break;case"v2":i.uniforms[s].value=new de().fromArray(o.value);break;case"v3":i.uniforms[s].value=new I().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Rt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new gn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ge().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}}class $r{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xx extends Ye{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}xx.prototype.isInstancedBufferGeometry=!0;class RT extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ar(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],_=s(m,y.buffer),M=el(y.type,_),A=new lo(M,y.stride);return A.uuid=y.uuid,t[v]=A,A}function s(m,v){if(r[v]!==void 0)return r[v];const y=m.arrayBuffers[v],_=new Uint32Array(y).buffer;return r[v]=_,_}const o=e.isInstancedBufferGeometry?new xx:new Ye,a=e.data.index;if(a!==void 0){const m=el(a.type,a.array);o.setIndex(new pt(m,1))}const u=e.data.attributes;for(const m in u){const v=u[m];let x;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);x=new Xi(y,v.itemSize,v.offset,v.normalized)}else{const y=el(v.type,v.array),_=v.isInstancedBufferAttribute?qo:pt;x=new _(y,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),v.updateRange!==void 0&&(x.updateRange.offset=v.updateRange.offset,x.updateRange.count=v.updateRange.count),o.setAttribute(m,x)}const f=e.data.morphAttributes;if(f)for(const m in f){const v=f[m],x=[];for(let y=0,_=v.length;y<_;y++){const M=v[y];let A;if(M.isInterleavedBufferAttribute){const S=i(e.data,M.data);A=new Xi(S,M.itemSize,M.offset,M.normalized)}else{const S=el(M.type,M.array);A=new pt(S,M.itemSize,M.normalized)}M.name!==void 0&&(A.name=M.name),x.push(A)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let m=0,v=p.length;m!==v;++m){const x=p[m];o.addGroup(x.start,x.count,x.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new I;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new $i(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class yD extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?$r.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ar(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){let f=null;try{f=JSON.parse(u)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?$r.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ar(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),u=a.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,u,a,r),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),t!==void 0){let p=!1;for(const d in o)if(o[d]instanceof HTMLImageElement){p=!0;break}p===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,a,o,t),f=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,f),u}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new yi().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new af().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new RT;for(let s=0,o=e.length;s<o;s++){let a;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(u);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:u.type in Mw?a=Mw[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}a.uuid=u.uuid,u.name!==void 0&&(a.name=u.name),a.isBufferGeometry===!0&&u.userData!==void 0&&(a.userData=u.userData),r[u.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new bT;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const u=e[o];if(u.type==="MultiMaterial"){const f=[];for(let h=0;h<u.materials.length;h++){const p=u.materials[h];r[p.uuid]===void 0&&(r[p.uuid]=s.parse(p)),f.push(r[p.uuid])}i[u.uuid]=f}else r[u.uuid]===void 0&&(r[u.uuid]=s.parse(u)),i[u.uuid]=r[u.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=kl.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(u){return r.manager.itemStart(u),s.load(u,function(){r.manager.itemEnd(u)},void 0,function(){r.manager.itemError(u),r.manager.itemEnd(u)})}function a(u){if(typeof u=="string"){const f=u,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(h)}else return u.data?{data:el(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new cx(t);s=new zc(u),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const p=e[f],d=p.url;if(Array.isArray(d)){const m=[];for(let v=0,x=d.length;v<x;v++){const y=d[v],_=a(y);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new Hs(_.data,_.width,_.height)))}i[p.uuid]=new Go(m)}else{const m=a(p.url);i[p.uuid]=new Go(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(u)}else return o.data?{data:el(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new zc(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const u=e[o],f=u.url;if(Array.isArray(f)){const h=[];for(let p=0,d=f.length;p<d;p++){const m=f[p],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new Hs(v.data,v.width,v.height)))}r[u.uuid]=new Go(h)}else{const h=await s(u.url);r[u.uuid]=new Go(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const u=t[a.image],f=u.data;let h;Array.isArray(f)?(h=new Ql,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new Hs:h=new Yt,f&&(h.needsUpdate=!0)),h.source=u,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,vD)),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],Tw),h.wrapT=r(a.wrap[1],Tw)),a.format!==void 0&&(h.format=a.format),a.type!==void 0&&(h.type=a.type),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,Cw)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,Cw)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function u(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let v=0,x=d.length;v<x;v++){const y=d[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function f(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let h,p;switch(e.type){case"Scene":o=new ql,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ae(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new rf(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new nf(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new kt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Zr(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new gx(e.color,e.intensity);break;case"DirectionalLight":o=new Up(e.color,e.intensity);break;case"PointLight":o=new Gp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new yx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new kp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new px(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cf().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),p=u(e.material),o=new sf(h,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),p=u(e.material),o=new Qt(h,p);break;case"InstancedMesh":h=a(e.geometry),p=u(e.material);const d=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new jv(h,p,d),o.instanceMatrix=new qo(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new qo(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new dT;break;case"Line":o=new Mi(a(e.geometry),u(e.material));break;case"LineLoop":o=new Lp(a(e.geometry),u(e.material));break;case"LineSegments":o=new Kn(a(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new Zl(a(e.geometry),u(e.material));break;case"Sprite":o=new Bp(u(e.material));break;case"Group":o=new pi;break;case"Bone":o=new of;break;default:o=new mt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const v=d[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const v=d[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const vD={UVMapping:xp,CubeReflectionMapping:Ki,CubeRefractionMapping:Qs,EquirectangularReflectionMapping:vl,EquirectangularRefractionMapping:Ic,CubeUVReflectionMapping:Kl},Tw={RepeatWrapping:xi,ClampToEdgeWrapping:On,MirroredRepeatWrapping:xl},Cw={NearestFilter:Kt,NearestMipmapNearestFilter:Dc,NearestMipmapLinearFilter:Fc,LinearFilter:Dt,LinearMipmapNearestFilter:_p,LinearMipmapLinearFilter:qi};class _x extends Pn{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=na.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){na.add(e,u),t&&t(u),s.manager.itemEnd(e)}).catch(function(u){i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}_x.prototype.isImageBitmapLoader=!0;let $d;const Mx={getContext:function(){return $d===void 0&&($d=new(window.AudioContext||window.webkitAudioContext)),$d},setContext:function(n){$d=n}};class BT extends Pn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ar(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const u=a.slice(0);Mx.getContext().decodeAudioData(u,function(h){t(h)})}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},r,i)}}class LT extends cf{constructor(e,t,r=1){super(void 0,r);const i=new Ae().set(e),s=new Ae().set(t),o=new I(i.r,i.g,i.b),a=new I(s.r,s.g,s.b),u=Math.sqrt(Math.PI),f=u*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(u),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}LT.prototype.isHemisphereLightProbe=!0;class PT extends cf{constructor(e,t=1){super(void 0,t);const r=new Ae().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}PT.prototype.isAmbientLightProbe=!0;const bw=new Ge,Rw=new Ge,Mo=new Ge;class xD{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Mo.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Vo*t.fov*.5)/t.zoom;let a,u;Rw.elements[12]=-i,bw.elements[12]=i,a=-o*t.aspect+s,u=o*t.aspect+s,Mo.elements[0]=2*t.near/(u-a),Mo.elements[8]=(u+a)/(u-a),this.cameraL.projectionMatrix.copy(Mo),a=-o*t.aspect-s,u=o*t.aspect-s,Mo.elements[0]=2*t.near/(u-a),Mo.elements[8]=(u+a)/(u-a),this.cameraR.projectionMatrix.copy(Mo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bw)}}class Ax{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Bw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Bw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Bw(){return(typeof performance=="undefined"?Date:performance).now()}const Ao=new I,Lw=new an,_D=new I,wo=new I;class MD extends mt{constructor(){super();this.type="AudioListener",this.context=Mx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ax}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ao,Lw,_D),wo.set(0,0,-1).applyQuaternion(Lw),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ao.x,i),t.positionY.linearRampToValueAtTime(Ao.y,i),t.positionZ.linearRampToValueAtTime(Ao.z,i),t.forwardX.linearRampToValueAtTime(wo.x,i),t.forwardY.linearRampToValueAtTime(wo.y,i),t.forwardZ.linearRampToValueAtTime(wo.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ao.x,Ao.y,Ao.z),t.setOrientation(wo.x,wo.y,wo.z,r.x,r.y,r.z)}}class wx extends mt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const So=new I,Pw=new an,AD=new I,Eo=new I;class wD extends wx{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(So,Pw,AD),Eo.set(0,0,1).applyQuaternion(Pw);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(So.x,r),t.positionY.linearRampToValueAtTime(So.y,r),t.positionZ.linearRampToValueAtTime(So.z,r),t.orientationX.linearRampToValueAtTime(Eo.x,r),t.orientationY.linearRampToValueAtTime(Eo.y,r),t.orientationZ.linearRampToValueAtTime(Eo.z,r)}else t.setPosition(So.x,So.y,So.z),t.setOrientation(Eo.x,Eo.y,Eo.z)}}class IT{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class DT{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(r,i,u,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let u=t,f=t+t;u!==f;++u)if(r[u]!==r[u+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){an.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;an.multiplyQuaternionsFlat(e,o,e,t,e,r),an.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const u=t+a;e[u]=e[u]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const Sx="\\[\\]\\.:\\/",SD=new RegExp("["+Sx+"]","g"),Ex="[^"+Sx+"]",ED="[^"+Sx.replace("\\.","")+"]",TD=/((?:WC+[\/:])*)/.source.replace("WC",Ex),CD=/(WCOD+)?/.source.replace("WCOD",ED),bD=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ex),RD=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ex),BD=new RegExp("^"+TD+CD+bD+RD+"$"),LD=["material","materials","bones"];class PD{constructor(e,t,r){const i=r||Mt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Mt{constructor(e,t,r){this.path=t,this.parsedPath=r||Mt.parseTrackName(t),this.node=Mt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Mt.Composite(e,t,r):new Mt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(SD,"")}static parseTrackName(e){const t=BD.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);LD.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const u=r(a.children);if(u)return u}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Mt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[i];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Mt.Composite=PD;Mt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Mt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Mt.prototype.GetterByBindingType=[Mt.prototype._getValue_direct,Mt.prototype._getValue_array,Mt.prototype._getValue_arrayElement,Mt.prototype._getValue_toArray];Mt.prototype.SetterByBindingTypeAndVersioning=[[Mt.prototype._setValue_direct,Mt.prototype._setValue_direct_setNeedsUpdate,Mt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mt.prototype._setValue_array,Mt.prototype._setValue_array_setNeedsUpdate,Mt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mt.prototype._setValue_arrayElement,Mt.prototype._setValue_arrayElement_setNeedsUpdate,Mt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mt.prototype._setValue_fromArray,Mt.prototype._setValue_fromArray_setNeedsUpdate,Mt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FT{constructor(){this.uuid=pr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,u=e.length,f=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const d=arguments[h],m=d.uuid;let v=t[m];if(v===void 0){v=u++,t[m]=v,e.push(d);for(let x=0,y=o;x!==y;++x)s[x].push(new Mt(d,r[x],i[x]))}else if(v<f){a=e[v];const x=--f,y=e[x];t[y.uuid]=v,e[v]=y,t[m]=x,e[x]=d;for(let _=0,M=o;_!==M;++_){const A=s[_],S=A[x];let T=A[v];A[v]=S,T===void 0&&(T=new Mt(d,r[_],i[_])),A[x]=T}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const u=arguments[o],f=u.uuid,h=t[f];if(h!==void 0&&h>=s){const p=s++,d=e[p];t[d.uuid]=h,e[h]=d,t[f]=p,e[p]=u;for(let m=0,v=i;m!==v;++m){const x=r[m],y=x[p],_=x[h];x[h]=y,x[p]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,u=arguments.length;a!==u;++a){const f=arguments[a],h=f.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<s){const d=--s,m=e[d],v=--o,x=e[v];t[m.uuid]=p,e[p]=m,t[x.uuid]=d,e[d]=x,e.pop();for(let y=0,_=i;y!==_;++y){const M=r[y],A=M[d],S=M[v];M[p]=A,M[d]=S,M.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=p),e[p]=m,e.pop();for(let v=0,x=i;v!==x;++v){const y=r[v];y[p]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,u=this._objects,f=u.length,h=this.nCachedObjects_,p=new Array(f);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(p);for(let d=h,m=u.length;d!==m;++d){const v=u[d];p[d]=new Mt(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,u=o[a],f=e[a];t[f]=r,o[r]=u,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}FT.prototype.isAnimationObjectGroup=!0;class ID{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),u={endingStart:Oo,endingEnd:Oo};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=u}this._interpolantSettings=u,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=IE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const u=a.parameterPositions,f=a.sampleValues;return u[0]=s,u[1]=s+r,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*r;if(u<0||r===0)return;this._startTime=null,t=r*u}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Hv:for(let h=0,p=u.length;h!==p;++h)u[h].evaluate(o),f[h].accumulateAdditive(a);break;case Mp:default:for(let h=0,p=u.length;h!==p;++h)u[h].evaluate(o),f[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===DE;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===PE){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=ko,i.endingEnd=ko):(e?i.endingStart=this.zeroSlopeAtStart?ko:Oo:i.endingStart=Nc,t?i.endingEnd=this.zeroSlopeAtEnd?ko:Oo:i.endingEnd=Nc)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,u=o.sampleValues;return a[0]=s,u[0]=t,a[1]=s+e,u[1]=r,this}}class NT extends Zi{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,u=r.uuid,f=this._bindingsByRootAndName;let h=f[u];h===void 0&&(h={},f[u]=h);for(let p=0;p!==s;++p){const d=i[p],m=d.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[p]=v;else{if(v=o[p],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,u,m));continue}const x=t&&t._propertyBindings[p].binding.parsedPath;v=new DT(Mt.create(r,m,x),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,m),o[p]=v}a[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],u=a.knownActions,f=u[u.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,u[h]=f,u.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete p[d],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],u=t[t.length-1],f=e._cacheIndex;u._cacheIndex=f,t[f]=u,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new lx(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?kl.findByName(i,e):e;const a=o!==null?o.uuid:e,u=this._actionsByClip[a];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Mp),u!==void 0){const p=u.actionByRoot[s];if(p!==void 0&&p.blendMode===r)return p;f=u.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new ID(this,o,t,r);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?kl.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(i,e,s,o);const a=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,u=o.length;a!==u;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,u=a[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}NT.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Hp{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Hp(this.value.clone===void 0?this.value:this.value.clone())}}class OT extends lo{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}OT.prototype.isInstancedInterleavedBuffer=!0;class kT{constructor(e,t,r,i,s){this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}kT.prototype.isGLBufferAttribute=!0;class GT{constructor(e,t,r=0,i=1/0){this.ray=new oo(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Jo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Ay(e,this,r,t),r.sort(Iw),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Ay(e[i],this,r,t);return r.sort(Iw),r}}function Iw(n,e){return n.distance-e.distance}function Ay(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)Ay(i[s],e,t,!0)}}class wy{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(rn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DD{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const Dw=new de;class $l{constructor(e=new de(1/0,1/0),t=new de(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Dw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Dw.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}$l.prototype.isBox2=!0;const Fw=new I,eh=new I;class UT{constructor(e=new I,t=new I){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Fw.subVectors(e,this.start),eh.subVectors(this.end,this.start);const r=eh.dot(eh);let s=eh.dot(Fw)/r;return t&&(s=rn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Nw=new I;class FD extends mt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new Ye,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,u=32;o<u;o++,a++){const f=o/u*Math.PI*2,h=a/u*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new ze(i,3));const s=new yn({fog:!1,toneMapped:!1});this.cone=new Kn(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Nw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Nw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xs=new I,th=new Ge,jg=new Ge;class HT extends Kn{constructor(e){const t=zT(e),r=new Ye,i=[],s=[],o=new Ae(0,0,1),a=new Ae(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new ze(i,3)),r.setAttribute("color",new ze(s,3));const u=new yn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,u);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");jg.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(th.multiplyMatrices(jg,a.matrixWorld),xs.setFromMatrixPosition(th),i.setXYZ(o,xs.x,xs.y,xs.z),th.multiplyMatrices(jg,a.parent.matrixWorld),xs.setFromMatrixPosition(th),i.setXYZ(o+1,xs.x,xs.y,xs.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function zT(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,zT(n.children[t]));return e}class ND extends Qt{constructor(e,t,r){const i=new ta(t,4,2),s=new nr({wireframe:!0,fog:!1,toneMapped:!1});super(i,s);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const OD=new I,Ow=new Ae,kw=new Ae;class kD extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new $o(t);i.rotateY(Math.PI*.5),this.material=new nr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new pt(o,3)),this.add(new Qt(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Ow.copy(this.light.color),kw.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?Ow:kw;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(OD.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VT extends Kn{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ae(r),i=new Ae(i);const s=t/2,o=e/t,a=e/2,u=[],f=[];for(let d=0,m=0,v=-a;d<=t;d++,v+=o){u.push(-a,0,v,a,0,v),u.push(v,0,-a,v,0,a);const x=d===s?r:i;x.toArray(f,m),m+=3,x.toArray(f,m),m+=3,x.toArray(f,m),m+=3,x.toArray(f,m),m+=3}const h=new Ye;h.setAttribute("position",new ze(u,3)),h.setAttribute("color",new ze(f,3));const p=new yn({vertexColors:!0,toneMapped:!1});super(h,p);this.type="GridHelper"}}class GD extends Kn{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Ae(s),o=new Ae(o);const a=[],u=[];for(let p=0;p<=t;p++){const d=p/t*(Math.PI*2),m=Math.sin(d)*e,v=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,v);const x=p&1?s:o;u.push(x.r,x.g,x.b),u.push(x.r,x.g,x.b)}for(let p=0;p<=r;p++){const d=p&1?s:o,m=e-e/r*p;for(let v=0;v<i;v++){let x=v/i*(Math.PI*2),y=Math.sin(x)*m,_=Math.cos(x)*m;a.push(y,0,_),u.push(d.r,d.g,d.b),x=(v+1)/i*(Math.PI*2),y=Math.sin(x)*m,_=Math.cos(x)*m,a.push(y,0,_),u.push(d.r,d.g,d.b)}}const f=new Ye;f.setAttribute("position",new ze(a,3)),f.setAttribute("color",new ze(u,3));const h=new yn({vertexColors:!0,toneMapped:!1});super(f,h);this.type="PolarGridHelper"}}const Gw=new I,nh=new I,Uw=new I;class UD extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new Ye;i.setAttribute("position",new ze([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new yn({fog:!1,toneMapped:!1});this.lightPlane=new Mi(i,s),this.add(this.lightPlane),i=new Ye,i.setAttribute("position",new ze([0,0,0,0,0,1],3)),this.targetLine=new Mi(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Gw.setFromMatrixPosition(this.light.matrixWorld),nh.setFromMatrixPosition(this.light.target.matrixWorld),Uw.subVectors(nh,Gw),this.lightPlane.lookAt(nh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(nh),this.targetLine.scale.z=Uw.length()}}const rh=new I,Zt=new Yo;class HD extends Kn{constructor(e){const t=new Ye,r=new yn({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={},a=new Ae(16755200),u=new Ae(16711680),f=new Ae(43775),h=new Ae(16777215),p=new Ae(3355443);d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",u),d("p","n2",u),d("p","n3",u),d("p","n4",u),d("u1","u2",f),d("u2","u3",f),d("u3","u1",f),d("c","t",h),d("p","c",p),d("cn1","cn2",p),d("cn3","cn4",p),d("cf1","cf2",p),d("cf3","cf4",p);function d(v,x,y){m(v,y),m(x,y)}function m(v,x){i.push(0,0,0),s.push(x.r,x.g,x.b),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new ze(i,3)),t.setAttribute("color",new ze(s,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Zt.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),nn("c",t,e,Zt,0,0,-1),nn("t",t,e,Zt,0,0,1),nn("n1",t,e,Zt,-r,-i,-1),nn("n2",t,e,Zt,r,-i,-1),nn("n3",t,e,Zt,-r,i,-1),nn("n4",t,e,Zt,r,i,-1),nn("f1",t,e,Zt,-r,-i,1),nn("f2",t,e,Zt,r,-i,1),nn("f3",t,e,Zt,-r,i,1),nn("f4",t,e,Zt,r,i,1),nn("u1",t,e,Zt,r*.7,i*1.1,-1),nn("u2",t,e,Zt,-r*.7,i*1.1,-1),nn("u3",t,e,Zt,0,i*2,-1),nn("cf1",t,e,Zt,-r,0,1),nn("cf2",t,e,Zt,r,0,1),nn("cf3",t,e,Zt,0,-i,1),nn("cf4",t,e,Zt,0,i,1),nn("cn1",t,e,Zt,-r,0,-1),nn("cn2",t,e,Zt,r,0,-1),nn("cn3",t,e,Zt,0,-i,-1),nn("cn4",t,e,Zt,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function nn(n,e,t,r,i,s,o){rh.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const u=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)u.setXYZ(a[f],rh.x,rh.y,rh.z)}}const ih=new lr;class WT extends Kn{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ye;s.setIndex(new pt(r,1)),s.setAttribute("position",new pt(i,3));super(s,new yn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ih.setFromObject(this.object),ih.isEmpty())return;const t=ih.min,r=ih.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Kn.prototype.copy.call(this,e),this.object=e.object,this}}class zD extends Kn{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ye;s.setIndex(new pt(r,1)),s.setAttribute("position",new ze(i,3));super(s,new yn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class VD extends Mi{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Ye;o.setAttribute("position",new ze(s,3)),o.computeBoundingSphere();super(o,new yn({color:i,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],u=new Ye;u.setAttribute("position",new ze(a,3)),u.computeBoundingSphere(),this.add(new Qt(u,new nr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?sr:Ks,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Hw=new I;let sh,Kg;class WD extends mt{constructor(e=new I(0,0,1),t=new I(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super();this.type="ArrowHelper",sh===void 0&&(sh=new Ye,sh.setAttribute("position",new ze([0,0,0,0,1,0],3)),Kg=new $s(0,.5,1,5,1),Kg.translate(0,-.5,0)),this.position.copy(t),this.line=new Mi(sh,new yn({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qt(Kg,new nr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Hw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Hw,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class JT extends Kn{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ye;i.setAttribute("position",new ze(t,3)),i.setAttribute("color",new ze(r,3));const s=new yn({vertexColors:!0,toneMapped:!1});super(i,s);this.type="AxesHelper"}setColors(e,t,r){const i=new Ae,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class JD{constructor(){this.type="ShapePath",this.color=new Ae,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new El,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(M){const A=[];for(let S=0,T=M.length;S<T;S++){const C=M[S],B=new yi;B.curves=C.curves,A.push(B)}return A}function i(M,A){const S=A.length;let T=!1;for(let C=S-1,B=0;B<S;C=B++){let L=A[C],F=A[B],G=F.x-L.x,b=F.y-L.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(L=A[B],G=-G,F=A[C],b=-b),M.y<L.y||M.y>F.y)continue;if(M.y===L.y){if(M.x===L.x)return!0}else{const P=b*(M.x-L.x)-G*(M.y-L.y);if(P===0)return!0;if(P<0)continue;T=!T}}else{if(M.y!==L.y)continue;if(F.x<=M.x&&M.x<=L.x||L.x<=M.x&&M.x<=F.x)return!0}}return T}const s=vi.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return r(o);let a,u,f;const h=[];if(o.length===1)return u=o[0],f=new yi,f.curves=u.curves,h.push(f),h;let p=!s(o[0].getPoints());p=e?!p:p;const d=[],m=[];let v=[],x=0,y;m[x]=void 0,v[x]=[];for(let M=0,A=o.length;M<A;M++)u=o[M],y=u.getPoints(),a=s(y),a=e?!a:a,a?(!p&&m[x]&&x++,m[x]={s:new yi,p:y},m[x].s.curves=u.curves,p&&x++,v[x]=[]):v[x].push({h:u,p:y[0]});if(!m[0])return r(o);if(m.length>1){let M=!1,A=0;for(let S=0,T=m.length;S<T;S++)d[S]=[];for(let S=0,T=m.length;S<T;S++){const C=v[S];for(let B=0;B<C.length;B++){const L=C[B];let F=!0;for(let G=0;G<m.length;G++)i(L.p,m[G].p)&&(S!==G&&A++,F?(F=!1,d[G].push(L)):M=!0);F&&d[S].push(L)}}A>0&&M===!1&&(v=d)}let _;for(let M=0,A=m.length;M<A;M++){f=m[M].s,h.push(f),_=v[M];for(let S=0,T=_.length;S<T;S++)f.holes.push(_[S].h)}return h}}class nc{static toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=rn(e,-65504,65504),zw[0]=e;const t=Vw[0],r=t>>23&511;return Jr[r]+((t&8388607)>>jr[r])}static fromHalfFloat(e){const t=e>>10;return Vw[0]=Tx[KT[t]+(e&1023)]+eu[t],zw[0]}}const jT=new ArrayBuffer(4),zw=new Float32Array(jT),Vw=new Uint32Array(jT),Jr=new Uint32Array(512),jr=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(Jr[n]=0,Jr[n|256]=32768,jr[n]=24,jr[n|256]=24):e<-14?(Jr[n]=1024>>-e-14,Jr[n|256]=1024>>-e-14|32768,jr[n]=-e-1,jr[n|256]=-e-1):e<=15?(Jr[n]=e+15<<10,Jr[n|256]=e+15<<10|32768,jr[n]=13,jr[n|256]=13):e<128?(Jr[n]=31744,Jr[n|256]=64512,jr[n]=24,jr[n|256]=24):(Jr[n]=31744,Jr[n|256]=64512,jr[n]=13,jr[n|256]=13)}const Tx=new Uint32Array(2048),eu=new Uint32Array(64),KT=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,Tx[n]=e|t}for(let n=1024;n<2048;++n)Tx[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)eu[n]=n<<23;eu[31]=1199570944;eu[32]=2147483648;for(let n=33;n<63;++n)eu[n]=2147483648+(n-32<<23);eu[63]=3347054592;for(let n=1;n<64;++n)n!==32&&(KT[n]=1024);const jD=0,KD=1,XD=0,QD=1,YD=2;function qD(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function ZD(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}class $D extends Zl{constructor(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");super(e,t)}}class eF extends Bp{constructor(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");super(e)}}class tF extends Zl{constructor(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");super(e,t)}}class nF extends uo{constructor(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class rF extends uo{constructor(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class iF extends uo{constructor(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");super(e)}}class sF extends I{constructor(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");super(e,t,r)}}class oF extends pt{constructor(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");super(e,t);this.setUsage(wl)}}class aF extends KE{constructor(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");super(e,t)}}class lF extends XE{constructor(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");super(e,t)}}class uF extends QE{constructor(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");super(e,t)}}class cF extends YE{constructor(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");super(e,t)}}class fF extends Ap{constructor(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");super(e,t)}}class dF extends qE{constructor(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");super(e,t)}}class hF extends wp{constructor(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");super(e,t)}}class pF extends ze{constructor(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");super(e,t)}}class mF extends $E{constructor(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");super(e,t)}}mr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(mr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};El.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};class gF extends JT{constructor(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");super(e)}}class yF extends WT{constructor(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");super(e,t)}}class vF extends Kn{constructor(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");super(new $v(e.geometry),new yn({color:t!==void 0?t:16777215}))}}VT.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};HT.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};class xF extends Kn{constructor(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");super(new ex(e.geometry),new yn({color:t!==void 0?t:16777215}))}}Pn.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),$r.extractUrlBase(n)};Pn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};class _F extends ar{constructor(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");super(e)}}class MF extends dx{constructor(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");super(e)}}$l.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};$l.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};$l.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};$l.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};lr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};lr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};lr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};lr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};lr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};ao.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};$i.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};tf.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};UT.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};gn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};gn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};gn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};gn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};gn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};gn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Ge.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};Ge.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ge.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new I().setFromMatrixColumn(this,3)};Ge.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};Ge.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ge.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ge.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ge.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ge.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};Ge.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ge.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ge.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ge.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ge.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ge.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ge.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ge.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ge.prototype.makeFrustum=function(n,e,t,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,s)};Ge.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};ci.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};an.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};an.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};oo.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};oo.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};oo.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};sn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};sn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};sn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};sn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};sn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};sn.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),sn.getBarycoord(n,e,t,r,i)};sn.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),sn.getNormal(n,e,t,r)};yi.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};yi.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new wi(this,n)};yi.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ea(this,n)};de.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};de.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};de.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};I.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};I.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};I.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};I.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};I.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};I.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};I.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};I.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};I.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Rt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Rt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};mt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};mt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};mt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};mt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};mt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(mt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Qt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Qt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),FE},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});sf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};kt.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ti.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(pt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===wl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(wl)}}});pt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?wl:Al),this};pt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},pt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ye.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};Ye.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new pt(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};Ye.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};Ye.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Ye.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Ye.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};Ye.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Ye.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});lo.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?wl:Al),this};lo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};wi.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};wi.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};wi.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};ql.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Hp.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(Wt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ae}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Pv}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Bn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Bt.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)};Bt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Bt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Bt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Bt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Bt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Bt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Bt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Bt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Bt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Bt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Bt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Bt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Bt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Bt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Bt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Bt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Bt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Bt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Bt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Bt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Bt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Bt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Bt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Bt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Bt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?bt:or}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(lT.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});class AF extends ef{constructor(e,t,r){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");super(e,r)}}Object.defineProperties(_n.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});wx.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new BT().load(n,function(r){e.setBuffer(r)}),this};IT.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};Sp.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};Sp.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)};so.crossOrigin=void 0;so.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new hx;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};so.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new fx;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};so.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};so.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function wF(){console.error("THREE.CanvasRenderer has been removed")}function SF(){console.error("THREE.JSONLoader has been removed.")}const EF={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function TF(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}class CF extends Ye{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js");super()}}class bF extends Ye{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js");super()}}function RF(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function BF(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function LF(){console.error("THREE.ImmediateRenderObject has been removed.")}class PF extends _n{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.');super(e,t,r);this.samples=4}}class IF extends Xl{constructor(e,t,r,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture.");super(e,t,r,i)}}class DF extends $c{constructor(e,t,r,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture.");super(e,t,r,i)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vp}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vp);var FF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:kv,AddEquation:zi,AddOperation:pE,AdditiveAnimationBlendMode:Hv,AdditiveBlending:V0,AlphaFormat:SE,AlwaysDepth:aE,AlwaysStencilFunc:UE,AmbientLight:gx,AmbientLightProbe:PT,AnimationClip:kl,AnimationLoader:mD,AnimationMixer:NT,AnimationObjectGroup:FT,AnimationUtils:Ht,ArcCurve:Xv,ArrayCamera:Jv,ArrowHelper:WD,Audio:wx,AudioAnalyser:IT,AudioContext:Mx,AudioListener:MD,AudioLoader:BT,AxesHelper:JT,AxisHelper:gF,BackSide:sr,BasicDepthPacking:OE,BasicShadowMap:dB,BinaryTextureLoader:MF,Bone:of,BooleanKeyframeTrack:ua,BoundingBoxHelper:yF,Box2:$l,Box3:lr,Box3Helper:zD,BoxBufferGeometry:_i,BoxGeometry:_i,BoxHelper:WT,BufferAttribute:pt,BufferGeometry:Ye,BufferGeometryLoader:RT,ByteType:xE,Cache:na,Camera:Yo,CameraHelper:HD,CanvasRenderer:wF,CanvasTexture:mT,CapsuleBufferGeometry:Tl,CapsuleGeometry:Tl,CatmullRomCurve3:Yv,CineonToneMapping:yE,CircleBufferGeometry:Cl,CircleGeometry:Cl,ClampToEdgeWrapping:On,Clock:Ax,Color:Ae,ColorKeyframeTrack:ux,ColorManagement:Cr,CompressedTexture:Kv,CompressedTextureLoader:gD,ConeBufferGeometry:bl,ConeGeometry:bl,CubeCamera:Sp,CubeReflectionMapping:Ki,CubeRefractionMapping:Qs,CubeTexture:Ql,CubeTextureLoader:fx,CubeUVReflectionMapping:Kl,CubicBezierCurve:Pp,CubicBezierCurve3:qv,CubicInterpolant:MT,CullFaceBack:z0,CullFaceFront:qS,CullFaceFrontBack:fB,CullFaceNone:YS,Curve:mr,CurvePath:yT,CustomBlending:Iv,CustomToneMapping:vE,CylinderBufferGeometry:$s,CylinderGeometry:$s,Cylindrical:DD,Data3DTexture:$c,DataArrayTexture:Xl,DataTexture:Hs,DataTexture2DArray:IF,DataTexture3D:DF,DataTextureLoader:dx,DataUtils:nc,DecrementStencilOp:AB,DecrementWrapStencilOp:SB,DefaultLoadingManager:ST,DepthFormat:Gs,DepthStencilFormat:qs,DepthTexture:bp,DirectionalLight:Up,DirectionalLightHelper:UD,DiscreteInterpolant:AT,DodecahedronBufferGeometry:Rl,DodecahedronGeometry:Rl,DoubleSide:Xs,DstAlphaFactor:Nv,DstColorFactor:Ov,DynamicBufferAttribute:oF,DynamicCopyUsage:kB,DynamicDrawUsage:wl,DynamicReadUsage:FB,EdgesGeometry:$v,EdgesHelper:vF,EllipseCurve:lf,EqualDepth:uE,EqualStencilFunc:bB,EquirectangularReflectionMapping:vl,EquirectangularRefractionMapping:Ic,Euler:ao,EventDispatcher:Zi,ExtrudeBufferGeometry:wi,ExtrudeGeometry:wi,FaceColors:QD,FileLoader:ar,FlatShading:Pv,Float16BufferAttribute:ZE,Float32Attribute:pF,Float32BufferAttribute:ze,Float64Attribute:mF,Float64BufferAttribute:$E,FloatType:tr,Fog:rf,FogExp2:nf,Font:BF,FontLoader:RF,FramebufferTexture:pT,FrontSide:Ks,Frustum:tf,GLBufferAttribute:kT,GLSL1:UB,GLSL3:my,GreaterDepth:fE,GreaterEqualDepth:cE,GreaterEqualStencilFunc:PB,GreaterStencilFunc:BB,GridHelper:VT,Group:pi,HalfFloatType:Br,HemisphereLight:px,HemisphereLightHelper:kD,HemisphereLightProbe:LT,IcosahedronBufferGeometry:Bl,IcosahedronGeometry:Bl,ImageBitmapLoader:_x,ImageLoader:zc,ImageUtils:so,ImmediateRenderObject:LF,IncrementStencilOp:MB,IncrementWrapStencilOp:wB,InstancedBufferAttribute:qo,InstancedBufferGeometry:xx,InstancedInterleavedBuffer:OT,InstancedMesh:jv,Int16Attribute:cF,Int16BufferAttribute:YE,Int32Attribute:dF,Int32BufferAttribute:qE,Int8Attribute:aF,Int8BufferAttribute:KE,IntType:ME,InterleavedBuffer:lo,InterleavedBufferAttribute:Xi,Interpolant:ei,InterpolateDiscrete:Ml,InterpolateLinear:Qo,InterpolateSmooth:Eh,InvertStencilOp:EB,JSONLoader:SF,KeepStencilOp:Th,KeyframeTrack:ni,LOD:dT,LatheBufferGeometry:Zo,LatheGeometry:Zo,Layers:Jo,LensFlare:TF,LessDepth:lE,LessEqualDepth:Zh,LessEqualStencilFunc:RB,LessStencilFunc:CB,Light:ti,LightProbe:cf,Line:Mi,Line3:UT,LineBasicMaterial:yn,LineCurve:uf,LineCurve3:gT,LineDashedMaterial:ax,LineLoop:Lp,LinePieces:KD,LineSegments:Kn,LineStrip:jD,LinearEncoding:or,LinearFilter:Dt,LinearInterpolant:lx,LinearMipMapLinearFilter:yB,LinearMipMapNearestFilter:gB,LinearMipmapLinearFilter:qi,LinearMipmapNearestFilter:_p,LinearSRGBColorSpace:Cs,LinearToneMapping:mE,Loader:Pn,LoaderUtils:$r,LoadingManager:cx,LoopOnce:PE,LoopPingPong:DE,LoopRepeat:IE,LuminanceAlphaFormat:TE,LuminanceFormat:Gv,MOUSE:Co,Material:Wt,MaterialLoader:bT,Math:tp,MathUtils:tp,Matrix3:gn,Matrix4:Ge,MaxEquation:K0,Mesh:Qt,MeshBasicMaterial:nr,MeshDepthMaterial:Tp,MeshDistanceMaterial:Cp,MeshFaceMaterial:qD,MeshLambertMaterial:sx,MeshMatcapMaterial:ox,MeshNormalMaterial:Op,MeshPhongMaterial:rx,MeshPhysicalMaterial:es,MeshStandardMaterial:la,MeshToonMaterial:ix,MinEquation:j0,MirroredRepeatWrapping:xl,MixOperation:hE,MultiMaterial:ZD,MultiplyBlending:J0,MultiplyOperation:Zc,NearestFilter:Kt,NearestMipMapLinearFilter:mB,NearestMipMapNearestFilter:pB,NearestMipmapLinearFilter:Fc,NearestMipmapNearestFilter:Dc,NeverDepth:oE,NeverStencilFunc:TB,NoBlending:bn,NoColorSpace:vB,NoColors:XD,NoToneMapping:qr,NormalAnimationBlendMode:Mp,NormalBlending:zo,NotEqualDepth:dE,NotEqualStencilFunc:LB,NumberKeyframeTrack:Nl,Object3D:mt,ObjectLoader:yD,ObjectSpaceNormalMap:GE,OctahedronBufferGeometry:$o,OctahedronGeometry:$o,OneFactor:eE,OneMinusDstAlphaFactor:rE,OneMinusDstColorFactor:iE,OneMinusSrcAlphaFactor:Fv,OneMinusSrcColorFactor:nE,OrthographicCamera:Zr,PCFShadowMap:Bv,PCFSoftShadowMap:Lv,PMREMGenerator:yy,ParametricGeometry:CF,Particle:eF,ParticleBasicMaterial:rF,ParticleSystem:tF,ParticleSystemMaterial:iF,Path:El,PerspectiveCamera:kt,Plane:ci,PlaneBufferGeometry:Zs,PlaneGeometry:Zs,PlaneHelper:VD,PointCloud:$D,PointCloudMaterial:nF,PointLight:Gp,PointLightHelper:ND,Points:Zl,PointsMaterial:uo,PolarGridHelper:GD,PolyhedronBufferGeometry:Ai,PolyhedronGeometry:Ai,PositionalAudio:wD,PropertyBinding:Mt,PropertyMixer:DT,QuadraticBezierCurve:Ip,QuadraticBezierCurve3:Dp,Quaternion:an,QuaternionKeyframeTrack:to,QuaternionLinearInterpolant:wT,REVISION:vp,RGBADepthPacking:kE,RGBAFormat:dr,RGBAIntegerFormat:BE,RGBA_ASTC_10x10_Format:fy,RGBA_ASTC_10x5_Format:ly,RGBA_ASTC_10x6_Format:uy,RGBA_ASTC_10x8_Format:cy,RGBA_ASTC_12x10_Format:dy,RGBA_ASTC_12x12_Format:hy,RGBA_ASTC_4x4_Format:ey,RGBA_ASTC_5x4_Format:ty,RGBA_ASTC_5x5_Format:ny,RGBA_ASTC_6x5_Format:ry,RGBA_ASTC_6x6_Format:iy,RGBA_ASTC_8x5_Format:sy,RGBA_ASTC_8x6_Format:oy,RGBA_ASTC_8x8_Format:ay,RGBA_BPTC_Format:py,RGBA_ETC2_EAC_Format:$0,RGBA_PVRTC_2BPPV1_Format:q0,RGBA_PVRTC_4BPPV1_Format:Y0,RGBA_S3TC_DXT1_Format:Ah,RGBA_S3TC_DXT3_Format:wh,RGBA_S3TC_DXT5_Format:Sh,RGBFormat:EE,RGB_ETC1_Format:LE,RGB_ETC2_Format:Z0,RGB_PVRTC_2BPPV1_Format:Q0,RGB_PVRTC_4BPPV1_Format:X0,RGB_S3TC_DXT1_Format:Mh,RGFormat:bE,RGIntegerFormat:RE,RawShaderMaterial:nx,Ray:oo,Raycaster:GT,RectAreaLight:yx,RedFormat:Uv,RedIntegerFormat:CE,ReinhardToneMapping:gE,RepeatWrapping:xi,ReplaceStencilOp:_B,ReverseSubtractEquation:$S,RingBufferGeometry:Ll,RingGeometry:Ll,SRGBColorSpace:ui,Scene:ql,SceneUtils:EF,ShaderChunk:ht,ShaderLib:Qr,ShaderMaterial:Bn,ShadowMaterial:tx,Shape:yi,ShapeBufferGeometry:ea,ShapeGeometry:ea,ShapePath:JD,ShapeUtils:vi,ShortType:_E,Skeleton:af,SkeletonHelper:HT,SkinnedMesh:sf,SmoothShading:hB,Source:Go,Sphere:$i,SphereBufferGeometry:ta,SphereGeometry:ta,Spherical:wy,SphericalHarmonics3:vx,SplineCurve:Fp,SpotLight:kp,SpotLightHelper:FD,Sprite:Bp,SpriteMaterial:Rp,SrcAlphaFactor:Dv,SrcAlphaSaturateFactor:sE,SrcColorFactor:tE,StaticCopyUsage:OB,StaticDrawUsage:Al,StaticReadUsage:DB,StereoCamera:xD,StreamCopyUsage:GB,StreamDrawUsage:IB,StreamReadUsage:NB,StringKeyframeTrack:ca,SubtractEquation:ZS,SubtractiveBlending:W0,TOUCH:bo,TangentSpaceNormalMap:io,TetrahedronBufferGeometry:Pl,TetrahedronGeometry:Pl,TextGeometry:bF,Texture:Yt,TextureLoader:hx,TorusBufferGeometry:Il,TorusGeometry:Il,TorusKnotBufferGeometry:Dl,TorusKnotGeometry:Dl,Triangle:sn,TriangleFanDrawMode:zv,TriangleStripDrawMode:NE,TrianglesDrawMode:FE,TubeBufferGeometry:Fl,TubeGeometry:Fl,UVMapping:xp,Uint16Attribute:fF,Uint16BufferAttribute:Ap,Uint32Attribute:hF,Uint32BufferAttribute:wp,Uint8Attribute:lF,Uint8BufferAttribute:XE,Uint8ClampedAttribute:uF,Uint8ClampedBufferAttribute:QE,Uniform:Hp,UniformsLib:Re,UniformsUtils:Uo,UnsignedByteType:Ys,UnsignedInt248Type:ks,UnsignedIntType:mc,UnsignedShort4444Type:AE,UnsignedShort5551Type:wE,UnsignedShortType:_l,VSMShadowMap:$a,Vector2:de,Vector3:I,Vector4:Rt,VectorKeyframeTrack:Ol,Vertex:sF,VertexColors:YD,VideoTexture:hT,WebGL1Renderer:cT,WebGL3DRenderTarget:JE,WebGLArrayRenderTarget:WE,WebGLCubeRenderTarget:ef,WebGLMultipleRenderTargets:jE,WebGLMultisampleRenderTarget:PF,WebGLRenderTarget:_n,WebGLRenderTargetCube:AF,WebGLRenderer:Bt,WebGLUtils:uT,WireframeGeometry:ex,WireframeHelper:xF,WrapAroundEnding:Nc,XHRLoader:_F,ZeroCurvatureEnding:Oo,ZeroFactor:qh,ZeroSlopeEnding:ko,ZeroStencilOp:xB,_SRGBAFormat:$h,sRGBEncoding:bt},Symbol.toStringTag,{value:"Module"}));function NF(n){let e;const t=new Set,r=(f,h)=>{const p=typeof f=="function"?f(e):f;if(p!==e){const d=e;e=h?p:Object.assign({},e,p),t.forEach(m=>m(e,d))}},i=()=>e,s=(f,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(e);function m(){const v=h(e);if(!p(d,v)){const x=d;f(d=v,x)}}return t.add(m),()=>t.delete(m)},u={setState:r,getState:i,subscribe:(f,h,p)=>h||p?s(f,h,p):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(r,i,u),u}const OF=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Ww=OF?Be.exports.useEffect:Be.exports.useLayoutEffect;function kF(n){const e=typeof n=="function"?NF(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=Be.exports.useReducer(y=>y+1,0),o=e.getState(),a=Be.exports.useRef(o),u=Be.exports.useRef(r),f=Be.exports.useRef(i),h=Be.exports.useRef(!1),p=Be.exports.useRef();p.current===void 0&&(p.current=r(o));let d,m=!1;(a.current!==o||u.current!==r||f.current!==i||h.current)&&(d=r(o),m=!i(p.current,d)),Ww(()=>{m&&(p.current=d),a.current=o,u.current=r,f.current=i,h.current=!1});const v=Be.exports.useRef(o);Ww(()=>{const y=()=>{try{const M=e.getState(),A=u.current(M);f.current(p.current,A)||(a.current=M,p.current=A,s())}catch{h.current=!0,s()}},_=e.subscribe(y);return e.getState()!==v.current&&y(),_},[]);const x=m?d:p.current;return Be.exports.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var XT={exports:{}},QT={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(t){var r={},i=Iy,s=Be.exports,o=rl.exports;function a(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=60103,h=60106,p=60107,d=60108,m=60114,v=60109,x=60110,y=60112,_=60113,M=60120,A=60115,S=60116,T=60121,C=60129,B=60130,L=60131;if(typeof Symbol=="function"&&Symbol.for){var F=Symbol.for;f=F("react.element"),h=F("react.portal"),p=F("react.fragment"),d=F("react.strict_mode"),m=F("react.profiler"),v=F("react.provider"),x=F("react.context"),y=F("react.forward_ref"),_=F("react.suspense"),M=F("react.suspense_list"),A=F("react.memo"),S=F("react.lazy"),T=F("react.block"),F("react.scope"),C=F("react.debug_trace_mode"),B=F("react.offscreen"),L=F("react.legacy_hidden")}var G=typeof Symbol=="function"&&Symbol.iterator;function b(l){return l===null||typeof l!="object"?null:(l=G&&l[G]||l["@@iterator"],typeof l=="function"?l:null)}function P(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case p:return"Fragment";case h:return"Portal";case m:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case M:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case x:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case y:var c=l.render;return c=c.displayName||c.name||"",l.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case A:return P(l.type);case T:return P(l._render);case S:c=l._payload,l=l._init;try{return P(l(c))}catch{}}return null}function W(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&1026)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function z(l){if(W(l)!==l)throw Error(a(188))}function K(l){var c=l.alternate;if(!c){if(c=W(l),c===null)throw Error(a(188));return c!==l?null:l}for(var g=l,w=c;;){var E=g.return;if(E===null)break;var R=E.alternate;if(R===null){if(w=E.return,w!==null){g=w;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===g)return z(E),l;if(R===w)return z(E),c;R=R.sibling}throw Error(a(188))}if(g.return!==w.return)g=E,w=R;else{for(var k=!1,j=E.child;j;){if(j===g){k=!0,g=E,w=R;break}if(j===w){k=!0,w=E,g=R;break}j=j.sibling}if(!k){for(j=R.child;j;){if(j===g){k=!0,g=R,w=E;break}if(j===w){k=!0,w=R,g=E;break}j=j.sibling}if(!k)throw Error(a(189))}}if(g.alternate!==w)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:c}function X(l){if(l=K(l),!l)return null;for(var c=l;;){if(c.tag===5||c.tag===6)return c;if(c.child)c.child.return=c,c=c.child;else{if(c===l)break;for(;!c.sibling;){if(!c.return||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}}return null}function q(l){if(l=K(l),!l)return null;for(var c=l;;){if(c.tag===5||c.tag===6)return c;if(c.child&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break;for(;!c.sibling;){if(!c.return||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}}return null}function V(l,c){for(var g=l.alternate;c!==null;){if(c===l||c===g)return!0;c=c.return}return!1}var re=t.getPublicInstance,le=t.getRootHostContext,J=t.getChildHostContext,Y=t.prepareForCommit,he=t.resetAfterCommit,Se=t.createInstance,we=t.appendInitialChild,te=t.finalizeInitialChildren,Ke=t.prepareUpdate,Ne=t.shouldSetTextContent,Fe=t.createTextInstance,ve=t.scheduleTimeout,qe=t.cancelTimeout,ue=t.noTimeout,ce=t.isPrimaryRenderer,ge=t.supportsMutation,Le=t.supportsPersistence,_e=t.supportsHydration,et=t.getInstanceFromNode,Je=t.makeOpaqueHydratingObject,He=t.makeClientId,At=t.beforeActiveInstanceBlur,yt=t.afterActiveInstanceBlur,U=t.preparePortalMount,D=t.supportsTestSelectors,ne=t.findFiberRoot,ye=t.getBoundingRect,Ee=t.getTextContent,Te=t.isHiddenSubtree,je=t.matchAccessibilityRole,ie=t.setFocusIfFocusable,Ze=t.setupIntersectionObserver,tt=t.appendChild,H=t.appendChildToContainer,N=t.commitTextUpdate,fe=t.commitMount,pe=t.commitUpdate,De=t.insertBefore,be=t.insertInContainerBefore,We=t.removeChild,xe=t.removeChildFromContainer,Ve=t.resetTextContent,ot=t.hideInstance,ut=t.hideTextInstance,yr=t.unhideInstance,vr=t.unhideTextInstance,nu=t.clearContainer,fa=t.cloneInstance,df=t.createContainerChildSet,da=t.appendChildToContainerChildSet,hf=t.finalizeContainerChildren,pf=t.replaceContainerChildren,mf=t.cloneHiddenInstance,gf=t.cloneHiddenTextInstance,O=t.canHydrateInstance,$=t.canHydrateTextInstance,se=t.isSuspenseInstancePending,ee=t.isSuspenseInstanceFallback,me=t.getNextHydratableSibling,nt=t.getFirstHydratableChild,at=t.hydrateInstance,ft=t.hydrateTextInstance,ct=t.getNextHydratableInstanceAfterSuspenseInstance,St=t.commitHydratedContainer,vt=t.commitHydratedSuspenseInstance,gt;function Lt(l){if(gt===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);gt=c&&c[1]||""}return`
`+gt+l}var Fr=!1;function Nr(l,c){if(!l||Fr)return"";Fr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(oe){var w=oe}Reflect.construct(l,[],c)}else{try{c.call()}catch(oe){w=oe}l.call(c.prototype)}else{try{throw Error()}catch(oe){w=oe}l()}}catch(oe){if(oe&&w&&typeof oe.stack=="string"){for(var E=oe.stack.split(`
`),R=w.stack.split(`
`),k=E.length-1,j=R.length-1;1<=k&&0<=j&&E[k]!==R[j];)j--;for(;1<=k&&0<=j;k--,j--)if(E[k]!==R[j]){if(k!==1||j!==1)do if(k--,j--,0>j||E[k]!==R[j])return`
`+E[k].replace(" at new "," at ");while(1<=k&&0<=j);break}}}finally{Fr=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?Lt(l):""}var ri=[],An=-1;function dt(l){return{current:l}}function Et(l){0>An||(l.current=ri[An],ri[An]=null,An--)}function lt(l,c){An++,ri[An]=l.current,l.current=c}var dn={},Gt=dt(dn),ln=dt(!1),Or=dn;function jt(l,c){var g=l.type.contextTypes;if(!g)return dn;var w=l.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var E={},R;for(R in g)E[R]=c[R];return w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=E),E}function un(l){return l=l.childContextTypes,l!=null}function ts(){Et(ln),Et(Gt)}function Qn(l,c,g){if(Gt.current!==dn)throw Error(a(168));lt(Gt,c),lt(ln,g)}function Lx(l,c,g){var w=l.stateNode;if(l=c.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var E in w)if(!(E in l))throw Error(a(108,P(c)||"Unknown",E));return i({},g,w)}function yf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||dn,Or=Gt.current,lt(Gt,l),lt(ln,ln.current),!0}function Px(l,c,g){var w=l.stateNode;if(!w)throw Error(a(169));g?(l=Lx(l,c,Or),w.__reactInternalMemoizedMergedChildContext=l,Et(ln),Et(Gt),lt(Gt,l)):Et(ln),lt(ln,g)}var Vp=null,co=null,mC=o.unstable_now;mC();var vf=0,Ft=8;function fo(l){if((1&l)!==0)return Ft=15,1;if((2&l)!==0)return Ft=14,2;if((4&l)!==0)return Ft=13,4;var c=24&l;return c!==0?(Ft=12,c):(l&32)!==0?(Ft=11,32):(c=192&l,c!==0?(Ft=10,c):(l&256)!==0?(Ft=9,256):(c=3584&l,c!==0?(Ft=8,c):(l&4096)!==0?(Ft=7,4096):(c=4186112&l,c!==0?(Ft=6,c):(c=62914560&l,c!==0?(Ft=5,c):l&67108864?(Ft=4,67108864):(l&134217728)!==0?(Ft=3,134217728):(c=805306368&l,c!==0?(Ft=2,c):(1073741824&l)!==0?(Ft=1,1073741824):(Ft=8,l))))))}function gC(l){switch(l){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function yC(l){switch(l){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,l))}}function ru(l,c){var g=l.pendingLanes;if(g===0)return Ft=0;var w=0,E=0,R=l.expiredLanes,k=l.suspendedLanes,j=l.pingedLanes;if(R!==0)w=R,E=Ft=15;else if(R=g&134217727,R!==0){var oe=R&~k;oe!==0?(w=fo(oe),E=Ft):(j&=R,j!==0&&(w=fo(j),E=Ft))}else R=g&~k,R!==0?(w=fo(R),E=Ft):j!==0&&(w=fo(j),E=Ft);if(w===0)return 0;if(w=31-ns(w),w=g&((0>w?0:1<<w)<<1)-1,c!==0&&c!==w&&(c&k)===0){if(fo(c),E<=Ft)return c;Ft=E}if(c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=w;0<c;)g=31-ns(c),E=1<<g,w|=l[g],c&=~E;return w}function Ix(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function xf(l,c){switch(l){case 15:return 1;case 14:return 2;case 12:return l=ha(24&~c),l===0?xf(10,c):l;case 10:return l=ha(192&~c),l===0?xf(8,c):l;case 8:return l=ha(3584&~c),l===0&&(l=ha(4186112&~c),l===0&&(l=512)),l;case 2:return c=ha(805306368&~c),c===0&&(c=268435456),c}throw Error(a(358,l))}function ha(l){return l&-l}function Wp(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function _f(l,c,g){l.pendingLanes|=c;var w=c-1;l.suspendedLanes&=w,l.pingedLanes&=w,l=l.eventTimes,c=31-ns(c),l[c]=g}var ns=Math.clz32?Math.clz32:_C,vC=Math.log,xC=Math.LN2;function _C(l){return l===0?32:31-(vC(l)/xC|0)|0}var MC=o.unstable_runWithPriority,Jp=o.unstable_scheduleCallback,jp=o.unstable_cancelCallback,AC=o.unstable_shouldYield,Dx=o.unstable_requestPaint,Kp=o.unstable_now,wC=o.unstable_getCurrentPriorityLevel,Mf=o.unstable_ImmediatePriority,Fx=o.unstable_UserBlockingPriority,Nx=o.unstable_NormalPriority,Ox=o.unstable_LowPriority,kx=o.unstable_IdlePriority,Xp={},SC=Dx!==void 0?Dx:function(){},Ei=null,Af=null,Qp=!1,Gx=Kp(),wn=1e4>Gx?Kp:function(){return Kp()-Gx};function pa(){switch(wC()){case Mf:return 99;case Fx:return 98;case Nx:return 97;case Ox:return 96;case kx:return 95;default:throw Error(a(332))}}function Ux(l){switch(l){case 99:return Mf;case 98:return Fx;case 97:return Nx;case 96:return Ox;case 95:return kx;default:throw Error(a(332))}}function Ti(l,c){return l=Ux(l),MC(l,c)}function iu(l,c,g){return l=Ux(l),Jp(l,c,g)}function xr(){if(Af!==null){var l=Af;Af=null,jp(l)}Hx()}function Hx(){if(!Qp&&Ei!==null){Qp=!0;var l=0;try{var c=Ei;Ti(99,function(){for(;l<c.length;l++){var g=c[l];do g=g(!0);while(g!==null)}}),Ei=null}catch(g){throw Ei!==null&&(Ei=Ei.slice(l+1)),Jp(Mf,xr),g}finally{Qp=!1}}}var EC=u.ReactCurrentBatchConfig;function TC(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var _r=typeof Object.is=="function"?Object.is:TC,CC=Object.prototype.hasOwnProperty;function wf(l,c){if(_r(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),w=Object.keys(c);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++)if(!CC.call(c,g[w])||!_r(l[g[w]],c[g[w]]))return!1;return!0}function bC(l){switch(l.tag){case 5:return Lt(l.type);case 16:return Lt("Lazy");case 13:return Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 2:case 15:return l=Nr(l.type,!1),l;case 11:return l=Nr(l.type.render,!1),l;case 22:return l=Nr(l.type._render,!1),l;case 1:return l=Nr(l.type,!0),l;default:return""}}function kr(l,c){if(l&&l.defaultProps){c=i({},c),l=l.defaultProps;for(var g in l)c[g]===void 0&&(c[g]=l[g]);return c}return c}var Sf=dt(null),Ef=null,ma=null,Tf=null;function Yp(){Tf=ma=Ef=null}function zx(l,c){l=l.type._context,ce?(lt(Sf,l._currentValue),l._currentValue=c):(lt(Sf,l._currentValue2),l._currentValue2=c)}function qp(l){var c=Sf.current;Et(Sf),l=l.type._context,ce?l._currentValue=c:l._currentValue2=c}function Vx(l,c){for(;l!==null;){var g=l.alternate;if((l.childLanes&c)===c){if(g===null||(g.childLanes&c)===c)break;g.childLanes|=c}else l.childLanes|=c,g!==null&&(g.childLanes|=c);l=l.return}}function ga(l,c){Ef=l,Tf=ma=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(Gr=!0),l.firstContext=null)}function Mr(l,c){if(Tf!==l&&c!==!1&&c!==0)if((typeof c!="number"||c===1073741823)&&(Tf=l,c=1073741823),c={context:l,observedBits:c,next:null},ma===null){if(Ef===null)throw Error(a(308));ma=c,Ef.dependencies={lanes:0,firstContext:c,responders:null}}else ma=ma.next=c;return ce?l._currentValue:l._currentValue2}var rs=!1;function Zp(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Wx(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function is(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function ss(l,c){if(l=l.updateQueue,l!==null){l=l.shared;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}}function Jx(l,c){var g=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var E=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var k={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};R===null?E=R=k:R=R.next=k,g=g.next}while(g!==null);R===null?E=R=c:R=R.next=c}else E=R=c;g={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:w.shared,effects:w.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function su(l,c,g,w){var E=l.updateQueue;rs=!1;var R=E.firstBaseUpdate,k=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var oe=j,Ce=oe.next;oe.next=null,k===null?R=Ce:k.next=Ce,k=oe;var Xe=l.alternate;if(Xe!==null){Xe=Xe.updateQueue;var rt=Xe.lastBaseUpdate;rt!==k&&(rt===null?Xe.firstBaseUpdate=Ce:rt.next=Ce,Xe.lastBaseUpdate=oe)}}if(R!==null){rt=E.baseState,k=0,Xe=Ce=oe=null;do{j=R.lane;var Ie=R.eventTime;if((w&j)===j){Xe!==null&&(Xe=Xe.next={eventTime:Ie,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Pt=l,Vt=R;switch(j=c,Ie=g,Vt.tag){case 1:if(Pt=Vt.payload,typeof Pt=="function"){rt=Pt.call(Ie,rt,j);break e}rt=Pt;break e;case 3:Pt.flags=Pt.flags&-4097|64;case 0:if(Pt=Vt.payload,j=typeof Pt=="function"?Pt.call(Ie,rt,j):Pt,j==null)break e;rt=i({},rt,j);break e;case 2:rs=!0}}R.callback!==null&&(l.flags|=32,j=E.effects,j===null?E.effects=[R]:j.push(R))}else Ie={eventTime:Ie,lane:j,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Xe===null?(Ce=Xe=Ie,oe=rt):Xe=Xe.next=Ie,k|=j;if(R=R.next,R===null){if(j=E.shared.pending,j===null)break;R=j.next,j.next=null,E.lastBaseUpdate=j,E.shared.pending=null}}while(1);Xe===null&&(oe=rt),E.baseState=oe,E.firstBaseUpdate=Ce,E.lastBaseUpdate=Xe,xu|=k,l.lanes=k,l.memoizedState=rt}}function jx(l,c,g){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var w=l[c],E=w.callback;if(E!==null){if(w.callback=null,w=g,typeof E!="function")throw Error(a(191,E));E.call(w)}}}var Kx=new s.Component().refs;function Cf(l,c,g,w){c=l.memoizedState,g=g(w,c),g=g==null?c:i({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var bf={isMounted:function(l){return(l=l._reactInternals)?W(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var w=Zn(),E=ls(l),R=is(w,E);R.payload=c,g!=null&&(R.callback=g),ss(l,R),Li(l,E,w)},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var w=Zn(),E=ls(l),R=is(w,E);R.tag=1,R.payload=c,g!=null&&(R.callback=g),ss(l,R),Li(l,E,w)},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Zn(),w=ls(l),E=is(g,w);E.tag=2,c!=null&&(E.callback=c),ss(l,E),Li(l,w,g)}};function Xx(l,c,g,w,E,R,k){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,R,k):c.prototype&&c.prototype.isPureReactComponent?!wf(g,w)||!wf(E,R):!0}function Qx(l,c,g){var w=!1,E=dn,R=c.contextType;return typeof R=="object"&&R!==null?R=Mr(R):(E=un(c)?Or:Gt.current,w=c.contextTypes,R=(w=w!=null)?jt(l,E):dn),c=new c(g,R),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=bf,l.stateNode=c,c._reactInternals=l,w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=R),c}function Yx(l,c,g,w){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,w),c.state!==l&&bf.enqueueReplaceState(c,c.state,null)}function $p(l,c,g,w){var E=l.stateNode;E.props=g,E.state=l.memoizedState,E.refs=Kx,Zp(l);var R=c.contextType;typeof R=="object"&&R!==null?E.context=Mr(R):(R=un(c)?Or:Gt.current,E.context=jt(l,R)),su(l,g,E,w),E.state=l.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(Cf(l,c,R,g),E.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&bf.enqueueReplaceState(E,E.state,null),su(l,g,E,w),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4)}var Rf=Array.isArray;function ou(l,c,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(a(309));var w=g.stateNode}if(!w)throw Error(a(147,l));var E=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(R){var k=w.refs;k===Kx&&(k=w.refs={}),R===null?delete k[E]:k[E]=R},c._stringRef=E,c)}if(typeof l!="string")throw Error(a(284));if(!g._owner)throw Error(a(290,l))}return l}function Bf(l,c){if(l.type!=="textarea")throw Error(a(31,Object.prototype.toString.call(c)==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":c))}function qx(l){function c(Z,Q){if(l){var ae=Z.lastEffect;ae!==null?(ae.nextEffect=Q,Z.lastEffect=Q):Z.firstEffect=Z.lastEffect=Q,Q.nextEffect=null,Q.flags=8}}function g(Z,Q){if(!l)return null;for(;Q!==null;)c(Z,Q),Q=Q.sibling;return null}function w(Z,Q){for(Z=new Map;Q!==null;)Q.key!==null?Z.set(Q.key,Q):Z.set(Q.index,Q),Q=Q.sibling;return Z}function E(Z,Q){return Z=cs(Z,Q),Z.index=0,Z.sibling=null,Z}function R(Z,Q,ae){return Z.index=ae,l?(ae=Z.alternate,ae!==null?(ae=ae.index,ae<Q?(Z.flags=2,Q):ae):(Z.flags=2,Q)):Q}function k(Z){return l&&Z.alternate===null&&(Z.flags=2),Z}function j(Z,Q,ae,Pe){return Q===null||Q.tag!==6?(Q=Hm(ae,Z.mode,Pe),Q.return=Z,Q):(Q=E(Q,ae),Q.return=Z,Q)}function oe(Z,Q,ae,Pe){return Q!==null&&Q.elementType===ae.type?(Pe=E(Q,ae.props),Pe.ref=ou(Z,Q,ae),Pe.return=Z,Pe):(Pe=id(ae.type,ae.key,ae.props,null,Z.mode,Pe),Pe.ref=ou(Z,Q,ae),Pe.return=Z,Pe)}function Ce(Z,Q,ae,Pe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=zm(ae,Z.mode,Pe),Q.return=Z,Q):(Q=E(Q,ae.children||[]),Q.return=Z,Q)}function Xe(Z,Q,ae,Pe,Qe){return Q===null||Q.tag!==7?(Q=Sa(ae,Z.mode,Pe,Qe),Q.return=Z,Q):(Q=E(Q,ae),Q.return=Z,Q)}function rt(Z,Q,ae){if(typeof Q=="string"||typeof Q=="number")return Q=Hm(""+Q,Z.mode,ae),Q.return=Z,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case f:return ae=id(Q.type,Q.key,Q.props,null,Z.mode,ae),ae.ref=ou(Z,null,Q),ae.return=Z,ae;case h:return Q=zm(Q,Z.mode,ae),Q.return=Z,Q}if(Rf(Q)||b(Q))return Q=Sa(Q,Z.mode,ae,null),Q.return=Z,Q;Bf(Z,Q)}return null}function Ie(Z,Q,ae,Pe){var Qe=Q!==null?Q.key:null;if(typeof ae=="string"||typeof ae=="number")return Qe!==null?null:j(Z,Q,""+ae,Pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case f:return ae.key===Qe?ae.type===p?Xe(Z,Q,ae.props.children,Pe,Qe):oe(Z,Q,ae,Pe):null;case h:return ae.key===Qe?Ce(Z,Q,ae,Pe):null}if(Rf(ae)||b(ae))return Qe!==null?null:Xe(Z,Q,ae,Pe,null);Bf(Z,ae)}return null}function Pt(Z,Q,ae,Pe,Qe){if(typeof Pe=="string"||typeof Pe=="number")return Z=Z.get(ae)||null,j(Q,Z,""+Pe,Qe);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case f:return Z=Z.get(Pe.key===null?ae:Pe.key)||null,Pe.type===p?Xe(Q,Z,Pe.props.children,Qe,Pe.key):oe(Q,Z,Pe,Qe);case h:return Z=Z.get(Pe.key===null?ae:Pe.key)||null,Ce(Q,Z,Pe,Qe)}if(Rf(Pe)||b(Pe))return Z=Z.get(ae)||null,Xe(Q,Z,Pe,Qe,null);Bf(Q,Pe)}return null}function Vt(Z,Q,ae,Pe){for(var Qe=null,Nt=null,st=Q,Tt=Q=0,cn=null;st!==null&&Tt<ae.length;Tt++){st.index>Tt?(cn=st,st=null):cn=st.sibling;var _t=Ie(Z,st,ae[Tt],Pe);if(_t===null){st===null&&(st=cn);break}l&&st&&_t.alternate===null&&c(Z,st),Q=R(_t,Q,Tt),Nt===null?Qe=_t:Nt.sibling=_t,Nt=_t,st=cn}if(Tt===ae.length)return g(Z,st),Qe;if(st===null){for(;Tt<ae.length;Tt++)st=rt(Z,ae[Tt],Pe),st!==null&&(Q=R(st,Q,Tt),Nt===null?Qe=st:Nt.sibling=st,Nt=st);return Qe}for(st=w(Z,st);Tt<ae.length;Tt++)cn=Pt(st,Z,Tt,ae[Tt],Pe),cn!==null&&(l&&cn.alternate!==null&&st.delete(cn.key===null?Tt:cn.key),Q=R(cn,Q,Tt),Nt===null?Qe=cn:Nt.sibling=cn,Nt=cn);return l&&st.forEach(function(fs){return c(Z,fs)}),Qe}function Er(Z,Q,ae,Pe){var Qe=b(ae);if(typeof Qe!="function")throw Error(a(150));if(ae=Qe.call(ae),ae==null)throw Error(a(151));for(var Nt=Qe=null,st=Q,Tt=Q=0,cn=null,_t=ae.next();st!==null&&!_t.done;Tt++,_t=ae.next()){st.index>Tt?(cn=st,st=null):cn=st.sibling;var fs=Ie(Z,st,_t.value,Pe);if(fs===null){st===null&&(st=cn);break}l&&st&&fs.alternate===null&&c(Z,st),Q=R(fs,Q,Tt),Nt===null?Qe=fs:Nt.sibling=fs,Nt=fs,st=cn}if(_t.done)return g(Z,st),Qe;if(st===null){for(;!_t.done;Tt++,_t=ae.next())_t=rt(Z,_t.value,Pe),_t!==null&&(Q=R(_t,Q,Tt),Nt===null?Qe=_t:Nt.sibling=_t,Nt=_t);return Qe}for(st=w(Z,st);!_t.done;Tt++,_t=ae.next())_t=Pt(st,Z,Tt,_t.value,Pe),_t!==null&&(l&&_t.alternate!==null&&st.delete(_t.key===null?Tt:_t.key),Q=R(_t,Q,Tt),Nt===null?Qe=_t:Nt.sibling=_t,Nt=_t);return l&&st.forEach(function(rb){return c(Z,rb)}),Qe}return function(Z,Q,ae,Pe){var Qe=typeof ae=="object"&&ae!==null&&ae.type===p&&ae.key===null;Qe&&(ae=ae.props.children);var Nt=typeof ae=="object"&&ae!==null;if(Nt)switch(ae.$$typeof){case f:e:{for(Nt=ae.key,Qe=Q;Qe!==null;){if(Qe.key===Nt){switch(Qe.tag){case 7:if(ae.type===p){g(Z,Qe.sibling),Q=E(Qe,ae.props.children),Q.return=Z,Z=Q;break e}break;default:if(Qe.elementType===ae.type){g(Z,Qe.sibling),Q=E(Qe,ae.props),Q.ref=ou(Z,Qe,ae),Q.return=Z,Z=Q;break e}}g(Z,Qe);break}else c(Z,Qe);Qe=Qe.sibling}ae.type===p?(Q=Sa(ae.props.children,Z.mode,Pe,ae.key),Q.return=Z,Z=Q):(Pe=id(ae.type,ae.key,ae.props,null,Z.mode,Pe),Pe.ref=ou(Z,Q,ae),Pe.return=Z,Z=Pe)}return k(Z);case h:e:{for(Qe=ae.key;Q!==null;){if(Q.key===Qe)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){g(Z,Q.sibling),Q=E(Q,ae.children||[]),Q.return=Z,Z=Q;break e}else{g(Z,Q);break}else c(Z,Q);Q=Q.sibling}Q=zm(ae,Z.mode,Pe),Q.return=Z,Z=Q}return k(Z)}if(typeof ae=="string"||typeof ae=="number")return ae=""+ae,Q!==null&&Q.tag===6?(g(Z,Q.sibling),Q=E(Q,ae),Q.return=Z,Z=Q):(g(Z,Q),Q=Hm(ae,Z.mode,Pe),Q.return=Z,Z=Q),k(Z);if(Rf(ae))return Vt(Z,Q,ae,Pe);if(b(ae))return Er(Z,Q,ae,Pe);if(Nt&&Bf(Z,ae),typeof ae=="undefined"&&!Qe)switch(Z.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,P(Z.type)||"Component"))}return g(Z,Q)}}var Lf=qx(!0),Zx=qx(!1),au={},Ar=dt(au),lu=dt(au),ya=dt(au);function ii(l){if(l===au)throw Error(a(174));return l}function em(l,c){lt(ya,c),lt(lu,l),lt(Ar,au),l=le(c),Et(Ar),lt(Ar,l)}function va(){Et(Ar),Et(lu),Et(ya)}function $x(l){var c=ii(ya.current),g=ii(Ar.current);c=J(g,l.type,c),g!==c&&(lt(lu,l),lt(Ar,c))}function tm(l){lu.current===l&&(Et(Ar),Et(lu))}var qt=dt(0);function Pf(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||se(g)||ee(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&64)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ci=null,ho=null,si=!1;function e_(l,c){var g=Sr(5,null,null,0);g.elementType="DELETED",g.type="DELETED",g.stateNode=c,g.return=l,g.flags=8,l.lastEffect!==null?(l.lastEffect.nextEffect=g,l.lastEffect=g):l.firstEffect=l.lastEffect=g}function t_(l,c){switch(l.tag){case 5:return c=O(c,l.type,l.pendingProps),c!==null?(l.stateNode=c,!0):!1;case 6:return c=$(c,l.pendingProps),c!==null?(l.stateNode=c,!0):!1;case 13:return!1;default:return!1}}function nm(l){if(si){var c=ho;if(c){var g=c;if(!t_(l,c)){if(c=me(g),!c||!t_(l,c)){l.flags=l.flags&-1025|2,si=!1,Ci=l;return}e_(Ci,g)}Ci=l,ho=nt(c)}else l.flags=l.flags&-1025|2,si=!1,Ci=l}}function n_(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Ci=l}function If(l){if(!_e||l!==Ci)return!1;if(!si)return n_(l),si=!0,!1;var c=l.type;if(l.tag!==5||c!=="head"&&c!=="body"&&!Ne(c,l.memoizedProps))for(c=ho;c;)e_(l,c),c=me(c);if(n_(l),l.tag===13){if(!_e)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));ho=ct(l)}else ho=Ci?me(l.stateNode):null;return!0}function rm(){_e&&(ho=Ci=null,si=!1)}var xa=[];function im(){for(var l=0;l<xa.length;l++){var c=xa[l];ce?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}xa.length=0}var uu=u.ReactCurrentDispatcher,wr=u.ReactCurrentBatchConfig,cu=0,tn=null,In=null,Sn=null,Df=!1,fu=!1;function Yn(){throw Error(a(321))}function sm(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!_r(l[g],c[g]))return!1;return!0}function om(l,c,g,w,E,R){if(cu=R,tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,uu.current=l===null||l.memoizedState===null?BC:LC,l=g(w,E),fu){R=0;do{if(fu=!1,!(25>R))throw Error(a(301));R+=1,Sn=In=null,c.updateQueue=null,uu.current=PC,l=g(w,E)}while(fu)}if(uu.current=kf,c=In!==null&&In.next!==null,cu=0,Sn=In=tn=null,Df=!1,c)throw Error(a(300));return l}function po(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?tn.memoizedState=Sn=l:Sn=Sn.next=l,Sn}function mo(){if(In===null){var l=tn.alternate;l=l!==null?l.memoizedState:null}else l=In.next;var c=Sn===null?tn.memoizedState:Sn.next;if(c!==null)Sn=c,In=l;else{if(l===null)throw Error(a(310));In=l,l={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Sn===null?tn.memoizedState=Sn=l:Sn=Sn.next=l}return Sn}function oi(l,c){return typeof c=="function"?c(l):c}function du(l){var c=mo(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var w=In,E=w.baseQueue,R=g.pending;if(R!==null){if(E!==null){var k=E.next;E.next=R.next,R.next=k}w.baseQueue=E=R,g.pending=null}if(E!==null){E=E.next,w=w.baseState;var j=k=R=null,oe=E;do{var Ce=oe.lane;if((cu&Ce)===Ce)j!==null&&(j=j.next={lane:0,action:oe.action,eagerReducer:oe.eagerReducer,eagerState:oe.eagerState,next:null}),w=oe.eagerReducer===l?oe.eagerState:l(w,oe.action);else{var Xe={lane:Ce,action:oe.action,eagerReducer:oe.eagerReducer,eagerState:oe.eagerState,next:null};j===null?(k=j=Xe,R=w):j=j.next=Xe,tn.lanes|=Ce,xu|=Ce}oe=oe.next}while(oe!==null&&oe!==E);j===null?R=w:j.next=k,_r(w,c.memoizedState)||(Gr=!0),c.memoizedState=w,c.baseState=R,c.baseQueue=j,g.lastRenderedState=w}return[c.memoizedState,g.dispatch]}function hu(l){var c=mo(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var w=g.dispatch,E=g.pending,R=c.memoizedState;if(E!==null){g.pending=null;var k=E=E.next;do R=l(R,k.action),k=k.next;while(k!==E);_r(R,c.memoizedState)||(Gr=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),g.lastRenderedState=R}return[R,w]}function r_(l,c,g){var w=c._getVersion;w=w(c._source);var E=ce?c._workInProgressVersionPrimary:c._workInProgressVersionSecondary;if(E!==null?l=E===w:(l=l.mutableReadLanes,(l=(cu&l)===l)&&(ce?c._workInProgressVersionPrimary=w:c._workInProgressVersionSecondary=w,xa.push(c))),l)return g(c._source);throw xa.push(c),Error(a(350))}function i_(l,c,g,w){var E=zn;if(E===null)throw Error(a(349));var R=c._getVersion,k=R(c._source),j=uu.current,oe=j.useState(function(){return r_(E,c,g)}),Ce=oe[1],Xe=oe[0];oe=Sn;var rt=l.memoizedState,Ie=rt.refs,Pt=Ie.getSnapshot,Vt=rt.source;rt=rt.subscribe;var Er=tn;return l.memoizedState={refs:Ie,source:c,subscribe:w},j.useEffect(function(){Ie.getSnapshot=g,Ie.setSnapshot=Ce;var Z=R(c._source);if(!_r(k,Z)){Z=g(c._source),_r(Xe,Z)||(Ce(Z),Z=ls(Er),E.mutableReadLanes|=Z&E.pendingLanes),Z=E.mutableReadLanes,E.entangledLanes|=Z;for(var Q=E.entanglements,ae=Z;0<ae;){var Pe=31-ns(ae),Qe=1<<Pe;Q[Pe]|=Z,ae&=~Qe}}},[g,c,w]),j.useEffect(function(){return w(c._source,function(){var Z=Ie.getSnapshot,Q=Ie.setSnapshot;try{Q(Z(c._source));var ae=ls(Er);E.mutableReadLanes|=ae&E.pendingLanes}catch(Pe){Q(function(){throw Pe})}})},[c,w]),_r(Pt,g)&&_r(Vt,c)&&_r(rt,w)||(l={pending:null,dispatch:null,lastRenderedReducer:oi,lastRenderedState:Xe},l.dispatch=Ce=cm.bind(null,tn,l),oe.queue=l,oe.baseQueue=null,Xe=r_(E,c,g),oe.memoizedState=oe.baseState=Xe),Xe}function s_(l,c,g){var w=mo();return i_(w,l,c,g)}function pu(l){var c=po();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l=c.queue={pending:null,dispatch:null,lastRenderedReducer:oi,lastRenderedState:l},l=l.dispatch=cm.bind(null,tn,l),[c.memoizedState,l]}function Ff(l,c,g,w){return l={tag:l,create:c,destroy:g,deps:w,next:null},c=tn.updateQueue,c===null?(c={lastEffect:null},tn.updateQueue=c,c.lastEffect=l.next=l):(g=c.lastEffect,g===null?c.lastEffect=l.next=l:(w=g.next,g.next=l,l.next=w,c.lastEffect=l)),l}function o_(l){var c=po();return l={current:l},c.memoizedState=l}function Nf(){return mo().memoizedState}function am(l,c,g,w){var E=po();tn.flags|=l,E.memoizedState=Ff(1|c,g,void 0,w===void 0?null:w)}function lm(l,c,g,w){var E=mo();w=w===void 0?null:w;var R=void 0;if(In!==null){var k=In.memoizedState;if(R=k.destroy,w!==null&&sm(w,k.deps)){Ff(c,g,R,w);return}}tn.flags|=l,E.memoizedState=Ff(1|c,g,R,w)}function a_(l,c){return am(516,4,l,c)}function Of(l,c){return lm(516,4,l,c)}function l_(l,c){return lm(4,2,l,c)}function u_(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function c_(l,c,g){return g=g!=null?g.concat([l]):null,lm(4,2,u_.bind(null,c,l),g)}function um(){}function f_(l,c){var g=mo();c=c===void 0?null:c;var w=g.memoizedState;return w!==null&&c!==null&&sm(c,w[1])?w[0]:(g.memoizedState=[l,c],l)}function d_(l,c){var g=mo();c=c===void 0?null:c;var w=g.memoizedState;return w!==null&&c!==null&&sm(c,w[1])?w[0]:(l=l(),g.memoizedState=[l,c],l)}function RC(l,c){var g=pa();Ti(98>g?98:g,function(){l(!0)}),Ti(97<g?97:g,function(){var w=wr.transition;wr.transition=1;try{l(!1),c()}finally{wr.transition=w}})}function cm(l,c,g){var w=Zn(),E=ls(l),R={lane:E,action:g,eagerReducer:null,eagerState:null,next:null},k=c.pending;if(k===null?R.next=R:(R.next=k.next,k.next=R),c.pending=R,k=l.alternate,l===tn||k!==null&&k===tn)fu=Df=!0;else{if(l.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var j=c.lastRenderedState,oe=k(j,g);if(R.eagerReducer=k,R.eagerState=oe,_r(oe,j))return}catch{}finally{}Li(l,E,w)}}var kf={readContext:Mr,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useOpaqueIdentifier:Yn,unstable_isNewReconciler:!1},BC={readContext:Mr,useCallback:function(l,c){return po().memoizedState=[l,c===void 0?null:c],l},useContext:Mr,useEffect:a_,useImperativeHandle:function(l,c,g){return g=g!=null?g.concat([l]):null,am(4,2,u_.bind(null,c,l),g)},useLayoutEffect:function(l,c){return am(4,2,l,c)},useMemo:function(l,c){var g=po();return c=c===void 0?null:c,l=l(),g.memoizedState=[l,c],l},useReducer:function(l,c,g){var w=po();return c=g!==void 0?g(c):c,w.memoizedState=w.baseState=c,l=w.queue={pending:null,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},l=l.dispatch=cm.bind(null,tn,l),[w.memoizedState,l]},useRef:o_,useState:pu,useDebugValue:um,useDeferredValue:function(l){var c=pu(l),g=c[0],w=c[1];return a_(function(){var E=wr.transition;wr.transition=1;try{w(l)}finally{wr.transition=E}},[l]),g},useTransition:function(){var l=pu(!1),c=l[0];return l=RC.bind(null,l[1]),o_(l),[l,c]},useMutableSource:function(l,c,g){var w=po();return w.memoizedState={refs:{getSnapshot:c,setSnapshot:null},source:l,subscribe:g},i_(w,l,c,g)},useOpaqueIdentifier:function(){if(si){var l=!1,c=Je(function(){throw l||(l=!0,g(He())),Error(a(355))}),g=pu(c)[1];return(tn.mode&2)===0&&(tn.flags|=516,Ff(5,function(){g(He())},void 0,null)),c}return c=He(),pu(c),c},unstable_isNewReconciler:!1},LC={readContext:Mr,useCallback:f_,useContext:Mr,useEffect:Of,useImperativeHandle:c_,useLayoutEffect:l_,useMemo:d_,useReducer:du,useRef:Nf,useState:function(){return du(oi)},useDebugValue:um,useDeferredValue:function(l){var c=du(oi),g=c[0],w=c[1];return Of(function(){var E=wr.transition;wr.transition=1;try{w(l)}finally{wr.transition=E}},[l]),g},useTransition:function(){var l=du(oi)[0];return[Nf().current,l]},useMutableSource:s_,useOpaqueIdentifier:function(){return du(oi)[0]},unstable_isNewReconciler:!1},PC={readContext:Mr,useCallback:f_,useContext:Mr,useEffect:Of,useImperativeHandle:c_,useLayoutEffect:l_,useMemo:d_,useReducer:hu,useRef:Nf,useState:function(){return hu(oi)},useDebugValue:um,useDeferredValue:function(l){var c=hu(oi),g=c[0],w=c[1];return Of(function(){var E=wr.transition;wr.transition=1;try{w(l)}finally{wr.transition=E}},[l]),g},useTransition:function(){var l=hu(oi)[0];return[Nf().current,l]},useMutableSource:s_,useOpaqueIdentifier:function(){return hu(oi)[0]},unstable_isNewReconciler:!1},IC=u.ReactCurrentOwner,Gr=!1;function qn(l,c,g,w){c.child=l===null?Zx(c,null,g,w):Lf(c,l.child,g,w)}function h_(l,c,g,w,E){g=g.render;var R=c.ref;return ga(c,E),w=om(l,c,g,w,R,E),l!==null&&!Gr?(c.updateQueue=l.updateQueue,c.flags&=-517,l.lanes&=~E,bi(l,c,E)):(c.flags|=1,qn(l,c,w,E),c.child)}function p_(l,c,g,w,E,R){if(l===null){var k=g.type;return typeof k=="function"&&!Gm(k)&&k.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=k,m_(l,c,k,w,E,R)):(l=id(g.type,null,w,c,c.mode,R),l.ref=c.ref,l.return=c,c.child=l)}return k=l.child,(E&R)===0&&(E=k.memoizedProps,g=g.compare,g=g!==null?g:wf,g(E,w)&&l.ref===c.ref)?bi(l,c,R):(c.flags|=1,l=cs(k,w),l.ref=c.ref,l.return=c,c.child=l)}function m_(l,c,g,w,E,R){if(l!==null&&wf(l.memoizedProps,w)&&l.ref===c.ref)if(Gr=!1,(R&E)!==0)(l.flags&16384)!==0&&(Gr=!0);else return c.lanes=l.lanes,bi(l,c,R);return dm(l,c,g,w,R)}function fm(l,c,g){var w=c.pendingProps,E=w.children,R=l!==null?l.memoizedState:null;if(w.mode==="hidden"||w.mode==="unstable-defer-without-hiding")if((c.mode&4)===0)c.memoizedState={baseLanes:0},td(c,g);else if((g&1073741824)!==0)c.memoizedState={baseLanes:0},td(c,R!==null?R.baseLanes:g);else return l=R!==null?R.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l},td(c,l),null;else R!==null?(w=R.baseLanes|g,c.memoizedState=null):w=g,td(c,w);return qn(l,c,E,g),c.child}function g_(l,c){var g=c.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(c.flags|=128)}function dm(l,c,g,w,E){var R=un(g)?Or:Gt.current;return R=jt(c,R),ga(c,E),g=om(l,c,g,w,R,E),l!==null&&!Gr?(c.updateQueue=l.updateQueue,c.flags&=-517,l.lanes&=~E,bi(l,c,E)):(c.flags|=1,qn(l,c,g,E),c.child)}function y_(l,c,g,w,E){if(un(g)){var R=!0;yf(c)}else R=!1;if(ga(c,E),c.stateNode===null)l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),Qx(c,g,w),$p(c,g,w,E),w=!0;else if(l===null){var k=c.stateNode,j=c.memoizedProps;k.props=j;var oe=k.context,Ce=g.contextType;typeof Ce=="object"&&Ce!==null?Ce=Mr(Ce):(Ce=un(g)?Or:Gt.current,Ce=jt(c,Ce));var Xe=g.getDerivedStateFromProps,rt=typeof Xe=="function"||typeof k.getSnapshotBeforeUpdate=="function";rt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==w||oe!==Ce)&&Yx(c,k,w,Ce),rs=!1;var Ie=c.memoizedState;k.state=Ie,su(c,w,k,E),oe=c.memoizedState,j!==w||Ie!==oe||ln.current||rs?(typeof Xe=="function"&&(Cf(c,g,Xe,w),oe=c.memoizedState),(j=rs||Xx(c,g,j,w,Ie,oe,Ce))?(rt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4)):(typeof k.componentDidMount=="function"&&(c.flags|=4),c.memoizedProps=w,c.memoizedState=oe),k.props=w,k.state=oe,k.context=Ce,w=j):(typeof k.componentDidMount=="function"&&(c.flags|=4),w=!1)}else{k=c.stateNode,Wx(l,c),j=c.memoizedProps,Ce=c.type===c.elementType?j:kr(c.type,j),k.props=Ce,rt=c.pendingProps,Ie=k.context,oe=g.contextType,typeof oe=="object"&&oe!==null?oe=Mr(oe):(oe=un(g)?Or:Gt.current,oe=jt(c,oe));var Pt=g.getDerivedStateFromProps;(Xe=typeof Pt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==rt||Ie!==oe)&&Yx(c,k,w,oe),rs=!1,Ie=c.memoizedState,k.state=Ie,su(c,w,k,E);var Vt=c.memoizedState;j!==rt||Ie!==Vt||ln.current||rs?(typeof Pt=="function"&&(Cf(c,g,Pt,w),Vt=c.memoizedState),(Ce=rs||Xx(c,g,Ce,w,Ie,Vt,oe))?(Xe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(w,Vt,oe),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(w,Vt,oe)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=256)):(typeof k.componentDidUpdate!="function"||j===l.memoizedProps&&Ie===l.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===l.memoizedProps&&Ie===l.memoizedState||(c.flags|=256),c.memoizedProps=w,c.memoizedState=Vt),k.props=w,k.state=Vt,k.context=oe,w=Ce):(typeof k.componentDidUpdate!="function"||j===l.memoizedProps&&Ie===l.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===l.memoizedProps&&Ie===l.memoizedState||(c.flags|=256),w=!1)}return hm(l,c,g,w,R,E)}function hm(l,c,g,w,E,R){g_(l,c);var k=(c.flags&64)!==0;if(!w&&!k)return E&&Px(c,g,!1),bi(l,c,R);w=c.stateNode,IC.current=c;var j=k&&typeof g.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,l!==null&&k?(c.child=Lf(c,l.child,null,R),c.child=Lf(c,null,j,R)):qn(l,c,j,R),c.memoizedState=w.state,E&&Px(c,g,!0),c.child}function v_(l){var c=l.stateNode;c.pendingContext?Qn(l,c.pendingContext,c.pendingContext!==c.context):c.context&&Qn(l,c.context,!1),em(l,c.containerInfo)}var Gf={dehydrated:null,retryLane:0};function x_(l,c,g){var w=c.pendingProps,E=qt.current,R=!1,k;return(k=(c.flags&64)!==0)||(k=l!==null&&l.memoizedState===null?!1:(E&2)!==0),k?(R=!0,c.flags&=-65):l!==null&&l.memoizedState===null||w.fallback===void 0||w.unstable_avoidThisFallback===!0||(E|=1),lt(qt,E&1),l===null?(w.fallback!==void 0&&nm(c),l=w.children,E=w.fallback,R?(l=__(c,l,E,g),c.child.memoizedState={baseLanes:g},c.memoizedState=Gf,l):typeof w.unstable_expectedLoadTime=="number"?(l=__(c,l,E,g),c.child.memoizedState={baseLanes:g},c.memoizedState=Gf,c.lanes=33554432,l):(g=Um({mode:"visible",children:l},c.mode,g,null),g.return=c,c.child=g)):l.memoizedState!==null?R?(w=A_(l,c,w.children,w.fallback,g),R=c.child,E=l.child.memoizedState,R.memoizedState=E===null?{baseLanes:g}:{baseLanes:E.baseLanes|g},R.childLanes=l.childLanes&~g,c.memoizedState=Gf,w):(g=M_(l,c,w.children,g),c.memoizedState=null,g):R?(w=A_(l,c,w.children,w.fallback,g),R=c.child,E=l.child.memoizedState,R.memoizedState=E===null?{baseLanes:g}:{baseLanes:E.baseLanes|g},R.childLanes=l.childLanes&~g,c.memoizedState=Gf,w):(g=M_(l,c,w.children,g),c.memoizedState=null,g)}function __(l,c,g,w){var E=l.mode,R=l.child;return c={mode:"hidden",children:c},(E&2)===0&&R!==null?(R.childLanes=0,R.pendingProps=c):R=Um(c,E,0,null),g=Sa(g,E,w,null),R.return=l,g.return=l,R.sibling=g,l.child=R,g}function M_(l,c,g,w){var E=l.child;return l=E.sibling,g=cs(E,{mode:"visible",children:g}),(c.mode&2)===0&&(g.lanes=w),g.return=c,g.sibling=null,l!==null&&(l.nextEffect=null,l.flags=8,c.firstEffect=c.lastEffect=l),c.child=g}function A_(l,c,g,w,E){var R=c.mode,k=l.child;l=k.sibling;var j={mode:"hidden",children:g};return(R&2)===0&&c.child!==k?(g=c.child,g.childLanes=0,g.pendingProps=j,k=g.lastEffect,k!==null?(c.firstEffect=g.firstEffect,c.lastEffect=k,k.nextEffect=null):c.firstEffect=c.lastEffect=null):g=cs(k,j),l!==null?w=cs(l,w):(w=Sa(w,R,E,null),w.flags|=2),w.return=c,g.return=c,g.sibling=w,c.child=g,w}function w_(l,c){l.lanes|=c;var g=l.alternate;g!==null&&(g.lanes|=c),Vx(l.return,c)}function pm(l,c,g,w,E,R){var k=l.memoizedState;k===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:E,lastEffect:R}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=g,k.tailMode=E,k.lastEffect=R)}function S_(l,c,g){var w=c.pendingProps,E=w.revealOrder,R=w.tail;if(qn(l,c,w.children,g),w=qt.current,(w&2)!==0)w=w&1|2,c.flags|=64;else{if(l!==null&&(l.flags&64)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&w_(l,g);else if(l.tag===19)w_(l,g);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}if(lt(qt,w),(c.mode&2)===0)c.memoizedState=null;else switch(E){case"forwards":for(g=c.child,E=null;g!==null;)l=g.alternate,l!==null&&Pf(l)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),pm(c,!1,E,g,R,c.lastEffect);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(l=E.alternate,l!==null&&Pf(l)===null){c.child=E;break}l=E.sibling,E.sibling=g,g=E,E=l}pm(c,!0,g,null,R,c.lastEffect);break;case"together":pm(c,!1,null,null,void 0,c.lastEffect);break;default:c.memoizedState=null}return c.child}function bi(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),xu|=c.lanes,(g&c.childLanes)!==0){if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,g=cs(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=cs(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}return null}function ai(l){l.flags|=4}var mu,gu,Uf,Hf;if(ge)mu=function(l,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)we(l,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},gu=function(){},Uf=function(l,c,g,w,E){if(l=l.memoizedProps,l!==w){var R=c.stateNode,k=ii(Ar.current);g=Ke(R,g,l,w,E,k),(c.updateQueue=g)&&ai(c)}},Hf=function(l,c,g,w){g!==w&&ai(c)};else if(Le){mu=function(l,c,g,w){for(var E=c.child;E!==null;){if(E.tag===5){var R=E.stateNode;g&&w&&(R=mf(R,E.type,E.memoizedProps,E)),we(l,R)}else if(E.tag===6)R=E.stateNode,g&&w&&(R=gf(R,E.memoizedProps,E)),we(l,R);else if(E.tag!==4){if(E.tag===13&&(E.flags&4)!==0&&(R=E.memoizedState!==null)){var k=E.child;if(k!==null&&(k.child!==null&&(k.child.return=k,mu(l,k,!0,R)),R=k.sibling,R!==null)){R.return=E,E=R;continue}}if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var E_=function(l,c,g,w){for(var E=c.child;E!==null;){if(E.tag===5){var R=E.stateNode;g&&w&&(R=mf(R,E.type,E.memoizedProps,E)),da(l,R)}else if(E.tag===6)R=E.stateNode,g&&w&&(R=gf(R,E.memoizedProps,E)),da(l,R);else if(E.tag!==4){if(E.tag===13&&(E.flags&4)!==0&&(R=E.memoizedState!==null)){var k=E.child;if(k!==null&&(k.child!==null&&(k.child.return=k,E_(l,k,!0,R)),R=k.sibling,R!==null)){R.return=E,E=R;continue}}if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};gu=function(l){var c=l.stateNode;if(l.firstEffect!==null){var g=c.containerInfo,w=df(g);E_(w,l,!1,!1),c.pendingChildren=w,ai(l),hf(g,w)}},Uf=function(l,c,g,w,E){var R=l.stateNode,k=l.memoizedProps;if((l=c.firstEffect===null)&&k===w)c.stateNode=R;else{var j=c.stateNode,oe=ii(Ar.current),Ce=null;k!==w&&(Ce=Ke(j,g,k,w,E,oe)),l&&Ce===null?c.stateNode=R:(R=fa(R,Ce,g,k,w,c,l,j),te(R,g,w,E,oe)&&ai(c),c.stateNode=R,l?ai(c):mu(R,c,!1,!1))}},Hf=function(l,c,g,w){g!==w?(l=ii(ya.current),g=ii(Ar.current),c.stateNode=Fe(w,l,g,c),ai(c)):c.stateNode=l.stateNode}}else gu=function(){},Uf=function(){},Hf=function(){};function yu(l,c){if(!si)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function DC(l,c,g){var w=c.pendingProps;switch(c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return un(c.type)&&ts(),null;case 3:return va(),Et(ln),Et(Gt),im(),w=c.stateNode,w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(l===null||l.child===null)&&(If(c)?ai(c):w.hydrate||(c.flags|=256)),gu(c),null;case 5:tm(c);var E=ii(ya.current);if(g=c.type,l!==null&&c.stateNode!=null)Uf(l,c,g,w,E),l.ref!==c.ref&&(c.flags|=128);else{if(!w){if(c.stateNode===null)throw Error(a(166));return null}if(l=ii(Ar.current),If(c)){if(!_e)throw Error(a(175));l=at(c.stateNode,c.type,c.memoizedProps,E,l,c),c.updateQueue=l,l!==null&&ai(c)}else{var R=Se(g,w,E,l,c);mu(R,c,!1,!1),c.stateNode=R,te(R,g,w,E,l)&&ai(c)}c.ref!==null&&(c.flags|=128)}return null;case 6:if(l&&c.stateNode!=null)Hf(l,c,l.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(a(166));if(l=ii(ya.current),E=ii(Ar.current),If(c)){if(!_e)throw Error(a(176));ft(c.stateNode,c.memoizedProps,c)&&ai(c)}else c.stateNode=Fe(w,l,E,c)}return null;case 13:return Et(qt),w=c.memoizedState,(c.flags&64)!==0?(c.lanes=g,c):(w=w!==null,E=!1,l===null?c.memoizedProps.fallback!==void 0&&If(c):E=l.memoizedState!==null,w&&!E&&(c.mode&2)!==0&&(l===null&&c.memoizedProps.unstable_avoidThisFallback!==!0||(qt.current&1)!==0?En===0&&(En=3):((En===0||En===3)&&(En=4),zn===null||(xu&134217727)===0&&(Ma&134217727)===0||Aa(zn,Dn))),Le&&w&&(c.flags|=4),ge&&(w||E)&&(c.flags|=4),null);case 4:return va(),gu(c),l===null&&U(c.stateNode.containerInfo),null;case 10:return qp(c),null;case 17:return un(c.type)&&ts(),null;case 19:if(Et(qt),w=c.memoizedState,w===null)return null;if(E=(c.flags&64)!==0,R=w.rendering,R===null)if(E)yu(w,!1);else{if(En!==0||l!==null&&(l.flags&64)!==0)for(l=c.child;l!==null;){if(R=Pf(l),R!==null){for(c.flags|=64,yu(w,!1),l=R.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),w.lastEffect===null&&(c.firstEffect=null),c.lastEffect=w.lastEffect,l=g,w=c.child;w!==null;)E=w,g=l,E.flags&=2,E.nextEffect=null,E.firstEffect=null,E.lastEffect=null,R=E.alternate,R===null?(E.childLanes=0,E.lanes=g,E.child=null,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=R.childLanes,E.lanes=R.lanes,E.child=R.child,E.memoizedProps=R.memoizedProps,E.memoizedState=R.memoizedState,E.updateQueue=R.updateQueue,E.type=R.type,g=R.dependencies,E.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),w=w.sibling;return lt(qt,qt.current&1|2),c.child}l=l.sibling}w.tail!==null&&wn()>Bm&&(c.flags|=64,E=!0,yu(w,!1),c.lanes=33554432)}else{if(!E)if(l=Pf(R),l!==null){if(c.flags|=64,E=!0,l=l.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),yu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!si)return c=c.lastEffect=w.lastEffect,c!==null&&(c.nextEffect=null),null}else 2*wn()-w.renderingStartTime>Bm&&g!==1073741824&&(c.flags|=64,E=!0,yu(w,!1),c.lanes=33554432);w.isBackwards?(R.sibling=c.child,c.child=R):(l=w.last,l!==null?l.sibling=R:c.child=R,w.last=R)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.lastEffect=c.lastEffect,w.renderingStartTime=wn(),l.sibling=null,c=qt.current,lt(qt,E?c&1|2:c&1),l):null;case 23:case 24:return Nm(),l!==null&&l.memoizedState!==null!=(c.memoizedState!==null)&&w.mode!=="unstable-defer-without-hiding"&&(c.flags|=4),null}throw Error(a(156,c.tag))}function FC(l){switch(l.tag){case 1:un(l.type)&&ts();var c=l.flags;return c&4096?(l.flags=c&-4097|64,l):null;case 3:if(va(),Et(ln),Et(Gt),im(),c=l.flags,(c&64)!==0)throw Error(a(285));return l.flags=c&-4097|64,l;case 5:return tm(l),null;case 13:return Et(qt),c=l.flags,c&4096?(l.flags=c&-4097|64,l):null;case 19:return Et(qt),null;case 4:return va(),null;case 10:return qp(l),null;case 23:case 24:return Nm(),null;default:return null}}function mm(l,c){try{var g="",w=c;do g+=bC(w),w=w.return;while(w);var E=g}catch(R){E=`
Error generating stack: `+R.message+`
`+R.stack}return{value:l,source:c,stack:E}}function gm(l,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var NC=typeof WeakMap=="function"?WeakMap:Map;function T_(l,c,g){g=is(-1,g),g.tag=3,g.payload={element:null};var w=c.value;return g.callback=function(){qf||(qf=!0,Lm=w),gm(l,c)},g}function C_(l,c,g){g=is(-1,g),g.tag=3;var w=l.type.getDerivedStateFromError;if(typeof w=="function"){var E=c.value;g.payload=function(){return gm(l,c),w(E)}}var R=l.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(g.callback=function(){typeof w!="function"&&(li===null?li=new Set([this]):li.add(this),gm(l,c));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})}),g}var OC=typeof WeakSet=="function"?WeakSet:Set;function b_(l){var c=l.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){us(l,g)}else c.current=null}function kC(l,c){switch(c.tag){case 0:case 11:case 15:case 22:return;case 1:if(c.flags&256&&l!==null){var g=l.memoizedProps,w=l.memoizedState;l=c.stateNode,c=l.getSnapshotBeforeUpdate(c.elementType===c.type?g:kr(c.type,g),w),l.__reactInternalSnapshotBeforeUpdate=c}return;case 3:ge&&c.flags&256&&nu(c.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(a(163))}function R_(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&l)===l){var w=g.destroy;g.destroy=void 0,w!==void 0&&w()}g=g.next}while(g!==c)}}function GC(l,c,g){switch(g.tag){case 0:case 11:case 15:case 22:if(c=g.updateQueue,c=c!==null?c.lastEffect:null,c!==null){l=c=c.next;do{if((l.tag&3)===3){var w=l.create;l.destroy=w()}l=l.next}while(l!==c)}if(c=g.updateQueue,c=c!==null?c.lastEffect:null,c!==null){l=c=c.next;do{var E=l;w=E.next,E=E.tag,(E&4)!==0&&(E&1)!==0&&(j_(g,l),XC(g,l)),l=w}while(l!==c)}return;case 1:l=g.stateNode,g.flags&4&&(c===null?l.componentDidMount():(w=g.elementType===g.type?c.memoizedProps:kr(g.type,c.memoizedProps),l.componentDidUpdate(w,c.memoizedState,l.__reactInternalSnapshotBeforeUpdate))),c=g.updateQueue,c!==null&&jx(g,c,l);return;case 3:if(c=g.updateQueue,c!==null){if(l=null,g.child!==null)switch(g.child.tag){case 5:l=re(g.child.stateNode);break;case 1:l=g.child.stateNode}jx(g,c,l)}return;case 5:l=g.stateNode,c===null&&g.flags&4&&fe(l,g.type,g.memoizedProps,g);return;case 6:return;case 4:return;case 12:return;case 13:_e&&g.memoizedState===null&&(g=g.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&vt(g))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function B_(l,c){if(ge)for(var g=l;;){if(g.tag===5){var w=g.stateNode;c?ot(w):yr(g.stateNode,g.memoizedProps)}else if(g.tag===6)w=g.stateNode,c?ut(w):vr(w,g.memoizedProps);else if((g.tag!==23&&g.tag!==24||g.memoizedState===null||g===l)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}}function L_(l,c){if(co&&typeof co.onCommitFiberUnmount=="function")try{co.onCommitFiberUnmount(Vp,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:case 22:if(l=c.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var g=l=l.next;do{var w=g,E=w.destroy;if(w=w.tag,E!==void 0)if((w&4)!==0)j_(c,g);else{w=c;try{E()}catch(R){us(w,R)}}g=g.next}while(g!==l)}break;case 1:if(b_(c),l=c.stateNode,typeof l.componentWillUnmount=="function")try{l.props=c.memoizedProps,l.state=c.memoizedState,l.componentWillUnmount()}catch(R){us(c,R)}break;case 5:b_(c);break;case 4:ge?N_(l,c):Le&&Le&&(c=c.stateNode.containerInfo,l=df(c),pf(c,l))}}function P_(l,c){for(var g=c;;)if(L_(l,g),g.child===null||ge&&g.tag===4){if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else g.child.return=g,g=g.child}function I_(l){l.alternate=null,l.child=null,l.dependencies=null,l.firstEffect=null,l.lastEffect=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.return=null,l.updateQueue=null}function D_(l){return l.tag===5||l.tag===3||l.tag===4}function F_(l){if(ge){e:{for(var c=l.return;c!==null;){if(D_(c))break e;c=c.return}throw Error(a(160))}var g=c;switch(c=g.stateNode,g.tag){case 5:var w=!1;break;case 3:c=c.containerInfo,w=!0;break;case 4:c=c.containerInfo,w=!0;break;default:throw Error(a(161))}g.flags&16&&(Ve(c),g.flags&=-17);e:t:for(g=l;;){for(;g.sibling===null;){if(g.return===null||D_(g.return)){g=null;break e}g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue t;g.child.return=g,g=g.child}if(!(g.flags&2)){g=g.stateNode;break e}}w?ym(l,g,c):vm(l,g,c)}}function ym(l,c,g){var w=l.tag,E=w===5||w===6;if(E)l=E?l.stateNode:l.stateNode.instance,c?be(g,l,c):H(g,l);else if(w!==4&&(l=l.child,l!==null))for(ym(l,c,g),l=l.sibling;l!==null;)ym(l,c,g),l=l.sibling}function vm(l,c,g){var w=l.tag,E=w===5||w===6;if(E)l=E?l.stateNode:l.stateNode.instance,c?De(g,l,c):tt(g,l);else if(w!==4&&(l=l.child,l!==null))for(vm(l,c,g),l=l.sibling;l!==null;)vm(l,c,g),l=l.sibling}function N_(l,c){for(var g=c,w=!1,E,R;;){if(!w){w=g.return;e:for(;;){if(w===null)throw Error(a(160));switch(E=w.stateNode,w.tag){case 5:R=!1;break e;case 3:E=E.containerInfo,R=!0;break e;case 4:E=E.containerInfo,R=!0;break e}w=w.return}w=!0}if(g.tag===5||g.tag===6)P_(l,g),R?xe(E,g.stateNode):We(E,g.stateNode);else if(g.tag===4){if(g.child!==null){E=g.stateNode.containerInfo,R=!0,g.child.return=g,g=g.child;continue}}else if(L_(l,g),g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return,g.tag===4&&(w=!1)}g.sibling.return=g.return,g=g.sibling}}function xm(l,c){if(ge){switch(c.tag){case 0:case 11:case 14:case 15:case 22:R_(3,c);return;case 1:return;case 5:var g=c.stateNode;if(g!=null){var w=c.memoizedProps;l=l!==null?l.memoizedProps:w;var E=c.type,R=c.updateQueue;c.updateQueue=null,R!==null&&pe(g,R,E,l,w,c)}return;case 6:if(c.stateNode===null)throw Error(a(162));g=c.memoizedProps,N(c.stateNode,l!==null?l.memoizedProps:g,g);return;case 3:_e&&(c=c.stateNode,c.hydrate&&(c.hydrate=!1,St(c.containerInfo)));return;case 12:return;case 13:O_(c),zf(c);return;case 19:zf(c);return;case 17:return;case 23:case 24:B_(c,c.memoizedState!==null);return}throw Error(a(163))}switch(c.tag){case 0:case 11:case 14:case 15:case 22:R_(3,c);return;case 12:return;case 13:O_(c),zf(c);return;case 19:zf(c);return;case 3:_e&&(g=c.stateNode,g.hydrate&&(g.hydrate=!1,St(g.containerInfo)));break;case 23:case 24:return}e:if(Le){switch(c.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:c=c.stateNode,pf(c.containerInfo,c.pendingChildren);break e}throw Error(a(163))}}function O_(l){l.memoizedState!==null&&(Rm=wn(),ge&&B_(l.child,!0))}function zf(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new OC),c.forEach(function(w){var E=qC.bind(null,l,w);g.has(w)||(g.add(w),w.then(E,E))})}}function UC(l,c){return l!==null&&(l=l.memoizedState,l===null||l.dehydrated!==null)?(c=c.memoizedState,c!==null&&c.dehydrated===null):!1}var Vf=0,Wf=1,Jf=2,jf=3,Kf=4;if(typeof Symbol=="function"&&Symbol.for){var vu=Symbol.for;Vf=vu("selector.component"),Wf=vu("selector.has_pseudo_class"),Jf=vu("selector.role"),jf=vu("selector.test_id"),Kf=vu("selector.text")}function _m(l){var c=et(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=ne(l),l===null)throw Error(a(362));return l.stateNode.current}function Mm(l,c){switch(c.$$typeof){case Vf:if(l.type===c.value)return!0;break;case Wf:e:{c=c.value,l=[l,0];for(var g=0;g<l.length;){var w=l[g++],E=l[g++],R=c[E];if(w.tag!==5||!Te(w)){for(;R!=null&&Mm(w,R);)E++,R=c[E];if(E===c.length){c=!0;break e}else for(w=w.child;w!==null;)l.push(w,E),w=w.sibling}}c=!1}return c;case Jf:if(l.tag===5&&je(l.stateNode,c.value))return!0;break;case Kf:if((l.tag===5||l.tag===6)&&(l=Ee(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case jf:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365,c))}return!1}function Am(l){switch(l.$$typeof){case Vf:return"<"+(P(l.value)||"Unknown")+">";case Wf:return":has("+(Am(l)||"")+")";case Jf:return'[role="'+l.value+'"]';case Kf:return'"'+l.value+'"';case jf:return'[data-testname="'+l.value+'"]';default:throw Error(a(365,l))}}function k_(l,c){var g=[];l=[l,0];for(var w=0;w<l.length;){var E=l[w++],R=l[w++],k=c[R];if(E.tag!==5||!Te(E)){for(;k!=null&&Mm(E,k);)R++,k=c[R];if(R===c.length)g.push(E);else for(E=E.child;E!==null;)l.push(E,R),E=E.sibling}}return g}function wm(l,c){if(!D)throw Error(a(363));l=_m(l),l=k_(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var w=l[g++];if(w.tag===5)Te(w)||c.push(w.stateNode);else for(w=w.child;w!==null;)l.push(w),w=w.sibling}return c}var Xf=null;function HC(l){if(Xf===null)try{var c=("require"+Math.random()).slice(0,7);Xf=(n&&n[c]).call(n,"timers").setImmediate}catch{Xf=function(w){var E=new MessageChannel;E.port1.onmessage=w,E.port2.postMessage(void 0)}}return Xf(l)}var zC=Math.ceil,Qf=u.ReactCurrentDispatcher,Sm=u.ReactCurrentOwner,Em=u.IsSomeRendererActing,$e=0,zn=null,hn=null,Dn=0,go=0,Tm=dt(0),En=0,Yf=null,_a=0,xu=0,Ma=0,Cm=0,bm=null,Rm=0,Bm=1/0;function os(){Bm=wn()+500}var Oe=null,qf=!1,Lm=null,li=null,as=!1,_u=null,Mu=90,Pm=[],Im=[],Ri=null,Au=0,Dm=null,Zf=-1,Bi=0,$f=0,wu=null,Su=!1;function Zn(){return($e&48)!==0?wn():Zf!==-1?Zf:Zf=wn()}function ls(l){if(l=l.mode,(l&2)===0)return 1;if((l&4)===0)return pa()===99?1:2;if(Bi===0&&(Bi=_a),EC.transition!==0){$f!==0&&($f=bm!==null?bm.pendingLanes:0),l=Bi;var c=4186112&~$f;return c&=-c,c===0&&(l=4186112&~l,c=l&-l,c===0&&(c=8192)),c}return l=pa(),($e&4)!==0&&l===98?l=xf(12,Bi):(l=gC(l),l=xf(l,Bi)),l}function Li(l,c,g){if(50<Au)throw Au=0,Dm=null,Error(a(185));if(l=ed(l,c),l===null)return null;_f(l,c,g),l===zn&&(Ma|=c,En===4&&Aa(l,Dn));var w=pa();c===1?($e&8)!==0&&($e&48)===0?Fm(l):(ur(l,g),$e===0&&(os(),xr())):(($e&4)===0||w!==98&&w!==99||(Ri===null?Ri=new Set([l]):Ri.add(l)),ur(l,g)),bm=l}function ed(l,c){l.lanes|=c;var g=l.alternate;for(g!==null&&(g.lanes|=c),g=l,l=l.return;l!==null;)l.childLanes|=c,g=l.alternate,g!==null&&(g.childLanes|=c),g=l,l=l.return;return g.tag===3?g.stateNode:null}function ur(l,c){for(var g=l.callbackNode,w=l.suspendedLanes,E=l.pingedLanes,R=l.expirationTimes,k=l.pendingLanes;0<k;){var j=31-ns(k),oe=1<<j,Ce=R[j];if(Ce===-1){if((oe&w)===0||(oe&E)!==0){Ce=c,fo(oe);var Xe=Ft;R[j]=10<=Xe?Ce+250:6<=Xe?Ce+5e3:-1}}else Ce<=c&&(l.expiredLanes|=oe);k&=~oe}if(w=ru(l,l===zn?Dn:0),c=Ft,w===0)g!==null&&(g!==Xp&&jp(g),l.callbackNode=null,l.callbackPriority=0);else{if(g!==null){if(l.callbackPriority===c)return;g!==Xp&&jp(g)}c===15?(g=Fm.bind(null,l),Ei===null?(Ei=[g],Af=Jp(Mf,Hx)):Ei.push(g),g=Xp):c===14?g=iu(99,Fm.bind(null,l)):(g=yC(c),g=iu(g,G_.bind(null,l))),l.callbackPriority=c,l.callbackNode=g}}function G_(l){if(Zf=-1,$f=Bi=0,($e&48)!==0)throw Error(a(327));var c=l.callbackNode;if(Pi()&&l.callbackNode!==c)return null;var g=ru(l,l===zn?Dn:0);if(g===0)return null;var w=g,E=$e;$e|=16;var R=V_();(zn!==l||Dn!==w)&&(os(),wa(l,w));do try{JC();break}catch(j){z_(l,j)}while(1);if(Yp(),Qf.current=R,$e=E,hn!==null?w=0:(zn=null,Dn=0,w=En),(_a&Ma)!==0)wa(l,0);else if(w!==0){if(w===2&&($e|=64,l.hydrate&&(l.hydrate=!1,nu(l.containerInfo)),g=Ix(l),g!==0&&(w=Eu(l,g))),w===1)throw c=Yf,wa(l,0),Aa(l,g),ur(l,wn()),c;switch(l.finishedWork=l.current.alternate,l.finishedLanes=g,w){case 0:case 1:throw Error(a(345));case 2:yo(l);break;case 3:if(Aa(l,g),(g&62914560)===g&&(w=Rm+500-wn(),10<w)){if(ru(l,0)!==0)break;if(E=l.suspendedLanes,(E&g)!==g){Zn(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=ve(yo.bind(null,l),w);break}yo(l);break;case 4:if(Aa(l,g),(g&4186112)===g)break;for(w=l.eventTimes,E=-1;0<g;){var k=31-ns(g);R=1<<k,k=w[k],k>E&&(E=k),g&=~R}if(g=E,g=wn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*zC(g/1960))-g,10<g){l.timeoutHandle=ve(yo.bind(null,l),g);break}yo(l);break;case 5:yo(l);break;default:throw Error(a(329))}}return ur(l,wn()),l.callbackNode===c?G_.bind(null,l):null}function Aa(l,c){for(c&=~Cm,c&=~Ma,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var g=31-ns(c),w=1<<g;l[g]=-1,c&=~w}}function Fm(l){if(($e&48)!==0)throw Error(a(327));if(Pi(),l===zn&&(l.expiredLanes&Dn)!==0){var c=Dn,g=Eu(l,c);(_a&Ma)!==0&&(c=ru(l,c),g=Eu(l,c))}else c=ru(l,0),g=Eu(l,c);if(l.tag!==0&&g===2&&($e|=64,l.hydrate&&(l.hydrate=!1,nu(l.containerInfo)),c=Ix(l),c!==0&&(g=Eu(l,c))),g===1)throw g=Yf,wa(l,0),Aa(l,c),ur(l,wn()),g;return l.finishedWork=l.current.alternate,l.finishedLanes=c,yo(l),ur(l,wn()),null}function VC(){if(Ri!==null){var l=Ri;Ri=null,l.forEach(function(c){c.expiredLanes|=24&c.pendingLanes,ur(c,wn())})}xr()}function U_(l,c){var g=$e;$e|=1;try{return l(c)}finally{$e=g,$e===0&&(os(),xr())}}function H_(l,c){var g=$e;if((g&48)!==0)return l(c);$e|=1;try{if(l)return Ti(99,l.bind(null,c))}finally{$e=g,xr()}}function td(l,c){lt(Tm,go),go|=c,_a|=c}function Nm(){go=Tm.current,Et(Tm)}function wa(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==ue&&(l.timeoutHandle=ue,qe(g)),hn!==null)for(g=hn.return;g!==null;){var w=g;switch(w.tag){case 1:w=w.type.childContextTypes,w!=null&&ts();break;case 3:va(),Et(ln),Et(Gt),im();break;case 5:tm(w);break;case 4:va();break;case 13:Et(qt);break;case 19:Et(qt);break;case 10:qp(w);break;case 23:case 24:Nm()}g=g.return}zn=l,hn=cs(l.current,null),Dn=go=_a=c,En=0,Yf=null,Cm=Ma=xu=0}function z_(l,c){do{var g=hn;try{if(Yp(),uu.current=kf,Df){for(var w=tn.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}Df=!1}if(cu=0,Sn=In=tn=null,fu=!1,Sm.current=null,g===null||g.return===null){En=1,Yf=c,hn=null;break}e:{var R=l,k=g.return,j=g,oe=c;if(c=Dn,j.flags|=2048,j.firstEffect=j.lastEffect=null,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ce=oe;if((j.mode&2)===0){var Xe=j.alternate;Xe?(j.updateQueue=Xe.updateQueue,j.memoizedState=Xe.memoizedState,j.lanes=Xe.lanes):(j.updateQueue=null,j.memoizedState=null)}var rt=(qt.current&1)!==0,Ie=k;do{var Pt;if(Pt=Ie.tag===13){var Vt=Ie.memoizedState;if(Vt!==null)Pt=Vt.dehydrated!==null;else{var Er=Ie.memoizedProps;Pt=Er.fallback===void 0?!1:Er.unstable_avoidThisFallback!==!0?!0:!rt}}if(Pt){var Z=Ie.updateQueue;if(Z===null){var Q=new Set;Q.add(Ce),Ie.updateQueue=Q}else Z.add(Ce);if((Ie.mode&2)===0){if(Ie.flags|=64,j.flags|=16384,j.flags&=-2981,j.tag===1)if(j.alternate===null)j.tag=17;else{var ae=is(-1,1);ae.tag=2,ss(j,ae)}j.lanes|=1;break e}oe=void 0,j=c;var Pe=R.pingCache;if(Pe===null?(Pe=R.pingCache=new NC,oe=new Set,Pe.set(Ce,oe)):(oe=Pe.get(Ce),oe===void 0&&(oe=new Set,Pe.set(Ce,oe))),!oe.has(j)){oe.add(j);var Qe=YC.bind(null,R,Ce,j);Ce.then(Qe,Qe)}Ie.flags|=4096,Ie.lanes=c;break e}Ie=Ie.return}while(Ie!==null);oe=Error((P(j.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}En!==5&&(En=2),oe=mm(oe,j),Ie=k;do{switch(Ie.tag){case 3:R=oe,Ie.flags|=4096,c&=-c,Ie.lanes|=c;var Nt=T_(Ie,R,c);Jx(Ie,Nt);break e;case 1:R=oe;var st=Ie.type,Tt=Ie.stateNode;if((Ie.flags&64)===0&&(typeof st.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(li===null||!li.has(Tt)))){Ie.flags|=4096,c&=-c,Ie.lanes|=c;var cn=C_(Ie,R,c);Jx(Ie,cn);break e}}Ie=Ie.return}while(Ie!==null)}J_(g)}catch(_t){c=_t,hn===g&&g!==null&&(hn=g=g.return);continue}break}while(1)}function V_(){var l=Qf.current;return Qf.current=kf,l===null?kf:l}function Eu(l,c){var g=$e;$e|=16;var w=V_();zn===l&&Dn===c||wa(l,c);do try{WC();break}catch(E){z_(l,E)}while(1);if(Yp(),$e=g,Qf.current=w,hn!==null)throw Error(a(261));return zn=null,Dn=0,En}function WC(){for(;hn!==null;)W_(hn)}function JC(){for(;hn!==null&&!AC();)W_(hn)}function W_(l){var c=X_(l.alternate,l,go);l.memoizedProps=l.pendingProps,c===null?J_(l):hn=c,Sm.current=null}function J_(l){var c=l;do{var g=c.alternate;if(l=c.return,(c.flags&2048)===0){if(g=DC(g,c,go),g!==null){hn=g;return}if(g=c,g.tag!==24&&g.tag!==23||g.memoizedState===null||(go&1073741824)!==0||(g.mode&4)===0){for(var w=0,E=g.child;E!==null;)w|=E.lanes|E.childLanes,E=E.sibling;g.childLanes=w}l!==null&&(l.flags&2048)===0&&(l.firstEffect===null&&(l.firstEffect=c.firstEffect),c.lastEffect!==null&&(l.lastEffect!==null&&(l.lastEffect.nextEffect=c.firstEffect),l.lastEffect=c.lastEffect),1<c.flags&&(l.lastEffect!==null?l.lastEffect.nextEffect=c:l.firstEffect=c,l.lastEffect=c))}else{if(g=FC(c),g!==null){g.flags&=2047,hn=g;return}l!==null&&(l.firstEffect=l.lastEffect=null,l.flags|=2048)}if(c=c.sibling,c!==null){hn=c;return}hn=c=l}while(c!==null);En===0&&(En=5)}function yo(l){var c=pa();return Ti(99,jC.bind(null,l,c)),null}function jC(l,c){do Pi();while(_u!==null);if(($e&48)!==0)throw Error(a(327));var g=l.finishedWork;if(g===null)return null;if(l.finishedWork=null,l.finishedLanes=0,g===l.current)throw Error(a(177));l.callbackNode=null;var w=g.lanes|g.childLanes,E=w,R=l.pendingLanes&~E;l.pendingLanes=E,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=E,l.mutableReadLanes&=E,l.entangledLanes&=E,E=l.entanglements;for(var k=l.eventTimes,j=l.expirationTimes;0<R;){var oe=31-ns(R),Ce=1<<oe;E[oe]=0,k[oe]=-1,j[oe]=-1,R&=~Ce}if(Ri!==null&&(w&24)===0&&Ri.has(l)&&Ri.delete(l),l===zn&&(hn=zn=null,Dn=0),1<g.flags?g.lastEffect!==null?(g.lastEffect.nextEffect=g,w=g.firstEffect):w=g:w=g.firstEffect,w!==null){E=$e,$e|=32,Sm.current=null,wu=Y(l.containerInfo),Su=!1,Oe=w;do try{KC()}catch(Q){if(Oe===null)throw Error(a(330));us(Oe,Q),Oe=Oe.nextEffect}while(Oe!==null);wu=null,Oe=w;do try{for(k=l;Oe!==null;){var Xe=Oe.flags;if(Xe&16&&ge&&Ve(Oe.stateNode),Xe&128){var rt=Oe.alternate;if(rt!==null){var Ie=rt.ref;Ie!==null&&(typeof Ie=="function"?Ie(null):Ie.current=null)}}switch(Xe&1038){case 2:F_(Oe),Oe.flags&=-3;break;case 6:F_(Oe),Oe.flags&=-3,xm(Oe.alternate,Oe);break;case 1024:Oe.flags&=-1025;break;case 1028:Oe.flags&=-1025,xm(Oe.alternate,Oe);break;case 4:xm(Oe.alternate,Oe);break;case 8:j=k,R=Oe,ge?N_(j,R):P_(j,R);var Pt=R.alternate;I_(R),Pt!==null&&I_(Pt)}Oe=Oe.nextEffect}}catch(Q){if(Oe===null)throw Error(a(330));us(Oe,Q),Oe=Oe.nextEffect}while(Oe!==null);Su&&yt(),he(l.containerInfo),l.current=g,Oe=w;do try{for(Xe=l;Oe!==null;){var Vt=Oe.flags;if(Vt&36&&GC(Xe,Oe.alternate,Oe),Vt&128){rt=void 0;var Er=Oe.ref;if(Er!==null){var Z=Oe.stateNode;switch(Oe.tag){case 5:rt=re(Z);break;default:rt=Z}typeof Er=="function"?Er(rt):Er.current=rt}}Oe=Oe.nextEffect}}catch(Q){if(Oe===null)throw Error(a(330));us(Oe,Q),Oe=Oe.nextEffect}while(Oe!==null);Oe=null,SC(),$e=E}else l.current=g;if(as)as=!1,_u=l,Mu=c;else for(Oe=w;Oe!==null;)c=Oe.nextEffect,Oe.nextEffect=null,Oe.flags&8&&(Vt=Oe,Vt.sibling=null,Vt.stateNode=null),Oe=c;if(w=l.pendingLanes,w===0&&(li=null),w===1?l===Dm?Au++:(Au=0,Dm=l):Au=0,g=g.stateNode,co&&typeof co.onCommitFiberRoot=="function")try{co.onCommitFiberRoot(Vp,g,void 0,(g.current.flags&64)===64)}catch{}if(ur(l,wn()),qf)throw qf=!1,l=Lm,Lm=null,l;return($e&8)!==0||xr(),null}function KC(){for(;Oe!==null;){var l=Oe.alternate;Su||wu===null||((Oe.flags&8)!==0?V(Oe,wu)&&(Su=!0,At()):Oe.tag===13&&UC(l,Oe)&&V(Oe,wu)&&(Su=!0,At()));var c=Oe.flags;(c&256)!==0&&kC(l,Oe),(c&512)===0||as||(as=!0,iu(97,function(){return Pi(),null})),Oe=Oe.nextEffect}}function Pi(){if(Mu!==90){var l=97<Mu?97:Mu;return Mu=90,Ti(l,QC)}return!1}function XC(l,c){Pm.push(c,l),as||(as=!0,iu(97,function(){return Pi(),null}))}function j_(l,c){Im.push(c,l),as||(as=!0,iu(97,function(){return Pi(),null}))}function QC(){if(_u===null)return!1;var l=_u;if(_u=null,($e&48)!==0)throw Error(a(331));var c=$e;$e|=32;var g=Im;Im=[];for(var w=0;w<g.length;w+=2){var E=g[w],R=g[w+1],k=E.destroy;if(E.destroy=void 0,typeof k=="function")try{k()}catch(oe){if(R===null)throw Error(a(330));us(R,oe)}}for(g=Pm,Pm=[],w=0;w<g.length;w+=2){E=g[w],R=g[w+1];try{var j=E.create;E.destroy=j()}catch(oe){if(R===null)throw Error(a(330));us(R,oe)}}for(j=l.current.firstEffect;j!==null;)l=j.nextEffect,j.nextEffect=null,j.flags&8&&(j.sibling=null,j.stateNode=null),j=l;return $e=c,xr(),!0}function K_(l,c,g){c=mm(g,c),c=T_(l,c,1),ss(l,c),c=Zn(),l=ed(l,1),l!==null&&(_f(l,1,c),ur(l,c))}function us(l,c){if(l.tag===3)K_(l,l,c);else for(var g=l.return;g!==null;){if(g.tag===3){K_(g,l,c);break}else if(g.tag===1){var w=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(li===null||!li.has(w))){l=mm(c,l);var E=C_(g,l,1);if(ss(g,E),E=Zn(),g=ed(g,1),g!==null)_f(g,1,E),ur(g,E);else if(typeof w.componentDidCatch=="function"&&(li===null||!li.has(w)))try{w.componentDidCatch(c,l)}catch{}break}}g=g.return}}function YC(l,c,g){var w=l.pingCache;w!==null&&w.delete(c),c=Zn(),l.pingedLanes|=l.suspendedLanes&g,zn===l&&(Dn&g)===g&&(En===4||En===3&&(Dn&62914560)===Dn&&500>wn()-Rm?wa(l,0):Cm|=g),ur(l,c)}function qC(l,c){var g=l.stateNode;g!==null&&g.delete(c),c=0,c===0&&(c=l.mode,(c&2)===0?c=1:(c&4)===0?c=pa()===99?1:2:(Bi===0&&(Bi=_a),c=ha(62914560&~Bi),c===0&&(c=4194304))),g=Zn(),l=ed(l,c),l!==null&&(_f(l,c,g),ur(l,g))}var X_;X_=function(l,c,g){var w=c.lanes;if(l!==null)if(l.memoizedProps!==c.pendingProps||ln.current)Gr=!0;else if((g&w)!==0)Gr=(l.flags&16384)!==0;else{switch(Gr=!1,c.tag){case 3:v_(c),rm();break;case 5:$x(c);break;case 1:un(c.type)&&yf(c);break;case 4:em(c,c.stateNode.containerInfo);break;case 10:zx(c,c.memoizedProps.value);break;case 13:if(c.memoizedState!==null)return(g&c.child.childLanes)!==0?x_(l,c,g):(lt(qt,qt.current&1),c=bi(l,c,g),c!==null?c.sibling:null);lt(qt,qt.current&1);break;case 19:if(w=(g&c.childLanes)!==0,(l.flags&64)!==0){if(w)return S_(l,c,g);c.flags|=64}var E=c.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),lt(qt,qt.current),w)break;return null;case 23:case 24:return c.lanes=0,fm(l,c,g)}return bi(l,c,g)}else Gr=!1;switch(c.lanes=0,c.tag){case 2:if(w=c.type,l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps,E=jt(c,Gt.current),ga(c,g),E=om(null,c,w,l,E,g),c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0){if(c.tag=1,c.memoizedState=null,c.updateQueue=null,un(w)){var R=!0;yf(c)}else R=!1;c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Zp(c);var k=w.getDerivedStateFromProps;typeof k=="function"&&Cf(c,w,k,l),E.updater=bf,c.stateNode=E,E._reactInternals=c,$p(c,w,l,g),c=hm(null,c,w,!0,R,g)}else c.tag=0,qn(null,c,E,g),c=c.child;return c;case 16:E=c.elementType;e:{switch(l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps,R=E._init,E=R(E._payload),c.type=E,R=c.tag=$C(E),l=kr(E,l),R){case 0:c=dm(null,c,E,l,g);break e;case 1:c=y_(null,c,E,l,g);break e;case 11:c=h_(null,c,E,l,g);break e;case 14:c=p_(null,c,E,kr(E.type,l),w,g);break e}throw Error(a(306,E,""))}return c;case 0:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:kr(w,E),dm(l,c,w,E,g);case 1:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:kr(w,E),y_(l,c,w,E,g);case 3:if(v_(c),w=c.updateQueue,l===null||w===null)throw Error(a(282));if(w=c.pendingProps,E=c.memoizedState,E=E!==null?E.element:null,Wx(l,c),su(c,w,null,g),w=c.memoizedState.element,w===E)rm(),c=bi(l,c,g);else{if(E=c.stateNode,(R=E.hydrate)&&(_e?(ho=nt(c.stateNode.containerInfo),Ci=c,R=si=!0):R=!1),R){if(_e&&(l=E.mutableSourceEagerHydrationData,l!=null))for(E=0;E<l.length;E+=2)R=l[E],k=l[E+1],ce?R._workInProgressVersionPrimary=k:R._workInProgressVersionSecondary=k,xa.push(R);for(g=Zx(c,null,w,g),c.child=g;g;)g.flags=g.flags&-3|1024,g=g.sibling}else qn(l,c,w,g),rm();c=c.child}return c;case 5:return $x(c),l===null&&nm(c),w=c.type,E=c.pendingProps,R=l!==null?l.memoizedProps:null,k=E.children,Ne(w,E)?k=null:R!==null&&Ne(w,R)&&(c.flags|=16),g_(l,c),qn(l,c,k,g),c.child;case 6:return l===null&&nm(c),null;case 13:return x_(l,c,g);case 4:return em(c,c.stateNode.containerInfo),w=c.pendingProps,l===null?c.child=Lf(c,null,w,g):qn(l,c,w,g),c.child;case 11:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:kr(w,E),h_(l,c,w,E,g);case 7:return qn(l,c,c.pendingProps,g),c.child;case 8:return qn(l,c,c.pendingProps.children,g),c.child;case 12:return qn(l,c,c.pendingProps.children,g),c.child;case 10:e:{if(w=c.type._context,E=c.pendingProps,k=c.memoizedProps,R=E.value,zx(c,R),k!==null){var j=k.value;if(R=_r(j,R)?0:(typeof w._calculateChangedBits=="function"?w._calculateChangedBits(j,R):1073741823)|0,R===0){if(k.children===E.children&&!ln.current){c=bi(l,c,g);break e}}else for(j=c.child,j!==null&&(j.return=c);j!==null;){var oe=j.dependencies;if(oe!==null){k=j.child;for(var Ce=oe.firstContext;Ce!==null;){if(Ce.context===w&&(Ce.observedBits&R)!==0){j.tag===1&&(Ce=is(-1,g&-g),Ce.tag=2,ss(j,Ce)),j.lanes|=g,Ce=j.alternate,Ce!==null&&(Ce.lanes|=g),Vx(j.return,g),oe.lanes|=g;break}Ce=Ce.next}}else k=j.tag===10&&j.type===c.type?null:j.child;if(k!==null)k.return=j;else for(k=j;k!==null;){if(k===c){k=null;break}if(j=k.sibling,j!==null){j.return=k.return,k=j;break}k=k.return}j=k}}qn(l,c,E.children,g),c=c.child}return c;case 9:return E=c.type,R=c.pendingProps,w=R.children,ga(c,g),E=Mr(E,R.unstable_observedBits),w=w(E),c.flags|=1,qn(l,c,w,g),c.child;case 14:return E=c.type,R=kr(E,c.pendingProps),R=kr(E.type,R),p_(l,c,E,R,w,g);case 15:return m_(l,c,c.type,c.pendingProps,w,g);case 17:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:kr(w,E),l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,un(w)?(l=!0,yf(c)):l=!1,ga(c,g),Qx(c,w,E),$p(c,w,E,g),hm(null,c,w,!0,l,g);case 19:return S_(l,c,g);case 23:return fm(l,c,g);case 24:return fm(l,c,g)}throw Error(a(156,c.tag))};var nd={current:!1},Om=o.unstable_flushAllWithoutAsserting,Q_=typeof Om=="function";function km(){if(Om!==void 0)return Om();for(var l=!1;Pi();)l=!0;return l}function Y_(l){try{km(),HC(function(){km()?Y_(l):l()})}catch(c){l(c)}}var rd=0,q_=!1;function ZC(l,c,g,w){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(l,c,g,w){return new ZC(l,c,g,w)}function Gm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function $C(l){if(typeof l=="function")return Gm(l)?1:0;if(l!=null){if(l=l.$$typeof,l===y)return 11;if(l===A)return 14}return 2}function cs(l,c){var g=l.alternate;return g===null?(g=Sr(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.nextEffect=null,g.firstEffect=null,g.lastEffect=null),g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function id(l,c,g,w,E,R){var k=2;if(w=l,typeof l=="function")Gm(l)&&(k=1);else if(typeof l=="string")k=5;else e:switch(l){case p:return Sa(g.children,E,R,c);case C:k=8,E|=16;break;case d:k=8,E|=1;break;case m:return l=Sr(12,g,c,E|8),l.elementType=m,l.type=m,l.lanes=R,l;case _:return l=Sr(13,g,c,E),l.type=_,l.elementType=_,l.lanes=R,l;case M:return l=Sr(19,g,c,E),l.elementType=M,l.lanes=R,l;case B:return Um(g,E,R,c);case L:return l=Sr(24,g,c,E),l.elementType=L,l.lanes=R,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:k=10;break e;case x:k=9;break e;case y:k=11;break e;case A:k=14;break e;case S:k=16,w=null;break e;case T:k=22;break e}throw Error(a(130,l==null?l:typeof l,""))}return c=Sr(k,g,c,E),c.elementType=l,c.type=w,c.lanes=R,c}function Sa(l,c,g,w){return l=Sr(7,l,w,c),l.lanes=g,l}function Um(l,c,g,w){return l=Sr(23,l,w,c),l.elementType=B,l.lanes=g,l}function Hm(l,c,g){return l=Sr(6,l,null,c),l.lanes=g,l}function zm(l,c,g){return c=Sr(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function eb(l,c,g){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.pendingContext=this.context=null,this.hydrate=g,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wp(0),this.expirationTimes=Wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wp(0),_e&&(this.mutableSourceEagerHydrationData=null)}function Z_(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):Error(a(268,Object.keys(l)));return l=X(c),l===null?null:l.stateNode}function $_(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function sd(l,c){$_(l,c),(l=l.alternate)&&$_(l,c)}function tb(l){return l=X(l),l===null?null:l.stateNode}function nb(){return null}return r.IsThisRendererActing=nd,r.act=function(l){function c(){rd--,Em.current=g,nd.current=w}q_===!1&&(q_=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),rd++;var g=Em.current,w=nd.current;Em.current=!0,nd.current=!0;try{var E=U_(l)}catch(R){throw c(),R}if(E!==null&&typeof E=="object"&&typeof E.then=="function")return{then:function(R,k){E.then(function(){1<rd||Q_===!0&&g===!0?(c(),R()):Y_(function(j){c(),j?k(j):R()})},function(j){c(),k(j)})}};try{rd!==1||Q_!==!1&&g!==!1||km(),c()}catch(R){throw c(),R}return{then:function(R){R()}}},r.attemptContinuousHydration=function(l){if(l.tag===13){var c=Zn();Li(l,67108864,c),sd(l,67108864)}},r.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=Zn(),g=ls(l);Li(l,g,c),sd(l,g)}},r.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.hydrate){var g=fo(c.pendingLanes);c.expiredLanes|=g&c.pendingLanes,ur(c,wn()),($e&48)===0&&(os(),xr())}break;case 13:var w=Zn();H_(function(){return Li(l,1,w)}),sd(l,4)}},r.attemptUserBlockingHydration=function(l){if(l.tag===13){var c=Zn();Li(l,4,c),sd(l,4)}},r.batchedEventUpdates=function(l,c){var g=$e;$e|=2;try{return l(c)}finally{$e=g,$e===0&&(os(),xr())}},r.batchedUpdates=U_,r.createComponentSelector=function(l){return{$$typeof:Vf,value:l}},r.createContainer=function(l,c,g){return l=new eb(l,c,g),c=Sr(3,null,null,c===2?7:c===1?3:0),l.current=c,c.stateNode=l,Zp(c),l},r.createHasPsuedoClassSelector=function(l){return{$$typeof:Wf,value:l}},r.createPortal=function(l,c,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:w==null?null:""+w,children:l,containerInfo:c,implementation:g}},r.createRoleSelector=function(l){return{$$typeof:Jf,value:l}},r.createTestNameSelector=function(l){return{$$typeof:jf,value:l}},r.createTextSelector=function(l){return{$$typeof:Kf,value:l}},r.deferredUpdates=function(l){return Ti(97,l)},r.discreteUpdates=function(l,c,g,w,E){var R=$e;$e|=4;try{return Ti(98,l.bind(null,c,g,w,E))}finally{$e=R,$e===0&&(os(),xr())}},r.findAllNodes=wm,r.findBoundingRects=function(l,c){if(!D)throw Error(a(363));c=wm(l,c),l=[];for(var g=0;g<c.length;g++)l.push(ye(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var w=g.x,E=w+g.width,R=g.y,k=R+g.height,j=c-1;0<=j;j--)if(c!==j){var oe=l[j],Ce=oe.x,Xe=Ce+oe.width,rt=oe.y,Ie=rt+oe.height;if(w>=Ce&&R>=rt&&E<=Xe&&k<=Ie){l.splice(c,1);break}else if(w!==Ce||g.width!==oe.width||Ie<R||rt>k){if(!(R!==rt||g.height!==oe.height||Xe<w||Ce>E)){Ce>w&&(oe.width+=Ce-w,oe.x=w),Xe<E&&(oe.width=E-Ce),l.splice(c,1);break}}else{rt>R&&(oe.height+=rt-R,oe.y=R),Ie<k&&(oe.height=k-rt),l.splice(c,1);break}}}return l},r.findHostInstance=Z_,r.findHostInstanceWithNoPortals=function(l){return l=q(l),l===null?null:l.tag===20?l.stateNode.instance:l.stateNode},r.findHostInstanceWithWarning=function(l){return Z_(l)},r.flushControlled=function(l){var c=$e;$e|=1;try{Ti(99,l)}finally{$e=c,$e===0&&(os(),xr())}},r.flushDiscreteUpdates=function(){($e&49)===0&&(VC(),Pi())},r.flushPassiveEffects=Pi,r.flushSync=H_,r.focusWithin=function(l,c){if(!D)throw Error(a(363));for(l=_m(l),c=k_(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++];if(!Te(g)){if(g.tag===5&&ie(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return vf},r.getFindAllNodesFailureDescription=function(l,c){if(!D)throw Error(a(363));var g=0,w=[];l=[_m(l),0];for(var E=0;E<l.length;){var R=l[E++],k=l[E++],j=c[k];if((R.tag!==5||!Te(R))&&(Mm(R,j)&&(w.push(Am(j)),k++,k>g&&(g=k)),k<c.length))for(R=R.child;R!==null;)l.push(R,k),R=R.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(Am(c[g]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},r.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return re(l.child.stateNode);default:return l.child.stateNode}},r.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:tb,findFiberByHostInstance:l.findFiberByHostInstance||nb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c.isDisabled&&c.supportsFiber)try{Vp=c.inject(l),co=c}catch{}l=!0}return l},r.observeVisibleRects=function(l,c,g,w){if(!D)throw Error(a(363));l=wm(l,c);var E=Ze(l,g,w).disconnect;return{disconnect:function(){E()}}},r.registerMutableSourceForHydration=function(l,c){var g=c._getVersion;g=g(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,g]:l.mutableSourceEagerHydrationData.push(c,g)},r.runWithPriority=function(l,c){var g=vf;try{return vf=l,c()}finally{vf=g}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(l,c){var g=$e;$e&=-2,$e|=8;try{return l(c)}finally{$e=g,$e===0&&(os(),xr())}},r.updateContainer=function(l,c,g,w){var E=c.current,R=Zn(),k=ls(E);e:if(g){g=g._reactInternals;t:{if(W(g)!==g||g.tag!==1)throw Error(a(170));var j=g;do{switch(j.tag){case 3:j=j.stateNode.context;break t;case 1:if(un(j.type)){j=j.stateNode.__reactInternalMemoizedMergedChildContext;break t}}j=j.return}while(j!==null);throw Error(a(171))}if(g.tag===1){var oe=g.type;if(un(oe)){g=Lx(g,oe,j);break e}}g=j}else g=dn;return c.context===null?c.context=g:c.pendingContext=g,c=is(R,k),c.payload={element:l},w=w===void 0?null:w,w!==null&&(c.callback=w),ss(E,c),Li(E,k,R),k},r}})(QT);XT.exports=QT.exports;var GF=XT.exports,Cx=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const zp=[];function YT(n,e,t,r=0,i=!1){for(const o of e)if(Cx(t,o.args)){if(i)return;if(o.error)throw o.error;if(o.response)return o.response;throw o.promise}const s={args:t,promise:n(...t).then(o=>s.response=o!=null?o:!0).catch(o=>s.error=o!=null?o:"unknown error").then(()=>{r>0&&setTimeout(()=>{const o=e.indexOf(s);o!==-1&&e.splice(o,1)},r)})};if(e.push(s),!i)throw s.promise}function UF(n,...e){if(e===void 0||e.length===0)n.splice(0,n.length);else{const t=n.find(r=>Cx(e,r.args));if(t){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}}function Qi(n,...e){return YT(n,zp,e,Qi.lifespan)}Qi.lifespan=0;Qi.clear=(...n)=>UF(zp,...n);Qi.preload=(n,...e)=>void YT(n,zp,e,Qi.lifespan,!0);Qi.peek=(...n)=>{var e;return(e=zp.find(t=>Cx(n,t.args)))==null?void 0:e.response};function HF(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Sy(n,e,t){var r,i,s,o,a;e==null&&(e=100);function u(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(u,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var f=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(u,e)),h&&(a=n.apply(s,i),s=i=null),a};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},f}Sy.debounce=Sy;var Jw=Sy;function zF(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=Be.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=Be.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,p=Be.exports.useRef(!1);Be.exports.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[d,m,v]=Be.exports.useMemo(()=>{const M=()=>{if(!u.current.element)return;const{left:A,top:S,width:T,height:C,bottom:B,right:L,x:F,y:G}=u.current.element.getBoundingClientRect(),b={left:A,top:S,width:T,height:C,bottom:B,right:L,x:F,y:G};u.current.element instanceof HTMLElement&&i&&(b.height=u.current.element.offsetHeight,b.width=u.current.element.offsetWidth),Object.freeze(b),p.current&&!jF(u.current.lastBounds,b)&&a(u.current.lastBounds=b)};return[M,h?Jw(M,h):M,f?Jw(M,f):M]},[a,i,f,h]);function x(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",v,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function y(){!u.current.element||(u.current.resizeObserver=new s(v),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(M=>M.addEventListener("scroll",v,{capture:!0,passive:!0})))}const _=M=>{!M||M===u.current.element||(x(),u.current.element=M,u.current.scrollContainers=qT(M),y())};return WF(v,Boolean(t)),VF(m),Be.exports.useEffect(()=>{x(),y()},[t,v,m]),Be.exports.useEffect(()=>x,[]),[_,o,d]}function VF(n){Be.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function WF(n,e){Be.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function qT(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...qT(n.parentElement)]}const JF=["x","y","top","bottom","left","right","width","height"],jF=(n,e)=>JF.every(t=>n[t]===e[t]),It={obj:n=>n===Object(n)&&!It.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e){if(typeof n!=typeof e||!!n!=!!e)return!1;if(It.str(n)||It.num(n)||It.obj(n))return n===e;if(It.arr(n)&&n==e)return!0;let t;for(t in n)if(!(t in e))return!1;for(t in e)if(n[t]!==e[t])return!1;return It.und(t)?n===e:!0}};function Xg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function ZT(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function KF(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{ZT(t.capturedMap,e,r,i)})}function XF(n){const e=new I;function t(p){var d,m,v,x;const y=n.getState(),{raycaster:_,mouse:M,camera:A,size:S}=y,T=_.computeOffsets==null?void 0:_.computeOffsets(p,y),C=(d=T==null?void 0:T.offsetX)!=null?d:p.offsetX,B=(m=T==null?void 0:T.offsetY)!=null?m:p.offsetY,L=(v=T==null?void 0:T.width)!=null?v:S.width,F=(x=T==null?void 0:T.height)!=null?x:S.height;M.set(C/L*2-1,-(B/F)*2+1),_.setFromCamera(M,A)}function r(p){const{internal:d}=n.getState(),m=p.offsetX-d.initialClick[0],v=p.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+v*v))}function i(p){return p.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var v;return(v=d.__r3f)==null?void 0:v.handlers["onPointer"+m]}))}function s(p){const d=n.getState(),{raycaster:m,internal:v}=d;if(!m.enabled)return[];const x=new Set,y=[],_=p?p(v.interaction):v.interaction;let M=m.intersectObjects(_,!0).filter(S=>{const T=Xg(S);return x.has(T)?!1:(x.add(T),!0)});m.filter&&(M=m.filter(M,d));for(const S of M){let T=S.object;for(;T;){var A;(A=T.__r3f)!=null&&A.eventCount&&y.push(Vn(Ct({},S),{eventObject:T})),T=T.parent}}return y}function o(p,d){const{internal:m}=n.getState();if("pointerId"in d&&m.capturedMap.has(d.pointerId))for(let v of m.capturedMap.get(d.pointerId).values())p.push(v.intersection);return p}function a(p,d,m,v){const{raycaster:x,mouse:y,camera:_,internal:M}=n.getState();if(p.length){const A=e.set(y.x,y.y,0).unproject(_),S={stopped:!1};for(const T of p){const C=b=>{var P,W;return(P=(W=M.capturedMap.get(b))==null?void 0:W.has(T.eventObject))!=null?P:!1},B=b=>{const P={intersection:T,target:d.target};M.capturedMap.has(b)?M.capturedMap.get(b).set(T.eventObject,P):M.capturedMap.set(b,new Map([[T.eventObject,P]])),d.target.setPointerCapture(b)},L=b=>{const P=M.capturedMap.get(b);P&&ZT(M.capturedMap,T.eventObject,P,b)};let F={};for(let b in d){let P=d[b];typeof P!="function"&&(F[b]=P)}let G=Vn(Ct(Ct({},T),F),{spaceX:y.x,spaceY:y.y,intersections:p,stopped:S.stopped,delta:m,unprojectedPoint:A,ray:x.ray,camera:_,stopPropagation:()=>{const b="pointerId"in d&&M.capturedMap.get(d.pointerId);if((!b||b.has(T.eventObject))&&(G.stopped=S.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(P=>P.eventObject===T.eventObject))){const P=p.slice(0,p.indexOf(T));u([...P,T])}},target:{hasPointerCapture:C,setPointerCapture:B,releasePointerCapture:L},currentTarget:{hasPointerCapture:C,setPointerCapture:B,releasePointerCapture:L},sourceEvent:d,nativeEvent:d});if(v(G),S.stopped===!0)break}}return p}function u(p){const{internal:d}=n.getState();Array.from(d.hovered.values()).forEach(m=>{if(!p.length||!p.find(v=>v.object===m.object&&v.index===m.index&&v.instanceId===m.instanceId)){const x=m.eventObject.__r3f,y=x==null?void 0:x.handlers;if(d.hovered.delete(Xg(m)),x!=null&&x.eventCount){const _=Vn(Ct({},m),{intersections:p||[]});y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}})}const f=p=>{switch(p){case"onPointerLeave":case"onPointerCancel":return()=>u([]);case"onLostPointerCapture":return d=>{const{internal:m}=n.getState();"pointerId"in d&&!m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),u([]))}}return d=>{const{onPointerMissed:m,internal:v}=n.getState();t(d),v.lastEvent.current=d;const x=p==="onPointerMove",y=p==="onClick"||p==="onContextMenu"||p==="onDoubleClick",M=o(s(x?i:void 0),d),A=y?r(d):0;p==="onPointerDown"&&(v.initialClick=[d.offsetX,d.offsetY],v.initialHits=M.map(S=>S.eventObject)),y&&!M.length&&A<=2&&(h(d,v.interaction),m&&m(d)),x&&u(M),a(M,d,A,S=>{const T=S.eventObject,C=T.__r3f,B=C==null?void 0:C.handlers;if(!!(C!=null&&C.eventCount))if(x){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const L=Xg(S),F=v.hovered.get(L);F?F.stopped&&S.stopPropagation():(v.hovered.set(L,S),B.onPointerOver==null||B.onPointerOver(S),B.onPointerEnter==null||B.onPointerEnter(S))}B.onPointerMove==null||B.onPointerMove(S)}else{const L=B[p];L?(!y||v.initialHits.includes(T))&&(h(d,v.interaction.filter(F=>!v.initialHits.includes(F))),L(S)):y&&v.initialHits.includes(T)&&h(d,v.interaction.filter(F=>!v.initialHits.includes(F)))}})}};function h(p,d){d.forEach(m=>{var v;return(v=m.__r3f)==null||v.handlers.onPointerMissed==null?void 0:v.handlers.onPointerMissed(p)})}return{handlePointer:f}}const QF=n=>n&&!!n.memoized&&!!n.changes,np=n=>n&&!!n.getState,Qg=(n,e)=>{var t,r;return{root:np(n)?n:(t=(r=n.__r3f)==null?void 0:r.root)!=null?t:e.__r3f.root,container:np(n)?n.getState().scene:n}},jw="__default",YF={};let Ey={},aO=n=>void(Ey=Ct(Ct({},Ey),n));function qF(n,e){return!!(It.arr(n)&&It.equ(n,e)||n===e)}function ja(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f=Ct({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),n}function ZF(n){function e(d,C,L={},T=!1){var B=C,{children:m,key:v,ref:x}=B,y=Ur(B,["children","key","ref"]);var F=L,{children:_,key:M,ref:A}=F,S=Ur(F,["children","key","ref"]);var G;const b=(G=d==null?void 0:d.__r3f)!=null?G:{},P=Object.entries(y),W=[];if(T){const K=Object.keys(S);for(let X=0;X<K.length;X++)y.hasOwnProperty(K[X])||P.unshift([K[X],jw+"remove"])}P.forEach(([K,X])=>{var q;if((q=d.__r3f)!=null&&q.primitive&&K==="object"||qF(X,S[K]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(K))return W.push([K,X,!0,[]]);let V=[];K.includes("-")&&(V=K.split("-")),W.push([K,X,!1,V])});const z=Ct({},y);return b.memoizedProps&&b.memoizedProps.args&&(z.args=b.memoizedProps.args),b.memoizedProps&&b.memoizedProps.attach&&(z.attach=b.memoizedProps.attach),{accumulative:T,memoized:z,changes:W}}function t(d,m){var v,x,y;const _=(v=d==null?void 0:d.__r3f)!=null?v:{},M=_.root,A=(x=M==null||M.getState==null?void 0:M.getState())!=null?x:{},{memoized:S,changes:T}=QF(m)?m:e(d,m),C=_.eventCount;if(d.__r3f&&(d.__r3f.memoizedProps=S),T.forEach(([B,L,F,G])=>{var b;let P=d,W=P[B];if(G.length&&(W=G.reduce((K,X)=>K[X],d),!(W&&W.set))){const[K,...X]=G.reverse();P=X.reverse().reduce((q,V)=>q[V],d),B=K}if(L===jw+"remove")if(W&&W.constructor)L=new W.constructor(S.args);else if(P.constructor){const K=new P.constructor(P.__r3f.memoizedProps.args);L=K[W],K.dispose&&K.dispose()}else L=0;const z=(A==null||(b=A.gl)==null?void 0:b.outputEncoding)===or;if(F)L?_.handlers[B]=L:delete _.handlers[B],_.eventCount=Object.keys(_.handlers).length;else if(W&&W.set&&(W.copy||W instanceof Jo)){if(Array.isArray(L))W.fromArray?W.fromArray(L):W.set(...L);else if(W.copy&&L&&L.constructor&&W.constructor.name===L.constructor.name)W.copy(L);else if(L!==void 0){const K=W instanceof Ae;!K&&W.setScalar?W.setScalar(L):W instanceof Jo&&L instanceof Jo?W.mask=L.mask:W.set(L),!z&&K&&W.convertSRGBToLinear()}}else P[B]=L,!z&&P[B]instanceof Yt&&(P[B].encoding=bt);r(d)}),_.parent&&A.internal&&d.raycast&&C!==_.eventCount){const B=A.internal.interaction.indexOf(d);B>-1&&A.internal.interaction.splice(B,1),_.eventCount&&A.internal.interaction.push(d)}return T.length&&(y=d.__r3f)!=null&&y.parent&&i(d),d}function r(d){var m,v;const x=(m=d.__r3f)==null||(v=m.root)==null||v.getState==null?void 0:v.getState();x&&x.internal.frames===0&&x.invalidate()}function i(d){d.onUpdate==null||d.onUpdate(d)}function s(d,M,x,y,_){var A=M,{args:m=[]}=A,v=Ur(A,["args"]);let S=`${d[0].toUpperCase()}${d.slice(1)}`,T;if(!np(x)&&_){const C=B=>B.return?C(B.return):B.stateNode&&B.stateNode.containerInfo;x=C(_)}if(!x||!np(x))throw`No valid root for ${S}!`;if(d==="primitive"){if(v.object===void 0)throw"Primitives without 'object' are invalid!";const C=v.object;T=ja(C,{root:x,primitive:!0})}else{const C=Ey[S]||FF[S];if(!C)throw`${S} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(m))throw"The args prop must be an array!";T=ja(new C(...m),{root:x,memoizedProps:{args:m.length===0?null:m}})}return"attachFns"in v||(S.endsWith("Geometry")?v=Ct({attach:"geometry"},v):S.endsWith("Material")&&(v=Ct({attach:"material"},v))),t(T,v),T}function o(d,m){let v=!1;if(m){if(m.attachArray)It.arr(d[m.attachArray])||(d[m.attachArray]=[]),d[m.attachArray].push(m);else if(m.attachObject)It.obj(d[m.attachObject[0]])||(d[m.attachObject[0]]={}),d[m.attachObject[0]][m.attachObject[1]]=m;else if(m.attach&&!It.fun(m.attach))d[m.attach]=m;else if(It.arr(m.attachFns)){const[x]=m.attachFns;It.str(x)&&It.fun(d[x])?d[x](m):It.fun(x)&&x(m,d)}else m.isObject3D&&d.isObject3D&&(d.add(m),v=!0);v||d.__r3f.objects.push(m),m.__r3f||ja(m,{}),m.__r3f.parent=d,i(m),r(m)}}function a(d,m,v){let x=!1;if(m){if(m.attachArray){const y=d[m.attachArray];It.arr(y)||(d[m.attachArray]=[]),y.splice(y.indexOf(v),0,m)}else{if(m.attachObject||m.attach&&!It.fun(m.attach))return o(d,m);if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"});const y=d.children.filter(M=>M!==m),_=y.indexOf(v);d.children=[...y.slice(0,_),m,...y.slice(_)],x=!0}}x||d.__r3f.objects.push(m),m.__r3f||ja(m,{}),m.__r3f.parent=d,i(m),r(m)}}function u(d,m,v=!1){d&&[...d].forEach(x=>f(m,x,v))}function f(d,m,v){if(m){var x,y;if(m.__r3f&&(m.__r3f.parent=null),(x=d.__r3f)!=null&&x.objects&&(d.__r3f.objects=d.__r3f.objects.filter(T=>T!==m)),m.attachArray)d[m.attachArray]=d[m.attachArray].filter(T=>T!==m);else if(m.attachObject)delete d[m.attachObject[0]][m.attachObject[1]];else if(m.attach&&!It.fun(m.attach)&&d[m.attach]===m)d[m.attach]=null;else if(It.arr(m.attachFns)){const[,T]=m.attachFns;It.str(T)&&It.fun(d[T])?d[T](m):It.fun(T)&&T(m,d)}else if(m.isObject3D&&d.isObject3D){var _;d.remove(m),(_=m.__r3f)!=null&&_.root&&KF(m.__r3f.root,m)}const A=(y=m.__r3f)==null?void 0:y.primitive,S=v===void 0?m.dispose!==null&&!A:v;if(!A){var M;u((M=m.__r3f)==null?void 0:M.objects,m,S),u(m.children,m,S)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,A||delete m.__r3f),S&&m.dispose&&m.type!=="Scene"&&rl.exports.unstable_runWithPriority(rl.exports.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),r(d)}}function h(d,m,v,x){var y;const _=(y=d.__r3f)==null?void 0:y.parent;if(!_)return;const M=s(m,v,d.__r3f.root);m!=="primitive"&&d.children&&(d.children.forEach(A=>o(M,A)),d.children=[]),d.__r3f.objects.forEach(A=>o(M,A)),d.__r3f.objects=[],f(_,d),o(_,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[x,x.alternate].forEach(A=>{A!==null&&(A.stateNode=M,A.ref&&(typeof A.ref=="function"?A.ref(M):A.ref.current=M))})}return{reconciler:GF({now:rl.exports.unstable_now,createInstance:s,removeChild:f,appendChild:o,appendInitialChild:o,insertBefore:a,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:It.fun(setTimeout)?setTimeout:void 0,cancelTimeout:It.fun(clearTimeout)?clearTimeout:void 0,setTimeout:It.fun(setTimeout)?setTimeout:void 0,clearTimeout:It.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(d,m)=>{const{container:v,root:x}=Qg(d,m);v.__r3f.root=x,o(v,m)},removeChildFromContainer:(d,m)=>f(Qg(d,m).container,m),insertInContainerBefore:(d,m,v)=>a(Qg(d,m).container,m,v),prepareUpdate(d,m,v,x){if(d.__r3f.primitive&&x.object&&x.object!==d)return[!0];{const y=x,{args:M=[],children:A}=y,S=Ur(y,["args","children"]),_=v,{args:T=[],children:C}=_,B=Ur(_,["args","children"]);if(!Array.isArray(M))throw"The args prop must be an array!";if(M.some((F,G)=>F!==T[G]))return[!0];const L=e(d,S,B,!0);if(L.changes.length)return[!1,L];if(d.attach&&typeof d.attach!="function"){const G=d.__r3f.parent;G&&G[d.attach]!==d&&o(G,d)}return null}},commitUpdate(d,[m,v],x,y,_,M){m?h(d,x,_,M):t(d,v)},hideInstance(d){d.isObject3D&&(d.visible=!1,r(d))},unhideInstance(d,m){(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0,r(d))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(d){return d},getRootHostContext(d){return YF},getChildHostContext(d){return d},createTextInstance(){},finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},commitMount(d){var m;const v=(m=d==null?void 0:d.__r3f)!=null?m:{};d.raycast&&v.handlers&&v.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(d){ja(d)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:t}}const $F=n=>!!(n!=null&&n.render),Kw=n=>n&&n.isOrthographicCamera;function Ty(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const $T=Be.exports.createContext(null),eN=(n,e,t,r)=>{const{gl:i,size:s,shadows:o=!1,linear:a=!1,flat:u=!1,vr:f=!1,orthographic:h=!1,frameloop:p="always",dpr:d=1,performance:m,clock:v=new Ax,raycaster:x,camera:y,onPointerMissed:_}=r;o&&(i.shadowMap.enabled=!0,typeof o=="object"?Object.assign(i.shadowMap,o):i.shadowMap.type=Lv),a&&(i.outputEncoding=or),u&&(i.toneMapping=qr),p==="never"&&(v.stop(),v.elapsedTime=0);const M=kF((C,B)=>{const L=new GT,le=x||{},{params:F}=le,G=Ur(le,["params"]);n(L,Vn(Ct({enabled:!0},G),{params:Ct(Ct({},L.params),F)}));const b=y instanceof Yo,P=b?y:h?new Zr(0,0,0,0,.1,1e3):new kt(75,0,.1,1e3);b||(P.position.z=5,y&&n(P,y),y!=null&&y.rotation||P.lookAt(0,0,0));const W=Ty(d),z=new I,K=new I,X=new I;function q(J=B().camera,Y=K,he=B().size){const{width:Se,height:we}=he,te=Se/we;Y instanceof I?X.copy(Y):X.set(...Y);const Ke=J.getWorldPosition(z).distanceTo(X);if(Kw(J))return{width:Se/J.zoom,height:we/J.zoom,factor:1,distance:Ke,aspect:te};{const Ne=J.fov*Math.PI/180,Fe=2*Math.tan(Ne/2)*Ke,ve=Fe*(Se/we);return{width:ve,height:Fe,factor:Se/ve,distance:Ke,aspect:te}}}let V;const re=J=>C(Y=>({performance:Vn(Ct({},Y.performance),{current:J})}));return{gl:i,set:C,get:B,invalidate:()=>e(B()),advance:(J,Y)=>t(J,Y,B()),linear:a,flat:u,scene:ja(new ql),camera:P,controls:null,raycaster:L,clock:v,mouse:new de,vr:f,frameloop:p,onPointerMissed:_,performance:Vn(Ct({current:1,min:.5,max:1,debounce:200},m),{regress:()=>{const J=B();V&&clearTimeout(V),J.performance.current!==J.performance.min&&re(J.performance.min),V=setTimeout(()=>re(B().performance.max),J.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:W,dpr:W,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:q},setSize:(J,Y)=>{const he={width:J,height:Y};C(Se=>({size:he,viewport:Ct(Ct({},Se.viewport),q(P,K,he))}))},setDpr:J=>C(Y=>({viewport:Vn(Ct({},Y.viewport),{dpr:Ty(J)})})),setFrameloop:(J="always")=>C(()=>({frameloop:J})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:r,lastEvent:Be.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(J,Y=0)=>(C(({internal:he})=>({internal:Vn(Ct({},he),{priority:he.priority+(Y>0?1:0),subscribers:[...he.subscribers,{ref:J,priority:Y}].sort((Se,we)=>Se.priority-we.priority)})})),()=>{C(({internal:he})=>({internal:Vn(Ct({},he),{priority:he.priority-(Y>0?1:0),subscribers:he.subscribers.filter(Se=>Se.ref!==J)})}))})}}}),A=M.getState();let S=A.size,T=A.viewport.dpr;return M.subscribe(()=>{const{camera:C,size:B,viewport:L,internal:F}=M.getState();(B!==S||L.dpr!==T)&&(!C.manual&&!(F.lastProps.camera instanceof Yo)&&(Kw(C)?(C.left=B.width/-2,C.right=B.width/2,C.top=B.height/2,C.bottom=B.height/-2):C.aspect=B.width/B.height,C.updateProjectionMatrix(),C.updateMatrixWorld()),i.setPixelRatio(L.dpr),i.setSize(B.width,B.height),S=B,T=L.dpr)}),s&&A.setSize(s.width,s.height),M.subscribe(C=>e(C)),M};function eC(n,e){const t=e.length;return e.push(n),()=>void e.splice(t,1)}let bs,Cy=[],by=[],tN=[];const nN=n=>eC(n,Cy),rN=n=>eC(n,by);function ju(n,e){for(bs=0;bs<n.length;bs++)n[bs](e)}function Yg(n,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(t=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),bs=0;bs<e.internal.subscribers.length;bs++)e.internal.subscribers[bs].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function iN(n){let e=!1,t;function r(o){if(e=!0,t=0,ju(Cy,o),n.forEach(a=>{const u=a.store.getState();u.internal.active&&(u.frameloop==="always"||u.internal.frames>0)&&(t+=Yg(o,u))}),ju(by,o),t>0)return requestAnimationFrame(r);ju(tN,o),e=!1}function i(o){if(!o)return n.forEach(a=>i(a.store.getState()));o.vr||!o.internal.active||o.frameloop==="never"||(o.internal.frames=Math.min(60,o.internal.frames+1),e||(e=!0,requestAnimationFrame(r)))}function s(o,a=!0,u){a&&ju(Cy,o),u?Yg(o,u):n.forEach(f=>Yg(o,f.store.getState())),a&&ju(by,o)}return{loop:r,invalidate:i,advance:s}}function sN(n){const{handlePointer:e}=XF(n),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((r,i)=>Vn(Ct({},r),{[i]:e(i)}),{}),connect:r=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(a=>({events:Vn(Ct({},a.events),{connected:r})})),Object.entries((i=o==null?void 0:o.handlers)!=null?i:[]).forEach(([a,u])=>{const[f,h]=t[a];r.addEventListener(f,u,{passive:h})})},disconnect:()=>{const{set:r,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,a])=>{if(i&&i.connected instanceof HTMLElement){const[u]=t[o];i.connected.removeEventListener(u,a)}}),r(o=>({events:Vn(Ct({},o.events),{connected:!1})}))}}}}const Ry=typeof window!="undefined"?Be.exports.useLayoutEffect:Be.exports.useEffect;function oN({set:n}){return Ry(()=>(n(new Promise(()=>null)),()=>n(!1)),[]),null}class tC extends Be.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}tC.getDerivedStateFromError=()=>({error:!0});const lO=Be.exports.forwardRef(function(p,h){var d=p,{children:e,fallback:t,tabIndex:r,resize:i,id:s,style:o,className:a,events:u}=d,f=Ur(d,["children","fallback","tabIndex","resize","id","style","className","events"]);const[m,{width:v,height:x}]=zF(Ct({scroll:!0,debounce:{scroll:50,resize:0}},i)),y=Be.exports.useRef(null),[_,M]=Be.exports.useState(!1),[A,S]=Be.exports.useState(!1);if(_)throw _;if(A)throw A;return Ry(()=>{v>0&&x>0&&cN(Be.exports.createElement(tC,{set:S},Be.exports.createElement(Be.exports.Suspense,{fallback:Be.exports.createElement(oN,{set:M})},e)),y.current,Vn(Ct({},f),{size:{width:v,height:x},events:u||sN}))},[v,x,e]),Ry(()=>{const T=y.current;return()=>oC(T)},[]),Be.exports.createElement("div",{ref:m,id:s,className:a,tabIndex:r,style:Ct({position:"relative",width:"100%",height:"100%",overflow:"hidden"},o)},Be.exports.createElement("canvas",{ref:HF([y,h]),style:{display:"block"}},t))});function nC(){const n=Be.exports.useContext($T);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function Xr(n=t=>t,e){return nC()(n,e)}function rC(n,e=0){const t=nC().getState().internal.subscribe,r=Be.exports.useRef(n);return Be.exports.useLayoutEffect(()=>void(r.current=n),[n]),Be.exports.useLayoutEffect(()=>t(r,e),[e,t]),null}function aN(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function iC(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,u=>{u.scene&&Object.assign(u,aN(u.scene)),o(u)},e,u=>a(`Could not load ${s}: ${u.message}`)))))}}function tu(n,e,t,r){const i=Array.isArray(e)?e:[e],s=Qi(iC(t,r),n,...i);return Array.isArray(e)?s:s[0]}tu.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Qi.preload(iC(t),n,...r)};tu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Qi.clear(n,...t)};const Vc=new Map,Xw=["legacy","blocking","concurrent"],{invalidate:lN,advance:Qw}=iN(Vc),{reconciler:Gl,applyProps:sC}=ZF(),uN=(n,e)=>{const t=typeof n=="function"?n(e):n;if($F(t))return t;const r=new Bt(Ct({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},n));return r.outputEncoding=bt,r.toneMapping=kv,n&&sC(r,n),r};function cN(n,e,u={}){var f=u,{gl:t,size:r,mode:i=Xw[1],events:s,onCreated:o}=f,a=Ur(f,["gl","size","mode","events","onCreated"]);var h;if(!r){var p,d,m,v;r={width:(p=(d=e.parentElement)==null?void 0:d.clientWidth)!=null?p:0,height:(m=(v=e.parentElement)==null?void 0:v.clientHeight)!=null?m:0}}let x=Vc.get(e),y=x==null?void 0:x.fiber,_=x==null?void 0:x.store,M=(h=_)==null?void 0:h.getState();if(y&&M&&(a.dpr!==void 0&&!It.equ(M.viewport.dpr,Ty(a.dpr))&&M.setDpr(a.dpr),(M.size.width!==r.width||M.size.height!==r.height)&&M.setSize(r.width,r.height),M.frameloop!==a.frameloop&&M.setFrameloop(a.frameloop),a.linear!==M.internal.lastProps.linear&&(oC(e),y=void 0)),!y){const A=uN(t,e);a.vr&&(A.xr.enabled=!0,A.setAnimationLoop(T=>Qw(T,!0))),_=eN(sC,lN,Qw,Ct({gl:A,size:r},a));const S=_.getState();y=Gl.createContainer(_,Xw.indexOf(i),!1,null),Vc.set(e,{fiber:y,store:_}),s&&S.set({events:s(_)})}if(_&&y)return Gl.updateContainer(Be.exports.createElement(fN,{store:_,element:n,onCreated:o,target:e}),y,null,()=>{}),_;throw"Error creating root!"}function fN({store:n,element:e,onCreated:t,target:r}){return Be.exports.useEffect(()=>{const i=n.getState();i.set(s=>({internal:Vn(Ct({},s.internal),{active:!0})})),i.events.connect==null||i.events.connect(r),t&&t(i)},[]),Be.exports.createElement($T.Provider,{value:n},e)}function oC(n,e){const t=Vc.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Gl.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{var s,o,a;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),dN(i),Vc.delete(n),e&&e(n)},500)})}}function dN(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const r in n){var e,t;(e=(t=r).dispose)==null||e.call(t),delete n[r]}}Gl.act;function hN(n,e){return Gl.createPortal(n,e,null,null)}Gl.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});var bx={exports:{}},ff={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=Be.exports,aC=60103;ff.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Yw=Symbol.for;aC=Yw("react.element"),ff.Fragment=Yw("react.fragment")}var mN=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gN=Object.prototype.hasOwnProperty,yN={key:!0,ref:!0,__self:!0,__source:!0};function lC(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gN.call(e,r)&&!yN.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aC,type:n,key:s,ref:o,props:i,_owner:mN.current}}ff.jsx=lC;ff.jsxs=lC;bx.exports=ff;const uO=bx.exports.jsx,cO=bx.exports.jsxs;function rp(){return rp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rp.apply(this,arguments)}function Ue(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class qw{constructor(e=Math){Ue(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Ue(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Ue(this,"p",[]),Ue(this,"perm",[]),Ue(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Ue(this,"dot",(t,r,i)=>t[0]*r+t[1]*i),Ue(this,"dot3",(t,r,i,s)=>t[0]*r+t[1]*i+t[2]*s),Ue(this,"dot4",(t,r,i,s,o)=>t[0]*r+t[1]*i+t[2]*s+t[3]*o),Ue(this,"noise",(t,r)=>{let i,s,o;const a=.5*(Math.sqrt(3)-1),u=(t+r)*a,f=Math.floor(t+u),h=Math.floor(r+u),p=(3-Math.sqrt(3))/6,d=(f+h)*p,m=f-d,v=h-d,x=t-m,y=r-v;let _=0,M=1;x>y&&(_=1,M=0);const A=x-_+p,S=y-M+p,T=x-1+2*p,C=y-1+2*p,B=f&255,L=h&255,F=this.perm[B+this.perm[L]]%12,G=this.perm[B+_+this.perm[L+M]]%12,b=this.perm[B+1+this.perm[L+1]]%12;let P=.5-x*x-y*y;P<0?i=0:(P*=P,i=P*P*this.dot(this.grad3[F],x,y));let W=.5-A*A-S*S;W<0?s=0:(W*=W,s=W*W*this.dot(this.grad3[G],A,S));let z=.5-T*T-C*C;return z<0?o=0:(z*=z,o=z*z*this.dot(this.grad3[b],T,C)),70*(i+s+o)}),Ue(this,"noise3d",(t,r,i)=>{let s,o,a,u;const f=.3333333333333333,h=(t+r+i)*f,p=Math.floor(t+h),d=Math.floor(r+h),m=Math.floor(i+h),v=1/6,x=(p+d+m)*v,y=p-x,_=d-x,M=m-x,A=t-y,S=r-_,T=i-M;let C,B,L,F,G,b;A>=S?S>=T?(C=1,B=0,L=0,F=1,G=1,b=0):A>=T?(C=1,B=0,L=0,F=1,G=0,b=1):(C=0,B=0,L=1,F=1,G=0,b=1):S<T?(C=0,B=0,L=1,F=0,G=1,b=1):A<T?(C=0,B=1,L=0,F=0,G=1,b=1):(C=0,B=1,L=0,F=1,G=1,b=0);const P=A-C+v,W=S-B+v,z=T-L+v,K=A-F+2*v,X=S-G+2*v,q=T-b+2*v,V=A-1+3*v,re=S-1+3*v,le=T-1+3*v,J=p&255,Y=d&255,he=m&255,Se=this.perm[J+this.perm[Y+this.perm[he]]]%12,we=this.perm[J+C+this.perm[Y+B+this.perm[he+L]]]%12,te=this.perm[J+F+this.perm[Y+G+this.perm[he+b]]]%12,Ke=this.perm[J+1+this.perm[Y+1+this.perm[he+1]]]%12;let Ne=.6-A*A-S*S-T*T;Ne<0?s=0:(Ne*=Ne,s=Ne*Ne*this.dot3(this.grad3[Se],A,S,T));let Fe=.6-P*P-W*W-z*z;Fe<0?o=0:(Fe*=Fe,o=Fe*Fe*this.dot3(this.grad3[we],P,W,z));let ve=.6-K*K-X*X-q*q;ve<0?a=0:(ve*=ve,a=ve*ve*this.dot3(this.grad3[te],K,X,q));let qe=.6-V*V-re*re-le*le;return qe<0?u=0:(qe*=qe,u=qe*qe*this.dot3(this.grad3[Ke],V,re,le)),32*(s+o+a+u)}),Ue(this,"noise4d",(t,r,i,s)=>{const o=this.grad4,a=this.simplex,u=this.perm,f=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let p,d,m,v,x;const y=(t+r+i+s)*f,_=Math.floor(t+y),M=Math.floor(r+y),A=Math.floor(i+y),S=Math.floor(s+y),T=(_+M+A+S)*h,C=_-T,B=M-T,L=A-T,F=S-T,G=t-C,b=r-B,P=i-L,W=s-F,z=G>b?32:0,K=G>P?16:0,X=b>P?8:0,q=G>W?4:0,V=b>W?2:0,re=P>W?1:0,le=z+K+X+q+V+re;let J,Y,he,Se,we,te,Ke,Ne,Fe,ve,qe,ue;J=a[le][0]>=3?1:0,Y=a[le][1]>=3?1:0,he=a[le][2]>=3?1:0,Se=a[le][3]>=3?1:0,we=a[le][0]>=2?1:0,te=a[le][1]>=2?1:0,Ke=a[le][2]>=2?1:0,Ne=a[le][3]>=2?1:0,Fe=a[le][0]>=1?1:0,ve=a[le][1]>=1?1:0,qe=a[le][2]>=1?1:0,ue=a[le][3]>=1?1:0;const ce=G-J+h,ge=b-Y+h,Le=P-he+h,_e=W-Se+h,et=G-we+2*h,Je=b-te+2*h,He=P-Ke+2*h,At=W-Ne+2*h,yt=G-Fe+3*h,U=b-ve+3*h,D=P-qe+3*h,ne=W-ue+3*h,ye=G-1+4*h,Ee=b-1+4*h,Te=P-1+4*h,je=W-1+4*h,ie=_&255,Ze=M&255,tt=A&255,H=S&255,N=u[ie+u[Ze+u[tt+u[H]]]]%32,fe=u[ie+J+u[Ze+Y+u[tt+he+u[H+Se]]]]%32,pe=u[ie+we+u[Ze+te+u[tt+Ke+u[H+Ne]]]]%32,De=u[ie+Fe+u[Ze+ve+u[tt+qe+u[H+ue]]]]%32,be=u[ie+1+u[Ze+1+u[tt+1+u[H+1]]]]%32;let We=.6-G*G-b*b-P*P-W*W;We<0?p=0:(We*=We,p=We*We*this.dot4(o[N],G,b,P,W));let xe=.6-ce*ce-ge*ge-Le*Le-_e*_e;xe<0?d=0:(xe*=xe,d=xe*xe*this.dot4(o[fe],ce,ge,Le,_e));let Ve=.6-et*et-Je*Je-He*He-At*At;Ve<0?m=0:(Ve*=Ve,m=Ve*Ve*this.dot4(o[pe],et,Je,He,At));let ot=.6-yt*yt-U*U-D*D-ne*ne;ot<0?v=0:(ot*=ot,v=ot*ot*this.dot4(o[De],yt,U,D,ne));let ut=.6-ye*ye-Ee*Ee-Te*Te-je*je;return ut<0?x=0:(ut*=ut,x=ut*ut*this.dot4(o[be],ye,Ee,Te,je)),27*(p+d+m+v+x)});for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);for(let t=0;t<512;t++)this.perm[t]=this.p[t&255]}}class Rs extends Qt{constructor(){super(new _i(1,1,1),Rs.material)}}Ue(Rs,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new I},up:{value:new I(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});Ue(Rs,"material",new Bn({name:"SkyShader",fragmentShader:Rs.SkyShader.fragmentShader,vertexShader:Rs.SkyShader.vertexShader,uniforms:Uo.clone(Rs.SkyShader.uniforms),side:sr,depthWrite:!1}));const Zw=(n,e)=>(n%e+e)%e;class vN extends Zi{constructor(e,t){super();Ue(this,"object",void 0),Ue(this,"domElement",void 0),Ue(this,"enabled",!0),Ue(this,"target",new I),Ue(this,"minDistance",0),Ue(this,"maxDistance",1/0),Ue(this,"minZoom",0),Ue(this,"maxZoom",1/0),Ue(this,"minPolarAngle",0),Ue(this,"maxPolarAngle",Math.PI),Ue(this,"minAzimuthAngle",-1/0),Ue(this,"maxAzimuthAngle",1/0),Ue(this,"enableDamping",!1),Ue(this,"dampingFactor",.05),Ue(this,"enableZoom",!0),Ue(this,"zoomSpeed",1),Ue(this,"enableRotate",!0),Ue(this,"rotateSpeed",1),Ue(this,"enablePan",!0),Ue(this,"panSpeed",1),Ue(this,"screenSpacePanning",!0),Ue(this,"keyPanSpeed",7),Ue(this,"autoRotate",!1),Ue(this,"autoRotateSpeed",2),Ue(this,"reverseOrbit",!1),Ue(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ue(this,"mouseButtons",{LEFT:Co.ROTATE,MIDDLE:Co.DOLLY,RIGHT:Co.PAN}),Ue(this,"touches",{ONE:bo.ROTATE,TWO:bo.DOLLY_PAN}),Ue(this,"target0",void 0),Ue(this,"position0",void 0),Ue(this,"zoom0",void 0),Ue(this,"_domElementKeyEvents",null),Ue(this,"getPolarAngle",void 0),Ue(this,"getAzimuthalAngle",void 0),Ue(this,"setPolarAngle",void 0),Ue(this,"setAzimuthalAngle",void 0),Ue(this,"getDistance",void 0),Ue(this,"listenToKeyEvents",void 0),Ue(this,"saveState",void 0),Ue(this,"reset",void 0),Ue(this,"update",void 0),Ue(this,"connect",void 0),Ue(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof kt?this.object.zoom:1,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=H=>{let N=Zw(H,2*Math.PI),fe=h.phi;fe<0&&(fe+=2*Math.PI),N<0&&(N+=2*Math.PI);let pe=Math.abs(N-fe);2*Math.PI-pe<pe&&(N<fe?N+=2*Math.PI:fe+=2*Math.PI),p.phi=N-fe,r.update()},this.setAzimuthalAngle=H=>{let N=Zw(H,2*Math.PI),fe=h.theta;fe<0&&(fe+=2*Math.PI),N<0&&(N+=2*Math.PI);let pe=Math.abs(N-fe);2*Math.PI-pe<pe&&(N<fe?N+=2*Math.PI:fe+=2*Math.PI),p.theta=N-fe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=H=>{H.addEventListener("keydown",ne),this._domElementKeyEvents=H},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof kt?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof kt&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),u=a.NONE},this.update=(()=>{const H=new I,N=new an().setFromUnitVectors(e.up,new I(0,1,0)),fe=N.clone().invert(),pe=new I,De=new an,be=2*Math.PI;return function(){const xe=r.object.position;H.copy(xe).sub(r.target),H.applyQuaternion(N),h.setFromVector3(H),r.autoRotate&&u===a.NONE&&P(G()),r.enableDamping?(h.theta+=p.theta*r.dampingFactor,h.phi+=p.phi*r.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let Ve=r.minAzimuthAngle,ot=r.maxAzimuthAngle;return isFinite(Ve)&&isFinite(ot)&&(Ve<-Math.PI?Ve+=be:Ve>Math.PI&&(Ve-=be),ot<-Math.PI?ot+=be:ot>Math.PI&&(ot-=be),Ve<=ot?h.theta=Math.max(Ve,Math.min(ot,h.theta)):h.theta=h.theta>(Ve+ot)/2?Math.max(Ve,h.theta):Math.min(ot,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(r.minDistance,Math.min(r.maxDistance,h.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),H.setFromSpherical(h),H.applyQuaternion(fe),xe.copy(r.target).add(H),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),m.set(0,0,0)),d=1,v||pe.distanceToSquared(r.object.position)>f||8*(1-De.dot(r.object.quaternion))>f?(r.dispatchEvent(i),pe.copy(r.object.position),De.copy(r.object.quaternion),v=!1,!0):!1}})(),this.connect=H=>{H===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=H,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Te),r.domElement.addEventListener("pointerdown",et),r.domElement.addEventListener("pointercancel",At),r.domElement.addEventListener("wheel",D)},this.dispose=()=>{var H,N,fe,pe,De,be;(H=r.domElement)===null||H===void 0||H.removeEventListener("contextmenu",Te),(N=r.domElement)===null||N===void 0||N.removeEventListener("pointerdown",et),(fe=r.domElement)===null||fe===void 0||fe.removeEventListener("pointercancel",At),(pe=r.domElement)===null||pe===void 0||pe.removeEventListener("wheel",D),(De=r.domElement)===null||De===void 0||De.ownerDocument.removeEventListener("pointermove",Je),(be=r.domElement)===null||be===void 0||be.ownerDocument.removeEventListener("pointerup",He),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ne)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=a.NONE;const f=1e-6,h=new wy,p=new wy;let d=1;const m=new I;let v=!1;const x=new de,y=new de,_=new de,M=new de,A=new de,S=new de,T=new de,C=new de,B=new de,L=[],F={};function G(){return 2*Math.PI/60/60*r.autoRotateSpeed}function b(){return Math.pow(.95,r.zoomSpeed)}function P(H){r.reverseOrbit?p.theta+=H:p.theta-=H}function W(H){r.reverseOrbit?p.phi+=H:p.phi-=H}const z=(()=>{const H=new I;return function(fe,pe){H.setFromMatrixColumn(pe,0),H.multiplyScalar(-fe),m.add(H)}})(),K=(()=>{const H=new I;return function(fe,pe){r.screenSpacePanning===!0?H.setFromMatrixColumn(pe,1):(H.setFromMatrixColumn(pe,0),H.crossVectors(r.object.up,H)),H.multiplyScalar(fe),m.add(H)}})(),X=(()=>{const H=new I;return function(fe,pe){const De=r.domElement;if(De&&r.object instanceof kt&&r.object.isPerspectiveCamera){const be=r.object.position;H.copy(be).sub(r.target);let We=H.length();We*=Math.tan(r.object.fov/2*Math.PI/180),z(2*fe*We/De.clientHeight,r.object.matrix),K(2*pe*We/De.clientHeight,r.object.matrix)}else De&&r.object instanceof Zr&&r.object.isOrthographicCamera?(z(fe*(r.object.right-r.object.left)/r.object.zoom/De.clientWidth,r.object.matrix),K(pe*(r.object.top-r.object.bottom)/r.object.zoom/De.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function q(H){r.object instanceof kt&&r.object.isPerspectiveCamera?d/=H:r.object instanceof Zr&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*H)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(H){r.object instanceof kt&&r.object.isPerspectiveCamera?d*=H:r.object instanceof Zr&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/H)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function re(H){x.set(H.clientX,H.clientY)}function le(H){T.set(H.clientX,H.clientY)}function J(H){M.set(H.clientX,H.clientY)}function Y(H){y.set(H.clientX,H.clientY),_.subVectors(y,x).multiplyScalar(r.rotateSpeed);const N=r.domElement;N&&(P(2*Math.PI*_.x/N.clientHeight),W(2*Math.PI*_.y/N.clientHeight)),x.copy(y),r.update()}function he(H){C.set(H.clientX,H.clientY),B.subVectors(C,T),B.y>0?q(b()):B.y<0&&V(b()),T.copy(C),r.update()}function Se(H){A.set(H.clientX,H.clientY),S.subVectors(A,M).multiplyScalar(r.panSpeed),X(S.x,S.y),M.copy(A),r.update()}function we(H){H.deltaY<0?V(b()):H.deltaY>0&&q(b()),r.update()}function te(H){let N=!1;switch(H.code){case r.keys.UP:X(0,r.keyPanSpeed),N=!0;break;case r.keys.BOTTOM:X(0,-r.keyPanSpeed),N=!0;break;case r.keys.LEFT:X(r.keyPanSpeed,0),N=!0;break;case r.keys.RIGHT:X(-r.keyPanSpeed,0),N=!0;break}N&&(H.preventDefault(),r.update())}function Ke(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const H=.5*(L[0].pageX+L[1].pageX),N=.5*(L[0].pageY+L[1].pageY);x.set(H,N)}}function Ne(){if(L.length==1)M.set(L[0].pageX,L[0].pageY);else{const H=.5*(L[0].pageX+L[1].pageX),N=.5*(L[0].pageY+L[1].pageY);M.set(H,N)}}function Fe(){const H=L[0].pageX-L[1].pageX,N=L[0].pageY-L[1].pageY,fe=Math.sqrt(H*H+N*N);T.set(0,fe)}function ve(){r.enableZoom&&Fe(),r.enablePan&&Ne()}function qe(){r.enableZoom&&Fe(),r.enableRotate&&Ke()}function ue(H){if(L.length==1)y.set(H.pageX,H.pageY);else{const fe=tt(H),pe=.5*(H.pageX+fe.x),De=.5*(H.pageY+fe.y);y.set(pe,De)}_.subVectors(y,x).multiplyScalar(r.rotateSpeed);const N=r.domElement;N&&(P(2*Math.PI*_.x/N.clientHeight),W(2*Math.PI*_.y/N.clientHeight)),x.copy(y)}function ce(H){if(L.length==1)A.set(H.pageX,H.pageY);else{const N=tt(H),fe=.5*(H.pageX+N.x),pe=.5*(H.pageY+N.y);A.set(fe,pe)}S.subVectors(A,M).multiplyScalar(r.panSpeed),X(S.x,S.y),M.copy(A)}function ge(H){const N=tt(H),fe=H.pageX-N.x,pe=H.pageY-N.y,De=Math.sqrt(fe*fe+pe*pe);C.set(0,De),B.set(0,Math.pow(C.y/T.y,r.zoomSpeed)),q(B.y),T.copy(C)}function Le(H){r.enableZoom&&ge(H),r.enablePan&&ce(H)}function _e(H){r.enableZoom&&ge(H),r.enableRotate&&ue(H)}function et(H){if(r.enabled!==!1){if(L.length===0){var N,fe;(N=r.domElement)===null||N===void 0||N.ownerDocument.addEventListener("pointermove",Je),(fe=r.domElement)===null||fe===void 0||fe.ownerDocument.addEventListener("pointerup",He)}je(H),H.pointerType==="touch"?ye(H):yt(H)}}function Je(H){r.enabled!==!1&&(H.pointerType==="touch"?Ee(H):U(H))}function He(H){if(ie(H),L.length===0){var N,fe,pe;(N=r.domElement)===null||N===void 0||N.releasePointerCapture(H.pointerId),(fe=r.domElement)===null||fe===void 0||fe.ownerDocument.removeEventListener("pointermove",Je),(pe=r.domElement)===null||pe===void 0||pe.ownerDocument.removeEventListener("pointerup",He)}r.dispatchEvent(o),u=a.NONE}function At(H){ie(H)}function yt(H){let N;switch(H.button){case 0:N=r.mouseButtons.LEFT;break;case 1:N=r.mouseButtons.MIDDLE;break;case 2:N=r.mouseButtons.RIGHT;break;default:N=-1}switch(N){case Co.DOLLY:if(r.enableZoom===!1)return;le(H),u=a.DOLLY;break;case Co.ROTATE:if(H.ctrlKey||H.metaKey||H.shiftKey){if(r.enablePan===!1)return;J(H),u=a.PAN}else{if(r.enableRotate===!1)return;re(H),u=a.ROTATE}break;case Co.PAN:if(H.ctrlKey||H.metaKey||H.shiftKey){if(r.enableRotate===!1)return;re(H),u=a.ROTATE}else{if(r.enablePan===!1)return;J(H),u=a.PAN}break;default:u=a.NONE}u!==a.NONE&&r.dispatchEvent(s)}function U(H){if(r.enabled!==!1)switch(u){case a.ROTATE:if(r.enableRotate===!1)return;Y(H);break;case a.DOLLY:if(r.enableZoom===!1)return;he(H);break;case a.PAN:if(r.enablePan===!1)return;Se(H);break}}function D(H){r.enabled===!1||r.enableZoom===!1||u!==a.NONE&&u!==a.ROTATE||(H.preventDefault(),r.dispatchEvent(s),we(H),r.dispatchEvent(o))}function ne(H){r.enabled===!1||r.enablePan===!1||te(H)}function ye(H){switch(Ze(H),L.length){case 1:switch(r.touches.ONE){case bo.ROTATE:if(r.enableRotate===!1)return;Ke(),u=a.TOUCH_ROTATE;break;case bo.PAN:if(r.enablePan===!1)return;Ne(),u=a.TOUCH_PAN;break;default:u=a.NONE}break;case 2:switch(r.touches.TWO){case bo.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(),u=a.TOUCH_DOLLY_PAN;break;case bo.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;qe(),u=a.TOUCH_DOLLY_ROTATE;break;default:u=a.NONE}break;default:u=a.NONE}u!==a.NONE&&r.dispatchEvent(s)}function Ee(H){switch(Ze(H),u){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ue(H),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;ce(H),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Le(H),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;_e(H),r.update();break;default:u=a.NONE}}function Te(H){r.enabled!==!1&&H.preventDefault()}function je(H){L.push(H)}function ie(H){delete F[H.pointerId];for(let N=0;N<L.length;N++)if(L[N].pointerId==H.pointerId){L.splice(N,1);return}}function Ze(H){let N=F[H.pointerId];N===void 0&&(N=new de,F[H.pointerId]=N),N.set(H.pageX,H.pageY)}function tt(H){const N=H.pointerId===L[0].pointerId?L[1]:L[0];return F[N.pointerId]}t!==void 0&&this.connect(t),this.update()}}class xN{constructor(){Ue(this,"enabled",!0),Ue(this,"needsSwap",!0),Ue(this,"clear",!1),Ue(this,"renderToScreen",!1)}setSize(e,t){}render(e,t,r,i,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class _N{constructor(e){Ue(this,"camera",new Zr(-1,1,1,-1,0,1)),Ue(this,"geometry",new Zs(2,2)),Ue(this,"mesh",void 0),this.mesh=new Qt(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}const qg={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var Ku={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new de},cameraProjectionMatrix:{value:new Ge},cameraInverseProjectionMatrix:{value:new Ge},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","	return texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","		return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","		return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","	float depth = getDepth( vUv );","	float viewZ = getViewZ( depth );","	vec3 viewPosition = getViewPosition( vUv, depth, viewZ );","	vec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","	vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","	vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","	vec3 bitangent = cross( viewNormal, tangent );","	mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","		vec3 sampleVector = kernelMatrix * kernel[ i ];","		vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","		vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","		samplePointNDC /= samplePointNDC.w;","		vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","		float realDepth = getLinearDepth( samplePointUv );","		float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","		float delta = sampleDepth - realDepth;","		if ( delta > minDistance && delta < maxDistance ) {","			occlusion += 1.0;","		}","	}","	occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","	gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join(`
`)},oh={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","void main() {","	float depth = getLinearDepth( vUv );","	gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join(`
`)},ah={uniforms:{tDiffuse:{value:null},resolution:{value:new de}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","	vec2 texelSize = ( 1.0 / resolution );","	float result = 0.0;","	for ( int i = - 2; i <= 2; i ++ ) {","		for ( int j = - 2; j <= 2; j ++ ) {","			vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","			result += texture2D( tDiffuse, vUv + offset ).r;","		}","	}","	gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join(`
`)};class As extends xN{constructor(e,t,r,i){super();this.width=r!==void 0?r:512,this.height=i!==void 0?i:512,this.clear=!0,this.camera=t,this.scene=e,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const s=new bp;s.format=qs,s.type=ks,this.beautyRenderTarget=new _n(this.width,this.height),this.normalRenderTarget=new _n(this.width,this.height,{minFilter:Kt,magFilter:Kt,depthTexture:s}),this.ssaoRenderTarget=new _n(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),Ku===void 0&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new Bn({defines:Object.assign({},Ku.defines),uniforms:Uo.clone(Ku.uniforms),vertexShader:Ku.vertexShader,fragmentShader:Ku.fragmentShader,blending:bn}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Op,this.normalMaterial.blending=bn,this.blurMaterial=new Bn({defines:Object.assign({},ah.defines),uniforms:Uo.clone(ah.uniforms),vertexShader:ah.vertexShader,fragmentShader:ah.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Bn({defines:Object.assign({},oh.defines),uniforms:Uo.clone(oh.uniforms),vertexShader:oh.vertexShader,fragmentShader:oh.fragmentShader,blending:bn}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Bn({uniforms:Uo.clone(qg.uniforms),vertexShader:qg.vertexShader,fragmentShader:qg.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Ov,blendDst:qh,blendEquation:zi,blendSrcAlpha:Nv,blendDstAlpha:qh,blendEquationAlpha:zi}),this.fsQuad=new _N(null),this.originalClearColor=new Ae}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,t){switch(e.capabilities.isWebGL2===!1&&(this.noiseTexture.format=Gv),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case As.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=bn,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case As.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=bn,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case As.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=bn,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case As.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case As.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=bn,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case As.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=bn,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Iv,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(e,t,r,i,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i!=null&&(e.setClearColor(i),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderOverride(e,t,r,i,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i=t.clearColor||i,s=t.clearAlpha||s,i!=null&&(e.setClearColor(i),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}setSize(e,t){this.width=e,this.height=t,this.beautyRenderTarget.setSize(e,t),this.ssaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.ssaoMaterial.uniforms.resolution.value.set(e,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t)}generateSampleKernel(){const e=this.kernelSize,t=this.kernel;for(let r=0;r<e;r++){const i=new I;i.x=Math.random()*2-1,i.y=Math.random()*2-1,i.z=Math.random(),i.normalize();let s=r/e;s=tp.lerp(.1,1,s*s),i.multiplyScalar(s),t.push(i)}}generateRandomKernelRotations(){qw===void 0&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const r=new qw,i=4*4,s=new Float32Array(i);for(let o=0;o<i;o++){const a=Math.random()*2-1,u=Math.random()*2-1,f=0;s[o]=r.noise3d(a,u,f)}this.noiseTexture=new Hs(s,4,4,Uv,tr),this.noiseTexture.wrapS=xi,this.noiseTexture.wrapT=xi,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const e=this.scene,t=this._visibilityCache;e.traverse(function(r){t.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const e=this.scene,t=this._visibilityCache;e.traverse(function(r){const i=t.get(r);r.visible=i}),t.clear()}}As.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5};class Rx extends Pn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new SN(t)}),this.register(function(t){return new BN(t)}),this.register(function(t){return new LN(t)}),this.register(function(t){return new EN(t)}),this.register(function(t){return new TN(t)}),this.register(function(t){return new CN(t)}),this.register(function(t){return new bN(t)}),this.register(function(t){return new RN(t)}),this.register(function(t){return new AN(t)}),this.register(function(t){return new PN(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=$r.extractUrlBase(e),this.manager.itemStart(e);const a=function(f){i?i(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},u=new ar(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{s.parse(f,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=e;else if($r.decodeText(new Uint8Array(e,0,4))===uC){try{o[xt.KHR_BINARY_GLTF]=new IN(e)}catch(p){i&&i(p);return}s=o[xt.KHR_BINARY_GLTF].content}else s=$r.decodeText(new Uint8Array(e));const u=JSON.parse(s);if(u.asset===void 0||u.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new JN(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](f);a[p.name]=p,o[p.name]=!0}if(u.extensionsUsed)for(let h=0;h<u.extensionsUsed.length;++h){const p=u.extensionsUsed[h],d=u.extensionsRequired||[];switch(p){case xt.KHR_MATERIALS_UNLIT:o[p]=new wN;break;case xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[p]=new NN;break;case xt.KHR_DRACO_MESH_COMPRESSION:o[p]=new DN(u,this.dracoLoader);break;case xt.KHR_TEXTURE_TRANSFORM:o[p]=new FN;break;case xt.KHR_MESH_QUANTIZATION:o[p]=new ON;break;default:d.indexOf(p)>=0&&a[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}f.setExtensions(o),f.setPlugins(a),f.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function MN(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class AN{constructor(e){this.parser=e,this.name=xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const h=new Ae(16777215);u.color!==void 0&&h.fromArray(u.color);const p=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new Up(h),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new Gp(h),f.distance=p;break;case"spot":f=new kp(h),f.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,u.intensity!==void 0&&(f.intensity=u.intensity),f.name=t.createUniqueName(u.name||"light_"+e),i=Promise.resolve(f),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return r._getNodeRef(t.cache,a,u)})}}class wN{constructor(){this.name=xt.KHR_MATERIALS_UNLIT}getMaterialType(){return nr}extendParams(e,t,r){const i=[];e.color=new Ae(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(i)}}class SN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new de(a,a)}return Promise.all(s)}}class EN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ae(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class TN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class CN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ae(a[0],a[1],a[2]),Promise.all(s)}}class bN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class RN{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:es}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ae(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(u){u.encoding=bt})),Promise.all(s)}}class BN{constructor(e){this.parser=e,this.name=xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=r.images[s.source],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class LN{constructor(e){this.parser=e,this.name=xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let u=r.textureLoader;if(a.uri){const f=r.options.manager.getHandler(a.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,a,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class PN{constructor(e){this.name=xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const u=i.byteOffset||0,f=i.byteLength||0,h=i.count,p=i.byteStride,d=new ArrayBuffer(h*p),m=new Uint8Array(a[0],u,f);return o.decodeGltfBuffer(new Uint8Array(d),h,p,m,i.mode,i.filter),d})}else return null}}const uC="glTF",Xu=12,$w={JSON:1313821514,BIN:5130562};class IN{constructor(e){this.name=xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Xu);if(this.header={magic:$r.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==uC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Xu,i=new DataView(e,Xu);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===$w.JSON){const u=new Uint8Array(e,Xu+s,o);this.content=$r.decodeText(u)}else if(a===$w.BIN){const u=Xu+s;this.body=e.slice(u,u+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class DN{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},u={},f={};for(const h in o){const p=Ly[h]||h.toLowerCase();a[p]=o[h]}for(const h in e.attributes){const p=Ly[h]||h.toLowerCase();if(o[h]!==void 0){const d=r.accessors[e.attributes[h]],m=Wc[d.componentType];f[p]=m,u[p]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(p){i.decodeDracoFile(h,function(d){for(const m in d.attributes){const v=d.attributes[m],x=u[m];x!==void 0&&(v.normalized=x)}p(d)},a,f)})})}}class FN{constructor(){this.name=xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class By extends la{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Ae().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(u){for(const f in a)u.uniforms[f]=a[f];u.fragmentShader=u.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(u){a.specular.value=u}},specularMap:{get:function(){return a.specularMap.value},set:function(u){a.specularMap.value=u,u?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(u){a.glossiness.value=u}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(u){a.glossinessMap.value=u,u?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class NN{constructor(){this.name=xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return By}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Ae(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new Ae(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Ae(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new By(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=io,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class ON{constructor(){this.name=xt.KHR_MESH_QUANTIZATION}}class ra extends ei{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}}ra.prototype.beforeStart_=ra.prototype.copySampleValue_;ra.prototype.afterEnd_=ra.prototype.copySampleValue_;ra.prototype.interpolate_=function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,u=o*3,f=r-e,h=(t-e)/f,p=h*h,d=p*h,m=n*u,v=m-u,x=-2*d+3*p,y=d-p,_=1-x,M=y-p+h;for(let A=0;A!==o;A++){const S=s[v+A+o],T=s[v+A+a]*f,C=s[m+A+o],B=s[m+A]*f;i[A]=_*S+M*T+x*C+y*B}return i};const kN=new an;class GN extends ra{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return kN.fromArray(s).normalize().toArray(s),s}}const Gi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Wc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},e1={9728:Kt,9729:Dt,9984:Dc,9985:_p,9986:Fc,9987:qi},t1={33071:On,33648:xl,10497:xi},n1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ly={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_s={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},UN={CUBICSPLINE:void 0,LINEAR:Qo,STEP:Ml},Zg={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function HN(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new la({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ks})),n.DefaultMaterial}function Qu(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Bo(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zN(n,e,t){let r=!1,i=!1;for(let a=0,u=e.length;a<u;a++){const f=e[a];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(n);const s=[],o=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];if(r){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;s.push(h)}if(i){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;o.push(h)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const u=a[0],f=a[1];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=f),n.morphTargetsRelative=!0,n})}function VN(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function WN(n){const e=n.extensions&&n.extensions[xt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+r1(e.attributes):t=n.indices+":"+r1(n.attributes)+":"+n.mode,t}function r1(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function Py(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class JN{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new MN,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new _x(this.options.manager):this.textureLoader=new hx(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ar(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Qu(s,a,i),Bo(a,i),Promise.all(r._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,u=o.length;a<u;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const u=this.associations.get(o);u!=null&&this.associations.set(a,u);for(const[f,h]of o.children.entries())s(h,a.children[f])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[xt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load($r.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],u=n1[i.type],f=Wc[i.componentType],h=f.BYTES_PER_ELEMENT,p=h*u,d=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let x,y;if(m&&m!==p){const _=Math.floor(d/m),M="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let A=t.cache.get(M);A||(x=new f(a,_*m,i.count*m/h),A=new lo(x,m/h),t.cache.add(M,A)),y=new Xi(A,u,d%m/h,v)}else a===null?x=new f(i.count*u):x=new f(a,d,i.count*u),y=new pt(x,u,v);if(i.sparse!==void 0){const _=n1.SCALAR,M=Wc[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,S=i.sparse.values.byteOffset||0,T=new M(o[1],A,i.sparse.count*_),C=new f(o[2],S,i.sparse.count*u);a!==null&&(y=new pt(y.array.slice(),y.itemSize,y.normalized));for(let B=0,L=T.length;B<L;B++){const F=T[B];if(y.setX(F,C[B*u]),u>=2&&y.setY(F,C[B*u+1]),u>=3&&y.setZ(F,C[B*u+2]),u>=4&&y.setW(F,C[B*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e],s=t.images[i.source];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=this.options,a=s.textures[e],u=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=self.URL||self.webkitURL;let h=t.uri||"",p=!1;if(t.bufferView!==void 0)h=i.getDependency("bufferView",t.bufferView).then(function(m){p=!0;const v=new Blob([m],{type:t.mimeType});return h=f.createObjectURL(v),h});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(h).then(function(m){return new Promise(function(v,x){let y=v;r.isImageBitmapLoader===!0&&(y=function(_){const M=new Yt(_);M.needsUpdate=!0,v(M)}),r.load($r.resolveURL(m,o.path),y,void 0,x)})}).then(function(m){p===!0&&f.revokeObjectURL(h),m.flipY=!1,a.name&&(m.name=a.name);const x=(s.samplers||{})[a.sampler]||{};return m.magFilter=e1[x.magFilter]||Dt,m.minFilter=e1[x.minFilter]||qi,m.wrapS=t1[x.wrapS]||xi,m.wrapT=t1[x.wrapT]||xi,i.associations.set(m,{textures:e}),m}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null});return this.textureCache[u]=d,d}assignTexture(e,t,r){const i=this;return this.getDependency("texture",r.index).then(function(s){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[xt.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[xt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=i.associations.get(s);s=i.extensions[xt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),i.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let u=this.cache.get(a);u||(u=new uo,Wt.prototype.copy.call(u,r),u.color.copy(r.color),u.map=r.map,u.sizeAttenuation=!1,this.cache.add(a,u)),r=u}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let u=this.cache.get(a);u||(u=new yn,Wt.prototype.copy.call(u,r),u.color.copy(r.color),this.cache.add(a,u)),r=u}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=r.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),i&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(r))),r=u}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return la}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},u=s.extensions||{},f=[];if(u[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const p=i[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=p.getMaterialType(),f.push(p.extendParams(a,s,t))}else if(u[xt.KHR_MATERIALS_UNLIT]){const p=i[xt.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),f.push(p.extendParams(a,s,t))}else{const p=s.pbrMetallicRoughness||{};if(a.color=new Ae(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const d=p.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}p.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",p.baseColorTexture)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Xs);const h=s.alphaMode||Zg.OPAQUE;if(h===Zg.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===Zg.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==nr&&(f.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new de(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;a.normalScale.set(p,p)}return s.occlusionTexture!==void 0&&o!==nr&&(f.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==nr&&(a.emissive=new Ae().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==nr&&f.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(f).then(function(){let p;return o===By?p=i[xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):p=new o(a),s.name&&(p.name=s.name),p.map&&(p.map.encoding=bt),p.emissiveMap&&(p.emissiveMap.encoding=bt),Bo(p,s),t.associations.set(p,{materials:e}),s.extensions&&Qu(i,p,s),p})}createUniqueName(e){const t=Mt.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(u){return i1(u,a,t)})}const o=[];for(let a=0,u=e.length;a<u;a++){const f=e[a],h=WN(f),p=i[h];if(p)o.push(p.promise);else{let d;f.extensions&&f.extensions[xt.KHR_DRACO_MESH_COMPRESSION]?d=s(f):d=i1(new Ye,f,t),i[h]={primitive:f,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let u=0,f=o.length;u<f;u++){const h=o[u].material===void 0?HN(this.cache):this.getDependency("material",o[u].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(u){const f=u.slice(0,u.length-1),h=u[u.length-1],p=[];for(let m=0,v=h.length;m<v;m++){const x=h[m],y=o[m];let _;const M=f[m];if(y.mode===Gi.TRIANGLES||y.mode===Gi.TRIANGLE_STRIP||y.mode===Gi.TRIANGLE_FAN||y.mode===void 0)_=s.isSkinnedMesh===!0?new sf(x,M):new Qt(x,M),_.isSkinnedMesh===!0&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),y.mode===Gi.TRIANGLE_STRIP?_.geometry=s1(_.geometry,NE):y.mode===Gi.TRIANGLE_FAN&&(_.geometry=s1(_.geometry,zv));else if(y.mode===Gi.LINES)_=new Kn(x,M);else if(y.mode===Gi.LINE_STRIP)_=new Mi(x,M);else if(y.mode===Gi.LINE_LOOP)_=new Lp(x,M);else if(y.mode===Gi.POINTS)_=new Zl(x,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&VN(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Bo(_,s),y.extensions&&Qu(i,_,y),t.assignFinalMaterial(_),p.push(_)}for(let m=0,v=p.length;m<v;m++)t.associations.set(p[m],{meshes:e,primitives:m});if(p.length===1)return p[0];const d=new pi;t.associations.set(d,{meshes:e});for(let m=0,v=p.length;m<v;m++)d.add(p[m]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new kt(tp.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Zr(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Bo(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const p=r.channels[f],d=r.samplers[p.sampler],m=p.target,v=m.node!==void 0?m.node:m.id,x=r.parameters!==void 0?r.parameters[d.input]:d.input,y=r.parameters!==void 0?r.parameters[d.output]:d.output;i.push(this.getDependency("node",v)),s.push(this.getDependency("accessor",x)),o.push(this.getDependency("accessor",y)),a.push(d),u.push(m)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(u)]).then(function(f){const h=f[0],p=f[1],d=f[2],m=f[3],v=f[4],x=[];for(let _=0,M=h.length;_<M;_++){const A=h[_],S=p[_],T=d[_],C=m[_],B=v[_];if(A===void 0)continue;A.updateMatrix(),A.matrixAutoUpdate=!0;let L;switch(_s[B.path]){case _s.weights:L=Nl;break;case _s.rotation:L=to;break;case _s.position:case _s.scale:default:L=Ol;break}const F=A.name?A.name:A.uuid,G=C.interpolation!==void 0?UN[C.interpolation]:Qo,b=[];_s[B.path]===_s.weights?A.traverse(function(W){W.morphTargetInfluences&&b.push(W.name?W.name:W.uuid)}):b.push(F);let P=T.array;if(T.normalized){const W=Py(P.constructor),z=new Float32Array(P.length);for(let K=0,X=P.length;K<X;K++)z[K]=P[K]*W;P=z}for(let W=0,z=b.length;W<z;W++){const K=new L(b[W]+"."+_s[B.path],S.array,P,G);C.interpolation==="CUBICSPLINE"&&(K.createInterpolant=function(q){const V=this instanceof to?GN:ra;return new V(this.times,this.values,this.getValueSize()/3,q)},K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),x.push(K)}}const y=r.name?r.name:"animation_"+e;return new kl(y,void 0,x)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let u=0,f=i.weights.length;u<f;u++)a.morphTargetInfluences[u]=i.weights[u]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],u=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return u&&a.push(u),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(f){return i._getNodeRef(i.cameraCache,s.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)}),Promise.all(a)}().then(function(a){let u;if(s.isBone===!0?u=new of:a.length>1?u=new pi:a.length===1?u=a[0]:u=new mt,u!==a[0])for(let f=0,h=a.length;f<h;f++)u.add(a[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Bo(u,s),s.extensions&&Qu(r,u,s),s.matrix!==void 0){const f=new Ge;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new pi;i.name&&(o.name=s.createUniqueName(i.name)),Bo(o,i),i.extensions&&Qu(r,o,i);const a=i.nodes||[],u=[];for(let f=0,h=a.length;f<h;f++)u.push(cC(a[f],o,t,s));return Promise.all(u).then(function(){const f=h=>{const p=new Map;for(const[d,m]of s.associations)(d instanceof Wt||d instanceof Yt)&&p.set(d,m);return h.traverse(d=>{const m=s.associations.get(d);m!=null&&p.set(d,m)}),p};return s.associations=f(o),o})}}function cC(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const u=[];for(let f=0,h=o.joints.length;f<h;f++)u.push(r.getDependency("node",o.joints[f]));return Promise.all(u)}).then(function(a){return s.traverse(function(u){if(!u.isMesh)return;const f=[],h=[];for(let p=0,d=a.length;p<d;p++){const m=a[p];if(m){f.push(m);const v=new Ge;o.inverseBindMatrices!==void 0&&v.fromArray(o.inverseBindMatrices.array,p*16),h.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[p])}u.bind(new af(f,h),u.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let u=0,f=a.length;u<f;u++){const h=a[u];o.push(cC(h,s,t,r))}}return Promise.all(o)})}function jN(n,e,t){const r=e.attributes,i=new lr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],u=a.min,f=a.max;if(u!==void 0&&f!==void 0){if(i.set(new I(u[0],u[1],u[2]),new I(f[0],f[1],f[2])),a.normalized){const h=Py(Wc[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new I,u=new I;for(let f=0,h=s.length;f<h;f++){const p=s[f];if(p.POSITION!==void 0){const d=t.json.accessors[p.POSITION],m=d.min,v=d.max;if(m!==void 0&&v!==void 0){if(u.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),d.normalized){const x=Py(Wc[d.componentType]);u.multiplyScalar(x)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new $i;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function i1(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(u){n.setAttribute(a,u)})}for(const o in r){const a=Ly[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Bo(n,e),jN(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?zN(n,e.targets,t):n})}function s1(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)o.push(u);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===zv)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}class KN extends dx{constructor(e){super(e);this.type=Br}parse(e){const a=function(A,S){switch(A){case 1:console.error("THREE.RGBELoader Read Error: "+(S||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(S||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(S||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(S||""))}return-1},p=`
`,d=function(A,S,T){S=S||1024;let B=A.pos,L=-1,F=0,G="",b=String.fromCharCode.apply(null,new Uint16Array(A.subarray(B,B+128)));for(;0>(L=b.indexOf(p))&&F<S&&B<A.byteLength;)G+=b,F+=b.length,B+=128,b+=String.fromCharCode.apply(null,new Uint16Array(A.subarray(B,B+128)));return-1<L?(T!==!1&&(A.pos+=F+L+1),G+b.slice(0,L)):!1},m=function(A){const S=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*FORMAT=(\S+)\s*$/,L=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let G,b;if(A.pos>=A.byteLength||!(G=d(A)))return a(1,"no header found");if(!(b=G.match(S)))return a(3,"bad initial token");for(F.valid|=1,F.programtype=b[1],F.string+=G+`
`;G=d(A),G!==!1;){if(F.string+=G+`
`,G.charAt(0)==="#"){F.comments+=G+`
`;continue}if((b=G.match(T))&&(F.gamma=parseFloat(b[1])),(b=G.match(C))&&(F.exposure=parseFloat(b[1])),(b=G.match(B))&&(F.valid|=2,F.format=b[1]),(b=G.match(L))&&(F.valid|=4,F.height=parseInt(b[1],10),F.width=parseInt(b[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2?F.valid&4?F:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(A,S,T){const C=S;if(C<8||C>32767||A[0]!==2||A[1]!==2||A[2]&128)return new Uint8Array(A);if(C!==(A[2]<<8|A[3]))return a(3,"wrong scanline width");const B=new Uint8Array(4*S*T);if(!B.length)return a(4,"unable to allocate buffer space");let L=0,F=0;const G=4*C,b=new Uint8Array(4),P=new Uint8Array(G);let W=T;for(;W>0&&F<A.byteLength;){if(F+4>A.byteLength)return a(1);if(b[0]=A[F++],b[1]=A[F++],b[2]=A[F++],b[3]=A[F++],b[0]!=2||b[1]!=2||(b[2]<<8|b[3])!=C)return a(3,"bad rgbe scanline format");let z=0,K;for(;z<G&&F<A.byteLength;){K=A[F++];const q=K>128;if(q&&(K-=128),K===0||z+K>G)return a(3,"bad scanline data");if(q){const V=A[F++];for(let re=0;re<K;re++)P[z++]=V}else P.set(A.subarray(F,F+K),z),z+=K,F+=K}const X=C;for(let q=0;q<X;q++){let V=0;B[L]=P[q+V],V+=C,B[L+1]=P[q+V],V+=C,B[L+2]=P[q+V],V+=C,B[L+3]=P[q+V],L+=4}W--}return B},x=function(A,S,T,C){const B=A[S+3],L=Math.pow(2,B-128)/255;T[C+0]=A[S+0]*L,T[C+1]=A[S+1]*L,T[C+2]=A[S+2]*L,T[C+3]=1},y=function(A,S,T,C){const B=A[S+3],L=Math.pow(2,B-128)/255;T[C+0]=nc.toHalfFloat(Math.min(A[S+0]*L,65504)),T[C+1]=nc.toHalfFloat(Math.min(A[S+1]*L,65504)),T[C+2]=nc.toHalfFloat(Math.min(A[S+2]*L,65504)),T[C+3]=nc.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const M=m(_);if(M!==-1){const A=M.width,S=M.height,T=v(_.subarray(_.pos),A,S);if(T!==-1){let C,B,L,F;switch(this.type){case tr:F=T.length/4;const G=new Float32Array(F*4);for(let P=0;P<F;P++)x(T,P*4,G,P*4);C=G,L=tr;break;case Br:F=T.length/4;const b=new Uint16Array(F*4);for(let P=0;P<F;P++)y(T,P*4,b,P*4);C=b,L=Br;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:A,height:S,data:C,header:M.string,gamma:M.gamma,exposure:M.exposure,format:B,type:L}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case tr:o.encoding=or,o.minFilter=Dt,o.magFilter=Dt,o.generateMipmaps=!1,o.flipY=!0;break;case Br:o.encoding=or,o.minFilter=Dt,o.magFilter=Dt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const $g=new WeakMap;class XN extends Pn{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new ar(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const f=t.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=f.name)}const r=JSON.stringify(t);if($g.has(e)){const u=$g.get(e);if(u.key===r)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(u=>(i=u,new Promise((f,h)=>{i._callbacks[s]={resolve:f,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),$g.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Ye;e.index&&t.setIndex(new pt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new pt(o,a))}return t}_loadLibrary(e,t){const r=new ar(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=QN.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function QN(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(p){h({draco:p})},DracoDecoderModule(n)});break;case"decode":const u=a.buffer,f=a.taskConfig;e.then(h=>{const p=h.draco,d=new p.Decoder,m=new p.DecoderBuffer;m.Init(new Int8Array(u),u.byteLength);try{const v=t(p,d,m,f),x=v.attributes.map(y=>y.array.buffer);v.index&&x.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},x)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{p.destroy(m),p.destroy(d)}});break}};function t(o,a,u,f){const h=f.attributeIDs,p=f.attributeTypes;let d,m;const v=a.GetEncodedGeometryType(u);if(v===o.TRIANGULAR_MESH)d=new o.Mesh,m=a.DecodeBufferToMesh(u,d);else if(v===o.POINT_CLOUD)d=new o.PointCloud,m=a.DecodeBufferToPointCloud(u,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const y in h){const _=self[p[y]];let M,A;if(f.useUniqueIDs)A=h[y],M=a.GetAttributeByUniqueId(d,A);else{if(A=a.GetAttributeId(d,o[h[y]]),A===-1)continue;M=a.GetAttribute(d,A)}x.attributes.push(i(o,a,d,y,_,M))}return v===o.TRIANGULAR_MESH&&(x.index=r(o,a,d)),o.destroy(d),x}function r(o,a,u){const h=u.num_faces()*3,p=h*4,d=o._malloc(p);a.GetTrianglesUInt32Array(u,p,d);const m=new Uint32Array(o.HEAPF32.buffer,d,h).slice();return o._free(d),{array:m,itemSize:1}}function i(o,a,u,f,h,p){const d=p.num_components(),v=u.num_points()*d,x=v*h.BYTES_PER_ELEMENT,y=s(o,h),_=o._malloc(x);a.GetAttributeDataArrayForAllPoints(u,p,y,x,_);const M=new h(o.HEAPF32.buffer,_,v).slice();return o._free(_),{name:f,array:M,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let lh;const e0=()=>{if(lh)return lh;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(p=>{s=p.instance,s.exports.__wasm_call_ctors()});function a(p){const d=new Uint8Array(p.length);for(let v=0;v<p.length;++v){const x=p.charCodeAt(v);d[v]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let v=0;v<p.length;++v)d[m++]=d[v]<60?r[d[v]]:(d[v]-60)*64+d[++v];return d.buffer.slice(0,m)}function u(p,d,m,v,x,y){const _=s.exports.sbrk,M=m+3&-4,A=_(M*v),S=_(x.length),T=new Uint8Array(s.exports.memory.buffer);T.set(x,S);const C=p(A,m,v,S,x.length);if(C===0&&y&&y(A,M,v),d.set(T.subarray(A,A+m*v)),_(A-_(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return lh={ready:o,supported:!0,decodeVertexBuffer(p,d,m,v,x){u(s.exports.meshopt_decodeVertexBuffer,p,d,m,v,s.exports[f[x]])},decodeIndexBuffer(p,d,m,v){u(s.exports.meshopt_decodeIndexBuffer,p,d,m,v)},decodeIndexSequence(p,d,m,v){u(s.exports.meshopt_decodeIndexSequence,p,d,m,v)},decodeGltfBuffer(p,d,m,v,x,y){u(s.exports[h[x]],p,d,m,v,s.exports[f[y]])}},lh},fO=Be.exports.forwardRef((h,f)=>{var p=h,{makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a}=p,u=Ur(p,["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"]);const d=Xr(C=>C.invalidate),m=Xr(C=>C.camera),v=Xr(C=>C.gl),x=Xr(C=>C.events),y=Xr(C=>C.set),_=Xr(C=>C.get),M=Xr(C=>C.performance),A=e||m,S=r||x.connected||v.domElement,T=Be.exports.useMemo(()=>new vN(A),[A]);return rC(()=>{T.enabled&&T.update()}),Be.exports.useEffect(()=>(T.connect(S),()=>void T.dispose()),[S,t,T,d]),Be.exports.useEffect(()=>{const C=B=>{d(),t&&M.regress(),s&&s(B)};return T.addEventListener("change",C),o&&T.addEventListener("start",o),a&&T.addEventListener("end",a),()=>{o&&T.removeEventListener("start",o),a&&T.removeEventListener("end",a),T.removeEventListener("change",C)}},[s,o,a]),Be.exports.useEffect(()=>{if(n){const C=_().controls;return y({controls:T}),()=>y({controls:C})}},[n,T]),Be.exports.createElement("primitive",rp({ref:f,object:T,enableDamping:i},u))});let uh=null;function fC(n,e,t){return r=>{t&&t(r),n&&(uh||(uh=new XN),uh.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(uh)),e&&r.setMeshoptDecoder(typeof e0=="function"?e0():e0)}}function dC(n,e=!0,t=!0,r){return tu(Rx,n,fC(e,t,r))}dC.preload=(n,e=!0,t=!0,r)=>tu.preload(Rx,n,fC(e,t,r));dC.clear=n=>tu.clear(Rx,n);var hC={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(ab,function(){var t=function(){function r(m){return o.appendChild(m.dom),m}function i(m){for(var v=0;v<o.children.length;v++)o.children[v].style.display=v===m?"block":"none";s=m}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(m){m.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),u=a,f=0,h=r(new t.Panel("FPS","#0ff","#002")),p=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=r(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){f++;var m=(performance||Date).now();if(p.update(m-a,200),m>u+1e3&&(h.update(1e3*f/(m-u),100),u=m,f=0,d)){var v=performance.memory;d.update(v.usedJSHeapSize/1048576,v.jsHeapSizeLimit/1048576)}return m},update:function(){a=this.end()},domElement:o,setMode:i}};return t.Panel=function(r,i,s){var o=1/0,a=0,u=Math.round,f=u(window.devicePixelRatio||1),h=80*f,p=48*f,d=3*f,m=2*f,v=3*f,x=15*f,y=74*f,_=30*f,M=document.createElement("canvas");M.width=h,M.height=p,M.style.cssText="width:80px;height:48px";var A=M.getContext("2d");return A.font="bold "+9*f+"px Helvetica,Arial,sans-serif",A.textBaseline="top",A.fillStyle=s,A.fillRect(0,0,h,p),A.fillStyle=i,A.fillText(r,d,m),A.fillRect(v,x,y,_),A.fillStyle=s,A.globalAlpha=.9,A.fillRect(v,x,y,_),{dom:M,update:function(S,T){o=Math.min(o,S),a=Math.max(a,S),A.fillStyle=s,A.globalAlpha=1,A.fillRect(0,0,h,x),A.fillStyle=i,A.fillText(u(S)+" "+r+" ("+u(o)+"-"+u(a)+")",d,m),A.drawImage(M,v+f,x,y-f,_,v,x,y-f,_),A.fillRect(v+y-f,x,f,_),A.fillStyle=s,A.globalAlpha=.9,A.fillRect(v+y-f,x,f,u((1-S/T)*_))}}},t})})(hC);var YN=hC.exports;function o1(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function qN(n,e=[],t){const[r,i]=Be.exports.useState();return Be.exports.useLayoutEffect(()=>{const s=n();return i(s),o1(t,s),()=>o1(t,null)},e),r}function dO({showPanel:n=0,className:e,parent:t}){const r=qN(()=>new YN,[]);return Be.exports.useEffect(()=>{if(r){const i=t&&t.current||document.body;r.showPanel(n),i==null||i.appendChild(r.dom),e&&r.dom.classList.add(...e.split(" ").filter(a=>a));const s=nN(()=>r.begin()),o=rN(()=>r.end());return()=>{i==null||i.removeChild(r.dom),s(),o()}}},[t,r,e,n]),null}const t0={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},ZN="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",$N=n=>n.current&&n.current.isScene,Bx=n=>$N(n)?n.current:n;function hO(n){return n.map?Be.exports.createElement(pC,n):n.children?Be.exports.createElement(eO,n):Be.exports.createElement(tO,n)}function pC({scene:n,background:e=!1,map:t}){const r=Xr(i=>i.scene);return Be.exports.useLayoutEffect(()=>{if(t){const i=Bx(n||r),s=i.background,o=i.environment;return e!=="only"&&(i.environment=t),e&&(i.background=t),()=>{e!=="only"&&(i.environment=o),e&&(i.background=s)}}},[n,t]),null}function eO({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,background:s=!1,scene:o,files:a,path:u,preset:f=void 0,extensions:h}){const p=Xr(_=>_.gl),d=Xr(_=>_.scene),m=Be.exports.useRef(null),[v]=Be.exports.useState(()=>new ql),x=Be.exports.useMemo(()=>{const _=new ef(r);return _.texture.type=Br,_},[r]);Be.exports.useLayoutEffect(()=>{i===1&&m.current.update(p,v);const _=Bx(o||d),M=_.background,A=_.environment;return s!=="only"&&(_.environment=x.texture),s&&(_.background=x.texture),()=>{s!=="only"&&(_.environment=A),s&&(_.background=M)}},[n,o]);let y=1;return rC(()=>{(i===1/0||y<i)&&(m.current.update(p,v),y++)}),Be.exports.createElement(Be.exports.Fragment,null,hN(Be.exports.createElement(Be.exports.Fragment,null,n,Be.exports.createElement("cubeCamera",{ref:m,args:[e,t,x]}),(a||f)&&Be.exports.createElement(pC,{background:!0,files:a,preset:f,path:u,extensions:h,scene:v})),v))}function tO({background:n=!1,files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,scene:i,extensions:s}){if(r){if(!(r in t0))throw new Error("Preset must be one of: "+Object.keys(t0).join(", "));e=t0[r],t=ZN}const o=Xr(p=>p.scene),a=Array.isArray(e),f=tu(a?fx:KN,a?[e]:e,p=>{p.setPath(t),p.setDataType==null||p.setDataType(tr),s&&s(p)}),h=a?f[0]:f;return h.mapping=a?Ki:vl,Be.exports.useLayoutEffect(()=>{const p=Bx(i||o),d=p.background,m=p.environment;return n!=="only"&&(p.environment=h),n&&(p.background=h),()=>{n!=="only"&&(p.environment=m),n&&(p.background=d)}},[h,n,i]),null}function nO(n,e,t=new I){const r=Math.PI*(n-.5),i=2*Math.PI*(e-.5);return t.x=Math.cos(i),t.y=Math.sin(r),t.z=Math.sin(i),t}const pO=Be.exports.forwardRef((h,f)=>{var p=h,{inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=nO(n,e)}=p,u=Ur(p,["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"]);const d=Be.exports.useMemo(()=>new I().setScalar(t),[t]),[m]=Be.exports.useState(()=>new Rs);return Be.exports.createElement("primitive",rp({dispose:void 0,object:m,ref:f,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:d},u))});class Jc extends ei{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}}Jc.prototype.beforeStart_=Jc.prototype.copySampleValue_;Jc.prototype.afterEnd_=Jc.prototype.copySampleValue_;Jc.prototype.interpolate_=function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,u=o*3,f=r-e,h=(t-e)/f,p=h*h,d=p*h,m=n*u,v=m-u,x=-2*d+3*p,y=d-p,_=1-x,M=y-p+h;for(let A=0;A!==o;A++){const S=s[v+A+o],T=s[v+A+a]*f,C=s[m+A+o],B=s[m+A]*f;i[A]=_*S+M*T+x*C+y*B}return i};const mO=new an;export{lO as C,hO as E,fO as O,sO as R,As as S,cO as a,pO as b,iO as c,dO as d,aO as e,uO as j,Be as r,dC as u};
